%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: article-6.dvi
%%Pages: 18
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Italic Times-Bold Courier Symbol
%%EndComments
%DVIPSCommandLine: dvips -o usenix-draft.ps -D600 -Z article-6.dvi
%DVIPSParameters: dpi=600, compressed, comments removed
%DVIPSSource:  TeX output 1996.11.14:1047
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage
userdict /eop-hook known{eop-hook}if}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale true def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin 40258437 52099154 1000 600 600 (article-6.dvi)
@start /Fa 167[43 4[33 4[43 4[20 3[37 69[{}5 59.999973
/Times-Roman rf /Fb 139[45 1[45 1[45 1[45 7[45 45 1[45
99[{}7 75.000000 /Courier rf /Fc 205[21 21 49[{}2 41.666668
/Times-Roman rf /Fd 256[{}0 41.666668 /Symbol rf /Ff
256[{}0 50.000000 /Symbol rf /Fh 133[29 33 33 2[33 18
26 22 33 33 33 33 52 18 2[18 2[22 29 33 29 33 29 12[41
1[44 1[37 4[48 1[22 5[44 12[33 33 5[18 17 22 3[22 22
40[{}33 66.666664 /Times-Roman rf /Fi 205[25 25 49[{}2
50.000000 /Times-Roman rf /Fj 206[31 31 48[{}2 61.666618
/Times-Roman rf /Fk 90[44 165[{}1 61.666618 /Symbol rf
/Fl 90[41 165[{}1 58.333336 /Symbol rf /Fm 81[37 51[29
33 33 50 33 37 21 29 29 1[37 37 37 54 21 33 1[21 37 37
21 33 37 33 37 37 8[46 62 46 54 42 37 46 1[46 54 50 62
2[33 25 54 54 46 46 54 50 46 46 6[25 37 37 37 37 37 37
37 37 37 37 21 1[25 3[25 25 25 39[{}62 75.000000 /Times-Italic
rf /Fn 146[43 109[{}1 75.000000 /Symbol rf /Fo 69[33
8[37 2[42 3[33 47[33 37 37 54 37 37 21 29 25 37 37 37
37 58 21 37 1[21 37 37 25 33 37 33 37 33 3[25 1[25 46
54 1[71 54 54 46 42 50 54 42 54 54 66 46 54 29 25 54
54 42 46 54 50 50 54 1[33 4[21 37 37 37 37 37 37 37 37
37 37 21 19 25 19 2[25 25 1[58 38[{}75 75.000000 /Times-Roman
rf /Fp 134[42 1[60 1[46 28 32 37 1[46 42 46 1[23 2[23
46 1[28 37 46 37 1[42 12[55 1[60 5[55 5[51 3[55 13[42
42 42 42 2[21 28 45[{}28 83.333336 /Times-Bold rf /Fq
1 59 df<121C127FEAFF80A5EA7F00121C0909798817>58 D E /Fr
2 62 df<15301578B3A6007FB812F8B912FCA26C17F8C80078C8FCB3A6153036367BAF41
>43 D<007FB812F8B912FCA3CCFCAEB912FCA36C17F836167B9F41>61
D E /Fs 146[48 109[{}1 83.333336 /Symbol rf /Ft 134[50
50 50 50 50 50 50 50 1[50 50 50 50 50 50 1[50 50 50 50
50 50 50 50 50 7[50 4[50 3[50 50 50 1[50 2[50 2[50 50
50 50 1[50 6[50 10[50 50 50 3[50 50 40[{}41 83.333336
/Courier rf /Fu 134[50 50 1[50 55 33 39 44 1[55 50 55
83 28 55 1[28 55 50 33 44 55 44 55 50 9[100 2[66 55 72
1[61 78 1[94 66 2[39 2[61 66 72 72 66 72 9[50 50 50 50
50 50 50 2[25 46[{}45 100.000000 /Times-Bold rf /Fv 134[35
2[35 35 35 35 35 2[35 2[35 35 5[35 35 35 35 35 32[35
17[35 1[35 44[{}17 58.333336 /Courier rf /Fw 2 104 df<147EEB03FEEB0FE0EB
1F00133E5BB35BA2485AEA07E0EAFF8000FCC7FCB47EEA07E0EA01F06C7EA2137CB37F7F
EB0FE0EB03FEEB007E173B7BAB22>102 D<12FCB47EEA0FE0EA01F06C7E137CB37FA27F
EB0FC0EB03FEEB007EEB03FEEB0FC0EB1F00133EA25BB35B485AEA0FE0EAFF8000FCC7FC
173B7BAB22>I E /Fx 134[29 29 42 29 29 16 23 19 29 29
29 29 45 16 29 16 16 29 29 19 26 29 26 29 26 8[42 3[36
32 39 1[32 42 42 52 3[19 42 42 32 36 42 39 39 42 7[29
29 1[29 29 29 29 29 29 29 1[15 19 15 2[19 19 1[45 38[{}57
58.333336 /Times-Roman rf /Fy 134[37 37 55 37 42 23 32
32 42 42 42 42 60 23 37 1[23 42 42 23 37 42 37 42 42
16[51 1[55 4[28 5[55 1[51 19[28 45[{}30 83.333336 /Times-Italic
rf /Fz 47[83 21[37 8[42 1[46 46 3[37 47[37 42 42 60 42
42 23 32 28 42 42 42 42 65 23 42 23 23 42 42 28 37 42
37 42 37 28 2[28 1[28 2[60 78 60 60 51 46 55 60 46 60
60 74 51 60 32 28 60 60 46 51 60 55 55 60 5[23 23 42
42 42 42 42 42 42 42 42 42 23 21 28 21 2[28 28 28 65
69 37[{}80 83.333336 /Times-Roman rf /FA 134[60 1[86
60 66 40 47 53 2[60 66 100 33 66 1[33 66 60 40 53 66
53 66 60 9[120 2[80 66 86 1[73 6[47 2[73 1[86 86 1[86
10[60 60 60 60 60 60 1[33 47[{}38 119.999947 /Times-Bold
rf /FB 134[44 2[44 50 28 39 39 1[50 50 50 72 28 44 1[28
2[28 44 1[44 1[50 11[72 1[50 14[72 66 61 61 7[50 1[50
2[50 1[50 1[50 3[25 44[{}29 100.000000 /Times-Italic
rf /FC 137[50 50 28 39 33 2[50 50 78 28 2[28 50 50 1[44
50 2[44 12[61 55 66 9[72 2[61 72 66 1[72 18[25 46[{}24
100.000000 /Times-Roman rf /FD 138[72 40 56 48 2[72 72
112 40 72 1[40 72 72 48 64 1[64 1[64 9[135 3[80 2[80
3[88 3[104 1[80 2[96 1[104 19[48 45[{}25 144.000000 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 376 237 a FD(High-Performance)32 b(Local)i(Area)h
(Communication)d(W)-6 b(ith)37 b(Fast)1802 420 y(Sockets)607
702 y FC(Steven)25 b(H.)g(Rodrigues)268 b(Thomas)24 b(E.)g(Anderson)268
b(David)24 b(E.)h(Culler)1480 943 y FB(Computer)f(Science)h(Division)
1308 1059 y(University)f(of)h(California)e(at)h(Berkeley)1628
1175 y(Berkeley)-5 b(,)25 b(CA)g(94720)150 1433 y FA(Abstract)150
1651 y Fz(Modern)g(switched)h(networks)g(such)g(as)h(A)-9
b(TM)27 b(and)f(Myri-)150 1751 y(net)d(enable)g(low-latency)-5
b(,)22 b(high-bandwidth)d(communica-)150 1850 y(tion.)33
b(This)22 b(performance)e(has)i(not)g(been)g(realized)g(by)f(cur)n(-)
150 1950 y(rent)13 b(applications,)h(because)f(of)h(the)g(high)f
(processing)f(over)n(-)150 2050 y(heads)17 b(imposed)g(by)g(existing)g
(communications)e(software.)150 2149 y(These)34 b(overheads)e(are)i
(usually)f(not)h(hidden)f(with)h(lar)o(ge)150 2249 y(packets;)16
b(most)e(network)f(traf)o(\256c)h(is)h(small.)25 b(W)-7
b(e)15 b(have)f(devel-)150 2349 y(oped)21 b(Fast)i(Sockets,)g(a)f
(local-area)f(communication)f(layer)150 2448 y(that)g(utilizes)h(a)g
(high-performance)16 b(protocol)i(and)i(exports)150 2548
y(the)33 b(Berkeley)g(Sockets)g(programming)c(interface.)65
b(Fast)150 2647 y(Sockets)30 b(realizes)g(round-trip)d(transfer)i
(times)h(of)g(60)f(mi-)150 2747 y(croseconds)f(and)h(maximum)f
(transfer)h(bandwidth)e(of)i(33)150 2847 y(MB/second)e(between)g(two)h
(UltraSP)-8 b(ARC)30 b(1s)e(connected)150 2946 y(by)f(a)h(Myrinet)e
(network.)47 b(Fast)29 b(Sockets)e(obtains)g(perfor)n(-)150
3046 y(mance)35 b(by)h(collapsing)f(protocol)g(layers,)k(using)d
(simple)150 3146 y(buf)o(fer)31 b(management)g(strategies,)36
b(and)c(utilizing)g(knowl-)150 3245 y(edge)13 b(of)h(packet)f
(destinations)g(for)h(direct)f(transfer)g(into)h(user)150
3345 y(buf)o(fers.)31 b(Using)23 b Fy(r)m(eceive)f(posting)p
Fz(,)g(we)g(make)g(the)g(Sockets)150 3444 y(API)j(a)h(single-copy)d
(communications)f(layer)i(and)h(enable)150 3544 y(regular)c(Sockets)i
(programs)e(to)h(exploit)g(the)h(performance)150 3644
y(of)28 b(modern)e(networks.)48 b(Fast)29 b(Sockets)f(transparently)d
(re-)150 3743 y(verts)14 b(to)g(standard)f(TCP/IP)i(protocols)e(for)g
(wide-area)g(com-)150 3843 y(munication.)p 150 3967 705
4 v 270 4043 a Fx(This)19 b(work)h(was)f(supported)h(in)g(part)g(by)f
(the)h(Defense)f(Advanced)h(Research)150 4110 y(Projects)29
b(Agency)f(\(N00600-93-C-2481,)33 b(F30602-95-C-0014\),)g(the)28
b(National)150 4176 y(Science)10 b(Foundation)h(\(CDA)f(0401)n(156\),)h
(California)g(MICRO,)f(the)g(A)-6 b(T&T)9 b(Founda-)150
4243 y(tion,)14 b(Digital)g(Equipment)f(Corporation,)i(Exabyte,)d
(Hewlett)i(Packard,)f(Intel,)h(IBM,)150 4309 y(Microsoft,)f
(Mitsubishi,)f(Siemens)g(Corporation,)h(Sun)g(Microsystems,)e(and)i
(Xerox.)150 4376 y(Anderson)19 b(and)f(Culler)h(were)g(also)f
(supported)h(by)g(National)f(Science)h(Foundation)150
4442 y(Presidential)11 b(Faculty)f(Fellowships,)g(and)g(Rodrigues)g(by)
h(a)f(National)g(Science)g(Foun-)150 4508 y(dation)j(Graduate)g
(Fellowship.)19 b(The)12 b(authors)h(can)f(be)h(contacted)g(at)g
Fw(f)p Fv(steverod,)150 4575 y(tea,)34 b(culler)p Fw(g)p
Fv(@cs.berkeley.edu)p Fx(.)2137 1433 y FA(1)120 b(Intr)n(oduction)2137
1665 y Fz(The)41 b(development)d(and)i(deployment)e(of)i(high)g(perfor)
n(-)2137 1764 y(mance)21 b(local-area)f(networks)h(such)g(as)h(A)-9
b(TM)21 b([de)g(Prycker)2137 1864 y(1993],)49 b(Myrinet)44
b([Seitz)g(1994],)49 b(and)44 b(switched)g(high-)2137
1964 y(speed)27 b(Ethernet)f(has)i(the)f(potential)f(to)i(dramatically)
e(im-)2137 2063 y(prove)31 b(communication)e(performance)g(for)i
(network)g(ap-)2137 2163 y(plications.)39 b(These)24
b(networks)g(are)g(capable)g(of)g(microsec-)2137 2262
y(ond)14 b(latencies)g(and)f(bandwidths)g(of)g(hundreds)f(of)i
(megabits)2137 2362 y(per)24 b(second;)g(their)g(switched)f(fabrics)g
(eliminate)h(the)f(con-)2137 2462 y(tention)33 b(seen)g(on)g
(shared-bus)e(networks)h(such)h(as)h(tradi-)2137 2561
y(tional)25 b(Ethernet.)41 b(Unfortunately)-5 b(,)23
b(this)j(raw)f(network)f(ca-)2137 2661 y(pacity)h(goes)h(unused,)f(due)
g(to)g(current)f(network)g(commu-)2137 2761 y(nication)c(software.)2221
2885 y(Most)42 b(of)g(these)h(networks)e(run)h(the)g(TCP/IP)h(proto-)
2137 2984 y(col)23 b(suite)h([Postel)f(1981b,)e(Postel)i(1981c,)e
(Postel)j(1981a].)2137 3084 y(TCP/IP)h(is)g(the)e(default)g(protocol)f
(suite)i(for)g(Internet)e(traf-)2137 3184 y(\256c,)28
b(and)d(provides)f(inter)n(-operability)f(among)h(a)i(wide)g(va-)2137
3283 y(riety)h(of)f(computing)e(platforms)h(and)h(network)f(technolo-)
2137 3383 y(gies.)53 b(The)29 b(TCP)g(protocol)e(provides)g(the)i
(abstraction)f(of)2137 3483 y(a)j(reliable,)h(ordered)d(byte)g(stream.)
57 b(The)30 b(UDP)h(protocol)2137 3582 y(provides)c(an)h(unreliable,)g
(unordered)d(datagram)h(service.)2137 3682 y(Many)j(other)g
(application-level)e(protocols)h(\(such)h(as)i(the)2137
3781 y(FTP)21 b(\256le)g(transfer)e(protocol,)f(the)i(Sun)g(Network)f
(File)h(Sys-)2137 3881 y(tem,)h(and)f(the)h(X)g(W)m(indow)f(System\))g
(are)h(built)f(upon)f(these)2137 3981 y(two)i(basic)f(protocols.)2221
4105 y(TCP/IP')-5 b(s)28 b(observed)d(performance)g(has)i(not)g(scaled)
g(to)2137 4204 y(the)36 b(ability)g(of)g(modern)e(network)g(hardware,)k
(however)-5 b(.)2137 4304 y(While)29 b(TCP)g(is)f(capable)f(of)h
(sustained)f(bandwidth)f(close)2137 4404 y(to)35 b(the)f(rated)g
(maximum)f(of)h(modern)e(networks,)37 b(actual)2137 4503
y(bandwidth)26 b(is)j(very)e(much)g(implementation-dependent.)2137
4603 y(The)14 b(round-trip)c(latency)j(of)g(commercial)f(TCP)i
(implemen-)2137 4703 y(tations)28 b(is)h(hundreds)d(of)i(microseconds)e
(higher)g(than)i(the)2137 4802 y(minimum)f(possible)g(on)h(these)g
(networks.)49 b(Implementa-)2137 4902 y(tions)15 b(of)f(the)h(simpler)f
(UDP)h(protocol,)f(which)g(lack)g(the)h(reli-)2137 5001
y(ability)20 b(and)f(ordering)e(mechanisms)i(of)g(TCP)-9
b(,)21 b(perform)c(lit-)2137 5101 y(tle)23 b(better)e([Keeton)g(et)h
(al.)32 b(1995,)20 b(Kay)i(&)g(Pasquale)f(1993,)2137
5201 y(von)28 b(Eicken)f(et)i(al.)52 b(1995].)e(This)28
b(poor)f(performance)f(is)2137 5300 y(due)21 b(to)h(the)f(high)g(per)n
(-packet)e(processing)h(costs)i(\()p Fy(pr)m(ocess-)2137
5400 y(ing)33 b(over)o(head)r Fz(\))c(of)j(the)h(protocol)d
(implementations.)62 b(In)p eop
%%Page: 2 2
2 1 bop 0 83 a Fz(local-area)16 b(environments,)g(where)h(on-the-wire)e
(times)j(are)0 183 y(small,)28 b(these)f(processing)e(costs)i(dominate)
e(small-packet)0 282 y(round-trip)17 b(latencies.)83
394 y(Local-area)h(traf)o(\256c)h(patterns)f(exacerbate)g(the)h
(problems)0 494 y(posed)37 b(by)h(high)f(processing)g(costs.)80
b(Most)39 b(LAN)f(traf-)0 593 y(\256c)g(consists)f(of)g(small)h
(packets)e([Kleinrock)g(&)h(Naylor)0 693 y(1974,)24 b(Schoch)g(&)i
(Hupp)f(1980,)f(Feldmeier)h(1986,)e(Amer)0 793 y(et)32
b(al.)62 b(1987,)30 b(Cheriton)h(&)h(W)m(illiamson)f(1987,)f(Gusella)0
892 y(1990,)39 b(Caceres)h(et)h(al.)87 b(1991,)39 b(Claf)o(fy)g(et)i
(al.)87 b(1992].)0 992 y(Small)27 b(packets)f(are)h(the)f(rule)h(even)f
(in)h(applications)e(con-)0 1092 y(sidered)c(bandwidth-intensive:)28
b(95\045)22 b(of)f(all)i(packets)e(in)i(a)0 1191 y(NFS)i(trace)g
(performed)d(at)j(the)g(Berkeley)e(Computer)h(Sci-)0
1291 y(ence)19 b(Division)g(carried)g(less)h(than)g(192)e(bytes)i(of)f
(user)g(data)0 1390 y([Dahlin)e(et)i(al.)27 b(1994];)17
b(the)h(mean)g(packet)g(size)h(in)f(the)g(trace)0 1490
y(was)24 b(382)e(bytes.)35 b(Processing)23 b(overhead)e(is)j(the)f
(dominant)0 1590 y(transport)13 b(cost)i(for)e(packets)h(this)h(small,)
h(limiting)d(NFS)i(per)n(-)0 1689 y(formance)21 b(on)i(a)g
(high-bandwidth)d(network.)34 b(This)23 b(is)h(true)0
1789 y(for)i(other)g(applications:)38 b(most)27 b(application-level)d
(proto-)0 1889 y(cols)18 b(in)f(local-area)f(use)i(today)e(\(X1)m(1,)h
(NFS,)h(FTP)-9 b(,)17 b(etc.\))26 b(op-)0 1988 y(erate)c(in)g(a)g
Fy(r)m(equest-r)m(esponse)p Fz(,)f(or)h Fy(client-server)p
Fz(,)g(manner:)0 2088 y(a)k(client)g(machine)e(sends)i(a)g(small)g
(request)f(message)h(to)g(a)0 2187 y(server)m(,)d(and)g(awaits)h(a)g
(response)f(from)f(the)h(server)-5 b(.)37 b(In)23 b(the)0
2287 y(request-response)16 b(model,)i(processing)f(overhead)g(usually)0
2387 y(cannot)12 b(be)i(hidden)e(through)f(packet)h(pipelining)g(or)h
(through)0 2486 y(overlapping)27 b(communication)f(and)k(computation,)f
(mak-)0 2586 y(ing)17 b(round-trip)e(latency)i(a)h(critical)g(factor)f
(in)h(protocol)d(per)n(-)0 2686 y(formance.)83 2797 y(T)m(raditionally)
-5 b(,)24 b(there)g(are)h(several)g(methods)f(of)h(attack-)0
2897 y(ing)j(the)h(processing)e(overhead)f(problem:)43
b(changing)26 b(the)0 2997 y(application)32 b(programming)e(interface)j
(\(API\),)g(changing)0 3096 y(the)h(underlying)d(network)i(protocol,)i
(changing)d(the)i(im-)0 3196 y(plementation)d(of)h(the)g(protocol,)i
(or)e(some)g(combination)0 3296 y(of)23 b(these)h(approaches.)34
b Fy(Changing)22 b(the)h(API)i Fz(modi\256es)e(the)0
3395 y(code)g(used)g(by)g(applications)f(to)i(access)g(communications)0
3495 y(functionality)-5 b(.)72 b(While)36 b(this)h(approach)c(may)j
(yield)f(bet-)0 3594 y(ter)30 b(performance)e(for)i(new)g
(applications,)h(legacy)f(appli-)0 3694 y(cations)c(must)g(be)g
(re-implemented)e(to)i(gain)g(any)g(bene\256t.)0 3794
y Fy(Changing)g(the)i(communications)d(pr)m(otocol)i
Fz(changes)g(the)0 3893 y(\252on-the-wire\272)k(format)h(of)h(data)g
(and)g(the)g(actions)g(taken)0 3993 y(during)25 b(a)j(communications)c
(exchange)h(\320)i(for)f(example,)0 4093 y(modifying)13
b(the)j(TCP)h(packet)e(format.)24 b(A)17 b(new)f(or)f(modi\256ed)0
4192 y(protocol)i(may)h(improve)f(communications)f(performance,)0
4292 y(but)21 b(at)g(the)g(price)f(of)h(incompatibility:)26
b(applications)20 b(com-)0 4391 y(municating)k(via)h(the)h(new)f
(protocol)f(are)h(unable)g(to)g(share)0 4491 y(data)19
b(directly)f(with)h(applications)f(using)g(the)h(old)g(protocol.)0
4591 y Fy(Changing)31 b(the)j(pr)m(otocol)e(implementation)g
Fz(rewrites)h(the)0 4690 y(software)14 b(that)h(implements)f(a)h
(particular)e(protocol;)i(packet)0 4790 y(formats)26
b(and)h(protocol)f(actions)h(do)g(not)g(change,)g(but)g(the)0
4890 y(code)20 b(that)g(performs)f(these)h(actions)g(does.)27
b(While)21 b(this)f(ap-)0 4989 y(proach)i(provides)g(full)h
(compatibility)f(with)h(existing)g(pro-)0 5089 y(tocols,)18
b(fundamental)d(limitations)i(of)g(the)h(protocol)e(design)0
5188 y(may)k(limit)g(the)h(performance)c(gain.)83 5300
y(Recent)40 b(systems,)45 b(such)40 b(as)g(Active)g(Messages)g([von)0
5400 y(Eicken)28 b(et)g(al.)52 b(1992],)29 b(Remote)f(Queues)g([Brewer)
g(et)h(al.)1988 83 y(1995],)i(and)f(native)g(U-Net)h([von)e(Eicken)h
(et)h(al.)59 b(1995],)1988 183 y(have)18 b(used)h(the)g(\256rst)h(two)f
(methods;)f(they)h(implement)f(new)1988 282 y(protocols)k(and)i(new)g
(programming)d(interfaces)i(to)h(obtain)1988 382 y(improved)d
(local-area)i(network)g(performance.)35 b(The)24 b(pro-)1988
482 y(tocols)17 b(and)h(interfaces)f(are)h(lightweight)f(and)g(provide)
g(pro-)1988 581 y(gramming)24 b(abstractions)h(that)h(are)g(similar)h
(to)f(the)g(under)n(-)1988 681 y(lying)j(hardware.)56
b(All)31 b(of)f(these)g(systems)h(realize)f(laten-)1988
780 y(cies)19 b(and)g(throughput)d(close)j(to)g(the)g(physical)f
(limits)i(of)f(the)1988 880 y(network.)31 b(However)m(,)21
b(none)h(of)g(them)f(of)o(fer)g(compatibility)1988 980
y(with)f(existing)g(applications.)2071 1088 y(Other)14
b(work)f(has)i(tried)g(to)f(improve)f(performance)f(by)i(re-)1988
1188 y(implementing)22 b(TCP)-9 b(.)26 b(Recent)f(work)f(includes)g
(zero-copy)1988 1288 y(TCP)h(for)f(Solaris)h([Chu)f(1996])f(and)h(a)h
(TCP)h(interface)d(for)1988 1387 y(the)h(U-Net)g(interface)f([von)g
(Eicken)g(et)i(al.)39 b(1995].)e(These)1988 1487 y(implementations)18
b(can)i(inter)n(-operate)e(with)i(other)g(TCP/IP)1988
1587 y(implementations)15 b(and)h(improve)g(throughput)e(and)i(latency)
1988 1686 y(relative)g(to)h(standard)f(TCP/IP)h(stacks.)26
b(Both)17 b(implementa-)1988 1786 y(tions)g(can)f(realize)h(the)g(full)
g(bandwidth)e(of)i(the)g(network)e(for)1988 1885 y(lar)o(ge)e(packets.)
25 b(However)m(,)14 b(both)f(systems)i(have)f(round-trip)1988
1985 y(latencies)20 b(considerably)e(higher)h(than)g(the)i(raw)f
(network.)2071 2094 y(This)32 b(paper)e(presents)i(our)f(solution)g(to)
h(the)g(overhead)1988 2194 y(problem:)52 b(a)34 b(new)g(communications)
d(protocol)h(and)i(im-)1988 2293 y(plementation)19 b(for)h(local-area)g
(networks)g(that)h(exports)g(the)1988 2393 y(Berkeley)g(Sockets)h(API,)
h(uses)f(a)h(low-overhead)c(protocol)1988 2492 y(for)27
b(local-area)h(use,)j(and)d(reverts)g(to)h(standard)e(protocols)1988
2592 y(for)k(wide-area)f(communication.)59 b(The)32 b(Sockets)f(API)i
(is)1988 2692 y(a)24 b(widely)f(used)h(programming)d(interface)i(that)h
(treats)g(net-)1988 2791 y(work)d(connections)g(as)i(\256les;)i
(application)c(programs)f(read)1988 2891 y(and)28 b(write)i(network)d
(connections)h(exactly)g(as)i(they)f(read)1988 2991 y(and)d(write)i
(\256les.)48 b(The)27 b(Fast)h(Sockets)f(protocol)f(has)h(been)1988
3090 y(designed)22 b(and)i(implemented)e(to)j(obtain)e(a)i
(low-overhead)1988 3190 y(data)15 b(transmission/reception)d(path.)25
b(Should)14 b(a)h(Fast)h(Sock-)1988 3289 y(ets)27 b(program)d(attempt)j
(to)f(connect)g(with)h(a)g(program)d(out-)1988 3389 y(side)f(the)f
(local-area)g(network,)g(or)h(to)g(a)g(non-Fast)f(Sockets)1988
3489 y(program,)30 b(the)g(software)g(transparently)e(reverts)i(to)h
(stan-)1988 3588 y(dard)i(TCP/IP)j(sockets.)70 b(These)35
b(features)f(enable)g(high-)1988 3688 y(performance)17
b(communication)h(through)g(relinking)h(exist-)1988 3788
y(ing)g(application)g(programs.)2071 3896 y(Fast)34 b(Sockets)f
(achieves)g(its)h(performance)d(through)g(a)1988 3996
y(number)25 b(of)j(strategies.)49 b(It)28 b(uses)h(a)f(lightweight)e
(protocol)1988 4096 y(and)h(ef)o(\256cient)h(buf)o(fer)f(management)f
(to)j(minimize)e(book-)1988 4195 y(keeping)41 b(costs.)96
b(The)43 b(communication)d(protocol)h(and)1988 4295 y(its)g
(programming)c(interface)i(are)h(integrated)f(to)i(elimi-)1988
4395 y(nate)25 b(module-crossing)d(costs.)42 b(Fast)27
b(Sockets)e(eliminates)1988 4494 y(copies)d(within)g(the)h(protocol)e
(stack)h(by)h(using)f(knowledge)1988 4594 y(of)33 b(packet)g(memory)f
(destinations.)67 b(Additionally)-5 b(,)35 b(Fast)1988
4693 y(Sockets)e(was)h(implemented)e(without)h(modi\256cations)f(to)
1988 4793 y(the)20 b(operating)e(system)i(kernel.)2071
4902 y(A)31 b(major)e(portion)g(of)i(Fast)g(Sockets')f(performance)e
(is)1988 5001 y(due)21 b(to)i Fy(r)m(eceive)f(posting)p
Fz(,)g(a)g(technique)f(of)h(utilizing)g(infor)n(-)1988
5101 y(mation)13 b(from)g(the)g(API)i(about)e(packet)g(destinations)g
(to)h(min-)1988 5201 y(imize)21 b(copies.)29 b(This)22
b(paper)e(describes)h(the)g(use)g(of)g(receive)1988 5300
y(posting)14 b(in)i(a)g(high-performance)11 b(communications)j(stack.)
1988 5400 y(It)25 b(also)g(describes)f(the)h(design)f(and)h
(implementation)e(of)h(a)p eop
%%Page: 3 3
3 2 bop 150 83 a Fz(low-overhead)13 b(protocol)i(for)h(local-area)f
(communication.)233 186 y(The)21 b(rest)h(of)f(the)h(paper)e(is)j(or)o
(ganized)18 b(as)23 b(follows.)30 b(Sec-)150 286 y(tion)42
b(2)h(describes)e(problems)g(of)h(current)g(TCP/IP)h(and)150
385 y(Sockets)19 b(implementations)d(and)j(how)f(these)h(problems)e
(af-)150 485 y(fect)d(communication)c(performance.)22
b(Section)13 b(3)h(describes)150 585 y(how)32 b(the)h(Fast)g(Sockets)f
(design)g(attempts)h(to)f(overcome)150 684 y(these)22
b(problems.)29 b(Section)21 b(4)h(describes)f(the)g(performance)150
784 y(of)j(the)h(resultant)f(system,)h(and)f(section)g(5)h(compares)e
(Fast)150 884 y(Sockets)e(to)g(other)f(attempts)h(to)h(improve)d
(communication)150 983 y(performance.)26 b(Section)21
b(6)f(presents)h(our)f(conclusions)g(and)150 1083 y(directions)f(for)h
(future)f(work)g(in)h(this)h(area.)150 1382 y FA(2)119
b(Pr)n(oblems)30 b(with)h(TCP/IP)150 1574 y Fz(While)d(TCP/IP)g(can)f
(achieve)g(good)f(throughput)e(on)j(cur)n(-)150 1673
y(rently)36 b(deployed)f(networks,)40 b(its)e(round-trip)c(latency)i
(is)150 1773 y(usually)14 b(poor)-5 b(.)24 b(Further)m(,)14
b(observed)e(bandwidth)g(and)i(round-)150 1873 y(trip)33
b(latencies)g(on)f(next-generation)d(network)j(technolo-)150
1972 y(gies)e(such)f(as)h(Myrinet)f(and)g(A)-9 b(TM)29
b(do)g(not)g(begin)g(to)g(ap-)150 2072 y(proach)15 b(the)i(raw)g
(capabilities)f(of)h(these)f(networks)g([Keeton)150 2172
y(et)21 b(al.)29 b(1995].)e(In)20 b(this)i(section,)e(we)h(describe)f
(a)h(number)e(of)150 2271 y(features)c(and)g(problems)g(of)g
(commercial)f(TCP)j(implemen-)150 2371 y(tations,)i(and)g(how)g(these)h
(features)e(af)o(fect)h(communication)150 2470 y(performance.)150
2727 y Fu(2.1)99 b(Built)25 b(for)h(the)f(W)n(ide)g(Ar)n(ea)150
2889 y Fz(TCP/IP)31 b(was)f(originally)e(designed,)j(and)e(is)i
(usually)e(im-)150 2989 y(plemented,)k(for)e(wide-area)g(networks.)60
b(While)32 b(TCP/IP)150 3088 y(is)24 b(usable)f(on)g(a)h(local-area)e
(network,)g(it)i(is)g(not)f(optimized)150 3188 y(for)d(this)h(domain.)
26 b(For)21 b(example,)e(TCP)i(uses)g(an)g(in-packet)150
3288 y(checksum)f(for)h(end-to-end)e(reliability)-5 b(,)21
b(despite)g(the)h(pres-)150 3387 y(ence)30 b(of)h(per)n(-packet)e(CRC')
-5 b(s)33 b(in)e(most)f(modern)f(network)150 3487 y(hardware.)23
b(But)15 b(computing)c(this)k(checksum)d(is)j(expensive,)150
3587 y(creating)29 b(a)h(bottleneck)e(in)i(packet)f(processing.)54
b(IP)31 b(uses)150 3686 y(header)22 b(\256elds)i(such)f(as)h(`T)m
(ime-T)-6 b(o-Live')20 b(which)j(are)g(only)150 3786
y(relevant)17 b(in)h(a)g(wide-area)f(environment.)23
b(IP)18 b(also)g(supports)150 3885 y(internetwork)23
b(routing)h(and)h(in-\257ight)g(packet)f(fragmenta-)150
3985 y(tion)e(and)g(reassembly)-5 b(,)21 b(features)h(which)g(are)g
(not)g(useful)g(in)150 4085 y(a)14 b(local-area)e(environment.)22
b(The)13 b(TCP/IP)h(model)f(assumes)150 4184 y(communication)28
b(between)i(autonomous)e(machines)i(that)150 4284 y(cooperate)24
b(only)i(minimally)-5 b(.)43 b(However)m(,)26 b(machines)f(on)h(a)150
4384 y(local-area)12 b(network)g(frequently)g(share)h(a)h(common)d
(admin-)150 4483 y(istrative)27 b(service,)i(a)f(common)d(\256le)j
(system,)h(and)e(a)h(com-)150 4583 y(mon)f(user)h(base.)50
b(It)29 b(should)e(be)h(possible)f(to)i(extend)e(this)150
4682 y(commonality)20 b(and)i(cooperation)f(into)h(the)h(network)e
(com-)150 4782 y(munication)d(software.)150 5039 y Fu(2.2)99
b(Multiple)25 b(Layers)150 5201 y Fz(Standard)37 b(implementations)f
(of)j(the)f(Sockets)g(interface)150 5300 y(and)29 b(the)g(TCP/IP)h
(protocol)d(suite)j(separate)f(the)g(protocol)150 5400
y(and)22 b(interface)f(stack)h(into)g(multiple)f(layers.)32
b(The)22 b(Sockets)2137 83 y(interface)13 b(is)i(usually)f(the)g
(topmost)f(layer)m(,)h(sitting)g(above)f(the)2137 183
y(protocol.)29 b(The)22 b(protocol)d(layer)i(may)g(contain)g
(sub-layers:)2137 282 y(for)32 b(example,)i(the)e(TCP)i(protocol)c
(code)i(sits)h(above)f(the)2137 382 y(IP)24 b(protocol)d(code.)35
b(Below)23 b(the)g(protocol)e(layer)i(is)h(the)f(in-)2137
482 y(terface)h(layer)m(,)g(which)g(communicates)e(with)j(the)f
(network)2137 581 y(hardware.)54 b(The)29 b(interface)f(layer)h
(usually)g(has)h(two)f(por)n(-)2137 681 y(tions,)18 b(the)f(network)f
(programming)d(interface,)k(which)f(pre-)2137 780 y(pares)24
b(outgoing)e(data)i(packets,)h(and)e(the)i(network)d(device)2137
880 y(driver)m(,)i(which)g(transfers)g(data)g(to)g(and)g(from)g(the)g
(network)2137 980 y(interface)c(card)f(\(NIC\).)2221
1084 y(This)74 b(multi-layer)e(or)o(ganization)f(enables)i(proto-)2137
1183 y(col)38 b(stacks)f(to)g(be)g(built)g(from)f(many)g(combinations)f
(of)2137 1283 y(protocols,)64 b(programming)53 b(interfaces,)64
b(and)56 b(network)2137 1383 y(devices,)46 b(but)40 b(this)h
(\257exibility)f(comes)h(at)g(the)g(price)f(of)2137 1482
y(performance.)97 b(Layer)44 b(transitions)g(can)h(be)f(costly)g(in)
2137 1582 y(time)32 b(and)f(programming)d(ef)o(fort.)59
b(Each)31 b(layer)g(may)g(use)2137 1682 y(a)g(dif)o(ferent)c
(abstraction)i(for)g(data)g(storage)g(and)g(transfer)m(,)2137
1781 y(requiring)g(data)h(transformation)e(at)j(every)e(layer)h(bound-)
2137 1881 y(ary)-5 b(.)100 b(Layering)44 b(also)h(restricts)g
(information)d(transfer)-5 b(.)2137 1980 y(Hidden)45
b(implementation)f(details)i(of)f(each)h(layer)f(can)2137
2080 y(cause)52 b(lar)o(ge,)58 b(unforeseen)49 b(impacts)i(on)g
(performance)2137 2180 y([Clark)31 b(1982,)f(Crowcroft)g(et)h(al.)60
b(1992].)e(Mechanisms)2137 2279 y(have)37 b(been)g(proposed)f(to)h
(overcome)f(these)h(dif)o(\256culties)2137 2379 y([Clark)26
b(&)f(T)-6 b(ennenhouse)23 b(1990],)i(but)h(existing)f(work)f(has)2137
2479 y(focused)e(on)h(message)f(throughput,)f(rather)h(than)g(protocol)
2137 2578 y(latency)g([Abbott)e(&)i(Peterson)f(1993].)30
b(Also,)23 b(the)e(number)2137 2678 y(of)38 b(programming)d(interfaces)
i(and)g(protocols)g(is)i(small:)2137 2777 y(there)53
b(are)g(two)h(programming)49 b(interfaces)k(\(Berkeley)2137
2877 y(Sockets)20 b(and)f(the)h(System)g(V)g(T)m(ransport)e(Layer)h
(Interface\))2137 2977 y(and)50 b(only)g(a)g(few)h(data)f(transfer)f
(protocols)g(\(TCP/IP)2137 3076 y(and)30 b(UDP/IP\))g(in)g(widespread)e
(usage.)55 b(This)30 b(paucity)f(of)2137 3176 y(distinct)22
b(layer)g(combinations)e(means)h(that)h(the)g(generality)2137
3276 y(of)27 b(the)g(multi-layer)e(or)o(ganization)f(is)k(wasted.)47
b(Reducing)2137 3375 y(the)17 b(number)e(of)i(layers)f(traversed)g(in)g
(the)h(communications)2137 3475 y(stack)23 b(should)f(reduce)f(or)i
(eliminate)f(these)h(layering)e(costs)2137 3575 y(for)f(the)g(common)f
(case)h(of)g(data)g(transfer)-5 b(.)2137 3837 y Fu(2.3)100
b(Complicated)25 b(Memory)g(Management)2137 4001 y Fz(Current)30
b(TCP/IP)g(implementations)f(use)h(a)g(complicated)2137
4100 y(memory)f(management)e(mechanism.)55 b(This)30
b(system)g(ex-)2137 4200 y(ists)h(for)e(a)h(number)e(of)h(reasons.)54
b(First,)33 b(a)d(multi-layered)2137 4300 y(protocol)16
b(stack)i(means)f(packet)g(headers)f(are)i(added)e(\(or)h(re-)2137
4399 y(moved\))24 b(as)i(the)f(packet)g(moves)f(downward)g(\(or)g
(upward\))2137 4499 y(through)19 b(the)h(stack.)28 b(This)21
b(should)e(be)i(done)e(easily)i(and)f(ef-)2137 4598 y(\256ciently)-5
b(,)26 b(without)f(excessive)f(copying.)40 b(Second,)26
b(buf)o(fer)2137 4698 y(memory)15 b(inside)h(the)h(operating)d(system)i
(kernel)g(is)h(a)g(scarce)2137 4798 y(resource;)f(it)f(must)g(be)f
(managed)f(in)h(a)h(space-ef)o(\256cient)e(fash-)2137
4897 y(ion.)25 b(This)16 b(is)h(especially)e(true)g(for)g(older)g
(systems)h(with)g(lim-)2137 4997 y(ited)21 b(physical)e(memory)-5
b(.)2221 5101 y(T)f(o)19 b(meet)g(these)h(two)f(requirements,)e
(mechanisms)i(such)2137 5201 y(as)c(the)f(Berkeley)f(Unix)g
Ft(mbuf)h Fz(have)f(been)g(used.)24 b(An)14 b Ft(mbuf)2137
5300 y Fz(can)20 b(directly)f(hold)g(a)h(small)g(amount)f(of)g(data,)h
(and)f Ft(mbufs)2137 5400 y Fz(can)32 b(be)f(chained)g(to)g(manage)g
(lar)o(ger)f(data)h(sets.)62 b(Chain-)p eop
%%Page: 4 4
4 3 bop 0 83 a Fz(ing)20 b(makes)g(adding)f(and)h(removing)e(packet)i
(headers)g(easy)-5 b(.)0 183 y(The)30 b Ft(mbuf)f Fz(abstraction)g(is)i
(not)f(cheap,)h(however:)45 b(15\045)0 282 y(of)22 b(the)h(processing)e
(time)i(for)f(small)h(TCP)g(packets)f(is)i(con-)0 382
y(sumed)13 b(by)g Ft(mbuf)h Fz(management)d([Kay)i(&)h(Pasquale)f
(1993].)0 482 y(Additionally)-5 b(,)20 b(to)h(take)h(advantage)d(of)j
(the)f Ft(mbuf)h Fz(abstrac-)0 581 y(tion,)17 b(user)h(data)f(must)h
(be)f(copied)f(into)i(and)e(out)i(of)f Ft(mbufs)p Fz(,)0
681 y(which)24 b(consumes)f(even)h(more)f(time)i(in)f(the)h(data)f
(transfer)0 780 y(critical)32 b(path.)63 b(This)33 b(copying)d(means)i
(that)h(nearly)e(one-)0 880 y(quarter)18 b(of)h(the)g(small-packet)f
(processing)g(time)h(in)g(a)h(com-)0 980 y(mercial)30
b(TCP/IP)h(stack)g(is)g(spent)g(on)f(memory)f(manage-)0
1079 y(ment)17 b(issues.)27 b(Reducing)17 b(the)h(overhead)d(of)j
(memory)e(man-)0 1179 y(agement)22 b(is)j(therefore)c(critical)j(to)f
(improving)e(communi-)0 1279 y(cations)f(performance.)0
1585 y FA(3)119 b(Fast)29 b(Sockets)h(Design)0 1779 y
Fz(Fast)50 b(Sockets)f(is)h(an)e(implementation)f(of)i(the)g(Sock-)0
1879 y(ets)38 b(API)g(that)g(provides)d(high-performance)e(communi-)0
1978 y(cation)d(and)h(inter)n(-operability)d(with)j(existing)f
(programs.)0 2078 y(It)36 b(yields)f(high-performance)c(communication)h
(through)0 2177 y(a)37 b(low-overhead)e(protocol)g(layered)h(on)g(top)h
(of)g(a)g(low-)0 2277 y(overhead)h(transport)i(mechanism)f(\(Active)h
(Messages\).)0 2377 y(Interoperability)13 b(with)j(existing)f(programs)
f(is)i(obtained)e(by)0 2476 y(supporting)i(most)i(of)f(the)h(Sockets)g
(API)h(and)e(transparently)0 2576 y(using)e(existing)g(protocols)g(for)
g(communication)d(with)k(non-)0 2676 y(Fast)28 b(Sockets)e(programs.)45
b(In)27 b(this)g(section,)h(we)f(describe)0 2775 y(the)16
b(design)f(decisions)g(and)g(consequent)e(trade-of)o(fs)h(of)h(Fast)0
2875 y(Sockets.)0 3138 y Fu(3.1)99 b(Built)25 b(For)g(The)h(Local)f(Ar)
n(ea)0 3303 y Fz(Fast)41 b(Sockets)f(is)h(tar)o(geted)d(at)j
(local-area)d(networks)h(of)0 3403 y(workstations,)30
b(where)e(processing)f(overhead)g(is)j(the)f(pri-)0 3502
y(mary)13 b(limitation)g(on)g(communications)e(performance.)21
b(For)0 3602 y(low-overhead)26 b(access)j(to)g(the)g(network)f(with)h
(a)g(de\256ned,)0 3702 y(portable)14 b(interface,)h(Fast)h(Sockets)f
(uses)h(Active)f(Messages)0 3801 y([von)28 b(Eicken)g(et)i(al.)54
b(1992,)27 b(Martin)i(1994,)e(Culler)i(et)h(al.)0 3901
y(1994,)d(Mainwaring)g(&)h(Culler)h(1995].)50 b(An)28
b Fy(active)h(mes-)0 4000 y(sage)21 b Fz(is)i(a)f(network)e(packet)h
(which)g(contains)g(the)g(name)g(of)0 4100 y(a)d Fy(handler)f(function)
f Fz(and)i(data)f(for)h(that)f(handler)-5 b(.)25 b(When)18
b(an)0 4200 y(active)25 b(message)g(arrives)g(at)h(its)h(destination,)e
(the)h(handler)0 4299 y(is)d(looked)e(up)g(and)h(invoked)e(with)i(the)h
(data)f(carried)f(in)h(the)0 4399 y(message.)k(While)17
b(conceptually)e(similar)i(to)h(a)f(remote)f(pro-)0 4499
y(cedure)26 b(call)i([Birrell)f(&)h(Nelson)f(1984],)g(an)g(active)g
(mes-)0 4598 y(sage)h(is)h(constrained)e(in)h(the)h(amount)e(and)g
(types)h(of)g(data)0 4698 y(that)g(can)g(be)g(carried)f(and)h(passed)g
(to)g(handler)f(functions.)0 4797 y(These)22 b(constraints)f(enable)g
(the)h(structuring)f(of)g(an)h(Active)0 4897 y(Messages)28
b(layer)e(for)h(high)g(performance.)45 b(Also,)29 b(Active)0
4997 y(Messages)22 b(uses)g(protected)e(user)n(-level)h(access)h(to)g
(the)f(net-)0 5096 y(work)c(interface,)g(removing)e(the)j(operating)d
(system)j(kernel)0 5196 y(from)24 b(the)i(critical)f(path.)42
b(Active)26 b(messages)f(are)h(reliable,)0 5296 y(but)20
b(not)g(ordered.)83 5400 y(Using)k(Active)g(Messages)g(as)h(a)f
(network)f(transport)f(in-)1988 83 y(volves)h(a)i(number)d(of)i
(trade-of)o(fs.)37 b(Active)25 b(Messages)f(has)1988
183 y(its)19 b(own)f(`on-the-wire')e(packet)h(format;)i(this)g(makes)f
(a)h(full)1988 282 y(implementation)14 b(of)i(TCP/IP)h(on)f(Active)h
(Messages)f(infea-)1988 382 y(sible,)25 b(as)g(the)g(transmitted)f
(packets)g(will)h(not)f(be)g(compre-)1988 482 y(hensible)d(by)g(other)g
(TCP/IP)h(stacks.)32 b(Instead,)22 b(we)g(elected)1988
581 y(to)30 b(implement)f(our)g(own)h(protocol)e(for)h(local)h(area)g
(com-)1988 681 y(munication,)16 b(and)h(fall)g(back)g(to)h(normal)f
(TCP/IP)h(for)f(wide-)1988 780 y(area)25 b(communication.)39
b(Active)25 b(Messages)h(operates)e(pri-)1988 880 y(marily)i(at)h(user)
n(-level;)j(although)25 b(access)j(to)f(the)g(network)1988
980 y(device)14 b(is)i(granted)e(and)g(revoked)f(by)i(the)g(operating)e
(system)1988 1079 y(kernel,)23 b(data)g(transmission)g(and)g(reception)
g(is)h(performed)1988 1179 y(by)d(user)n(-level)g(code.)31
b(For)22 b(maximum)e(performance,)g(Fast)1988 1279 y(Sockets)k(is)j
(written)d(as)i(a)g(user)n(-level)e(library)-5 b(.)40
b(While)26 b(this)1988 1378 y(or)o(ganization)i(avoids)j(user)n
(-kernel)f(transitions)h(on)g(com-)1988 1478 y(munications)14
b(events)h(\(data)g(transmission)g(and)h(reception\),)1988
1577 y(it)24 b(makes)g(the)g(maintenance)e(of)i(shared)f(and)h(global)f
(state,)1988 1677 y(such)17 b(as)i(the)f(TCP)h(and)f(UDP)g(port)g(name)
f(spaces,)i(dif)o(\256cult.)1988 1777 y(Some)g(global)g(state)h(can)g
(be)f(maintained)f(by)i(simply)f(using)1988 1876 y(existing)f
(facilities.)27 b(For)18 b(example,)g(the)h(port)f(name)g(spaces)1988
1976 y(can)32 b(use)i(the)f(in-kernel)e(name)h(management)f(functions.)
1988 2076 y(Other)19 b(shared)f(or)i(global)e(state)j(can)e(be)g
(maintained)f(by)i(us-)1988 2175 y(ing)27 b(a)i(server)f(process)g(to)g
(store)g(this)h(state,)i(as)e(described)1988 2275 y(in)c([Maeda)f(&)i
(Bershad)f(1993b].)40 b(Finally)-5 b(,)26 b(using)f(Active)1988
2374 y(Messages)j(limits)h(Fast)g(Sockets)e(communication)e(to)k(the)
1988 2474 y(local-area)d(domain.)46 b(Fast)28 b(Sockets)g(supports)e
(wide-area)1988 2574 y(communication)i(by)k(automatically)e(switching)i
(to)g(stan-)1988 2673 y(dard)22 b(network)f(protocols)h(for)h
(non-local)e(addresses.)35 b(It)24 b(is)1988 2773 y(a)k(reasonable)e
(trade-of)o(f,)h(as)i(endpoint)d(processing)g(over)n(-)1988
2873 y(heads)14 b(are)g(generally)f(not)h(the)h(limiting)f(factor)g
(for)g(internet-)1988 2972 y(work)19 b(communication.)2071
3090 y(Active)26 b(Messages)g(does)g(have)g(a)h(number)d(of)i
(bene\256ts,)1988 3190 y(however)-5 b(.)48 b(The)28 b(handler)e
(abstraction)h(is)h(extremely)f(use-)1988 3289 y(ful.)55
b(A)30 b(handler)f(executes)g(upon)f(message)i(reception)e(at)1988
3389 y(the)22 b(destination,)g(analogous)f(to)i(a)h(network)d
(interrupt.)33 b(At)1988 3489 y(this)24 b(time,)g(the)g(protocol)e(can)
i(store)g(packet)f(data)g(for)g(later)1988 3588 y(use,)e(pass)h(the)f
(packet)f(data)h(to)h(the)f(user)g(program,)e(or)i(deal)1988
3688 y(with)f(exceptional)e(conditions.)25 b(Message)20
b(handlers)f(allow)1988 3788 y(for)h(a)i(wide)g(variety)f(of)g(control)
f(operations)g(within)i(a)g(pro-)1988 3887 y(tocol)j(without)g(slowing)
h(down)f(the)h(critical)g(path)g(of)g(data)1988 3987
y(transmission)i(and)h(reception.)53 b(Handler)29 b(ar)o(guments)e(en-)
1988 4086 y(able)20 b(the)g(easy)g(separation)g(of)g(packet)f(data)h
(and)g(metadata:)1988 4186 y(packet)26 b(data)h(\(that)g(is,)j
(application)c(data\))h(is)h(carried)e(as)i(a)1988 4286
y(bulk)d(transfer)g(ar)o(gument,)g(and)h(packet)f(metadata)g(\(proto-)
1988 4385 y(col)f(headers\))g(are)g(carried)g(in)h(the)f(remaining)f
(word-sized)1988 4485 y(ar)o(guments.)48 b(This)29 b(is)g(only)f
(possible)g(if)g(the)g(headers)g(can)1988 4585 y(\256t)e(into)f(the)g
(number)f(of)h(ar)o(gument)e(words)h(provided;)i(for)1988
4684 y(our)c(local-area)g(protocol,)h(the)g(8)g(words)g(supplied)g(by)g
(Ac-)1988 4784 y(tive)d(Messages)g(is)h(suf)o(\256cient.)2071
4902 y(Fast)e(Sockets)f(further)g(optimizes)g(for)f(the)i(local)g(area)
f(by)1988 5001 y(omitting)f(features)h(of)h(TCP/IP)g(unnecessary)e(in)i
(that)f(envi-)1988 5101 y(ronment.)35 b(For)24 b(example,)f(Fast)i
(Sockets)f(uses)g(the)g(check-)1988 5201 y(sum)f(or)f(CRC)j(of)e(the)g
(network)f(hardware)f(instead)i(of)g(one)1988 5300 y(in)e(the)g(packet)
g(header;)f(software)h(checksums)f(make)h(little)1988
5400 y(sense)k(when)g(packets)g(are)h(only)e(traversing)h(a)g(single)h
(net-)p eop
%%Page: 5 5
5 4 bop 150 83 a Fz(work.)37 b(Fast)25 b(Sockets)e(has)h(no)g
(equivalent)e(of)h(IP')-5 b(s)25 b(`T)m(ime-)150 183
y(T)-6 b(o-Live')26 b(\256eld,)i(or)f(IP')-5 b(s)28 b(internetwork)d
(routing)h(support.)150 282 y(Since)17 b(maximum)f(packet)h(sizes)h
(will)g(not)f(change)f(within)i(a)150 382 y(local)i(area)g(network,)e
(Fast)j(Sockets)f(does)g(not)f(support)g(IP-)150 482
y(style)i(in-\257ight)e(packet)g(fragmentation.)150 764
y Fu(3.2)99 b(Collapsing)24 b(Layers)150 936 y Fz(T)-6
b(o)30 b(avoid)f(the)g(performance)e(and)i(structuring)f(problems)150
1035 y(created)21 b(by)h(the)f(multi-layered)f(implementation)g(of)h
(Unix)150 1135 y(TCP/IP)-9 b(,)24 b(Fast)g(Sockets)g(collapses)f(the)h
(API)g(and)f(protocol)150 1235 y(layers)33 b(of)h(the)f(communications)
e(stack)j(together)-5 b(.)66 b(This)150 1334 y(avoids)13
b(abstraction)f(con\257icts)h(between)g(the)h(programming)150
1434 y(interface)33 b(and)h(the)h(protocol)e(and)h(reduces)f(the)i
(number)150 1533 y(of)19 b(conversions)e(between)i(layer)f
(abstractions,)h(further)e(re-)150 1633 y(ducing)i(processing)g
(overheads.)233 1741 y(The)26 b(actual)f(network)g(device)g(interface,)
h(Active)g(Mes-)150 1841 y(sages,)42 b(remains)c(a)g(distinct)g(layer)f
(from)g(Fast)h(Sockets.)150 1940 y(This)14 b(facilitates)h(the)f
(portability)e(of)i(Fast)h(Sockets)f(between)150 2040
y(dif)o(ferent)33 b(operating)h(systems)i(and)f(network)f(hardware.)150
2140 y(Active)f(Messages)g(implementations)e(are)i(available)f(for)150
2239 y(the)27 b(Intel)g(Paragon)e([Liu)i(&)g(Culler)g(1995],)f(FDDI)i
([Mar)n(-)150 2339 y(tin)21 b(1994],)f(Myrinet)g([Mainwaring)f(&)j
(Culler)f(1995],)f(and)150 2438 y(A)-9 b(TM)29 b([von)e(Eicken)h(et)h
(al.)53 b(1995].)e(Layering)27 b(costs)i(are)150 2538
y(kept)17 b(low)h(because)f(Active)g(Messages)h(is)g(a)g(thin)g(layer)m
(,)f(and)150 2638 y(all)d(of)f(its)i(implementation-dependent)8
b(constants)13 b(\(such)f(as)150 2737 y(maximum)18 b(packet)i(size\))g
(are)h(exposed)d(to)j(higher)e(layers.)233 2845 y(The)14
b(Fast)h(Sockets)f(layer)f(stays)i(lightweight)e(by)g(exploit-)150
2945 y(ing)21 b(Active)f(Message)h(handlers.)28 b(Handlers)20
b(allow)h(rarely-)150 3045 y(used)g(functionality)-5
b(,)18 b(such)j(as)g(connection)e(establishment,)150
3144 y(to)k(be)g(implemented)e(without)h(af)o(fecting)f(the)i(critical)
g(path)150 3244 y(of)f(data)h(transmission)f(and)g(reception.)32
b(There)22 b(is)i(no)e(need)150 3343 y(to)17 b(test)h(for)e(uncommon)e
(events)j(when)f(a)i(packet)e(arrives)g(\320)150 3443
y(this)24 b(is)h(encoded)e(directly)g(in)h(the)g(handler)-5
b(.)37 b(Unusual)23 b(data)150 3543 y(transmission)32
b(events,)j(such)d(as)h Fy(out-of-band)c Fz(data,)35
b(also)150 3642 y(use)25 b(their)f(own)g(handlers)f(to)h(keep)g(normal)
f(transfer)g(costs)150 3742 y(low)-5 b(.)233 3850 y(Reducing)21
b(the)h(number)e(of)i(layers)f(and)h(exploiting)e(Ac-)150
3950 y(tive)i(Message)g(handlers)f(lowers)h(the)g(protocol-)e(and)h
(API-)150 4049 y(speci\256c)32 b(costs)g(of)g(communication.)59
b(While)32 b(collapsing)150 4149 y(layers)18 b(means)g(that)h(every)e
(protocol)f(layer)n(\261API)i(combina-)150 4248 y(tion)i(has)g(to)h(be)
f(written)f(anew)-5 b(,)20 b(the)g(number)e(of)i(such)g(com-)150
4348 y(binations)f(is)h(relatively)f(few)-5 b(,)19 b(and)g(the)g
(number)f(of)h(distinct)150 4448 y(operations)g(required)f(for)i(each)f
(API)i(is)g(small.)150 4731 y Fu(3.3)99 b(Simple)25 b(Buffer)i
(Management)150 4902 y Fz(Fast)i(Sockets)e(avoids)h(the)f(complexities)
g(of)h Ft(mbuf)p Fz(-style)150 5001 y(memory)f(management)g(by)h(using)
g(a)i(single,)g(contiguous)150 5101 y(virtual)21 b(memory)e(buf)o(fer)h
(for)g(each)h(socket.)30 b(Data)22 b(is)g(trans-)150
5201 y(ferred)33 b(directly)h(into)h(this)g(buf)o(fer)e(via)h(Active)h
(Message)150 5300 y(data)25 b(transfer)f(messages.)41
b(The)25 b(message)g(handler)e(places)150 5400 y(data)g(sequentially)g
(into)g(the)g(buf)o(fer)f(to)h(maintain)g(in-order)2165
867 y @beginspecial 0 @llx 0 @lly 205 @urx 104 @ury 2050
@rwi @setspecial
%%BeginDocument: fs-xfer.eps
%Magnification: 1.00
/MyAppDict 100 dict dup begin def
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-1.0 103.0 translate
1 -1 scale
.9 .9 scale % to make patterns same scale as in xfig

% This junk string is used by the show operators
/PATsstr 1 string def
/PATawidthshow { 	% cx cy cchar rx ry string
  % Loop over each character in the string
  {  % cx cy cchar rx ry char
    % Show the character
    dup				% cx cy cchar rx ry char char
    PATsstr dup 0 4 -1 roll put	% cx cy cchar rx ry char (char)
    false charpath		% cx cy cchar rx ry char
    /clip load PATdraw
    % Move past the character (charpath modified the
    % current point)
    currentpoint			% cx cy cchar rx ry char x y
    newpath
    moveto			% cx cy cchar rx ry char
    % Reposition by cx,cy if the character in the string is cchar
    3 index eq {			% cx cy cchar rx ry
      4 index 4 index rmoveto
    } if
    % Reposition all characters by rx ry
    2 copy rmoveto		% cx cy cchar rx ry
  } forall
  pop pop pop pop pop		% -
  currentpoint
  newpath
  moveto
} bind def
/PATcg {
  7 dict dup begin
    /lw currentlinewidth def
    /lc currentlinecap def
    /lj currentlinejoin def
    /ml currentmiterlimit def
    /ds [ currentdash ] def
    /cc [ currentrgbcolor ] def
    /cm matrix currentmatrix def
  end
} bind def
% PATdraw - calculates the boundaries of the object and
% fills it with the current pattern
/PATdraw {			% proc
  save exch
    PATpcalc			% proc nw nh px py
    5 -1 roll exec		% nw nh px py
    newpath
    PATfill			% -
  restore
} bind def
% PATfill - performs the tiling for the shape
/PATfill { % nw nh px py PATfill -
  PATDict /CurrentPattern get dup begin
    setfont
    % Set the coordinate system to Pattern Space
    PatternGState PATsg
    % Set the color for uncolored pattezns
    PaintType 2 eq { PATDict /PColor get PATsc } if
    % Create the string for showing
    3 index string		% nw nh px py str
    % Loop for each of the pattern sources
    0 1 Multi 1 sub {		% nw nh px py str source
	% Move to the starting location
	3 index 3 index		% nw nh px py str source px py
	moveto			% nw nh px py str source
	% For multiple sources, set the appropriate color
	Multi 1 ne { dup PC exch get PATsc } if
	% Set the appropriate string for the source
	0 1 7 index 1 sub { 2 index exch 2 index put } for pop
	% Loop over the number of vertical cells
	3 index 		% nw nh px py str nh
	{			% nw nh px py str
	  currentpoint		% nw nh px py str cx cy
	  2 index show		% nw nh px py str cx cy
	  YStep add moveto	% nw nh px py str
	} repeat		% nw nh px py str
    } for
    5 { pop } repeat
  end
} bind def

% PATkshow - kshow with the current pattezn
/PATkshow {			% proc string
  exch bind			% string proc
  1 index 0 get			% string proc char
  % Loop over all but the last character in the string
  0 1 4 index length 2 sub {
				% string proc char idx
    % Find the n+1th character in the string
    3 index exch 1 add get	% string proe char char+1
    exch 2 copy			% strinq proc char+1 char char+1 char
    % Now show the nth character
    PATsstr dup 0 4 -1 roll put	% string proc chr+1 chr chr+1 (chr)
    false charpath		% string proc char+1 char char+1
    /clip load PATdraw
    % Move past the character (charpath modified the current point)
    currentpoint newpath moveto
    % Execute the user proc (should consume char and char+1)
    mark 3 1 roll		% string proc char+1 mark char char+1
    4 index exec		% string proc char+1 mark...
    cleartomark			% string proc char+1
  } for
  % Now display the last character
  PATsstr dup 0 4 -1 roll put	% string proc (char+1)
  false charpath		% string proc
  /clip load PATdraw
  neewath
  pop pop			% -
} bind def
% PATmp - the makepattern equivalent
/PATmp {			% patdict patmtx PATmp patinstance
  exch dup length 7 add		% We will add 6 new entries plus 1 FID
  dict copy			% Create a new dictionary
  begin
    % Matrix to install when painting the pattern
    TilingType PATtcalc
    /PatternGState PATcg def
    PatternGState /cm 3 -1 roll put
    % Check for multi pattern sources (Level 1 fast color patterns)
    currentdict /Multi known not { /Multi 1 def } if
    % Font dictionary definitions
    /FontType 3 def
    % Create a dummy encoding vector
    /Encoding 256 array def
    3 string 0 1 255 {
      Encoding exch dup 3 index cvs cvn put } for pop
    /FontMatrix matrix def
    /FontBBox BBox def
    /BuildChar {
	mark 3 1 roll		% mark dict char
	exch begin
	Multi 1 ne {PaintData exch get}{pop} ifelse  % mark [paintdata]
	  PaintType 2 eq Multi 1 ne or
	  { XStep 0 FontBBox aload pop setcachedevice }
	  { XStep 0 setcharwidth } ifelse
	  currentdict		% mark [paintdata] dict
	  /PaintProc load	% mark [paintdata] dict paintproc
	end
	gsave
	  false PATredef exec true PATredef
	grestore
	cleartomark		% -
    } bind def
    currentdict
  end				% newdict
  /foo exch			% /foo newlict
  definefont			% newfont
} bind def
% PATpcalc - calculates the starting point and width/height
% of the tile fill for the shape
/PATpcalc {	% - PATpcalc nw nh px py
  PATDict /CurrentPattern get begin
    gsave
	% Set up the coordinate system to Pattern Space
	% and lock down pattern
	PatternGState /cm get setmatrix
	BBox aload pop pop pop translate
	% Determine the bounding box of the shape
	pathbbox			% llx lly urx ury
    grestore
    % Determine (nw, nh) the # of cells to paint width and height
    PatHeight div ceiling		% llx lly urx qh
    4 1 roll				% qh llx lly urx
    PatWidth div ceiling		% qh llx lly qw
    4 1 roll				% qw qh llx lly
    PatHeight div floor			% qw qh llx ph
    4 1 roll				% ph qw qh llx
    PatWidth div floor			% ph qw qh pw
    4 1 roll				% pw ph qw qh
    2 index sub cvi abs			% pw ph qs qh-ph
    exch 3 index sub cvi abs exch	% pw ph nw=qw-pw nh=qh-ph
    % Determine the starting point of the pattern fill
    %(px, py)
    4 2 roll				% nw nh pw ph
    PatHeight mul			% nw nh pw py
    exch				% nw nh py pw
    PatWidth mul exch			% nw nh px py
  end
} bind def

% Save the original routines so that we can use them later on
/oldfill	/fill load def
/oldeofill	/eofill load def
/oldstroke	/stroke load def
/oldshow	/show load def
/oldashow	/ashow load def
/oldwidthshow	/widthshow load def
/oldawidthshow	/awidthshow load def
/oldkshow	/kshow load def

% These defs are necessary so that subsequent procs don't bind in
% the originals
/fill	   { oldfill } bind def
/eofill	   { oldeofill } bind def
/stroke	   { oldstroke } bind def
/show	   { oldshow } bind def
/ashow	   { oldashow } bind def
/widthshow { oldwidthshow } bind def
/awidthshow { oldawidthshow } bind def
/kshow 	   { oldkshow } bind def
/PATredef {
  MyAppDict begin
    {
    /fill { /clip load PATdraw newpath } bind def
    /eofill { /eoclip load PATdraw newpath } bind def
    /stroke { PATstroke } bind def
    /show { 0 0 null 0 0 6 -1 roll PATawidthshow } bind def
    /ashow { 0 0 null 6 3 roll PATawidthshow }
    bind def
    /widthshow { 0 0 3 -1 roll PATawidthshow }
    bind def
    /awidthshow { PATawidthshow } bind def
    /kshow { PATkshow } bind def
  } {
    /fill   { oldfill } bind def
    /eofill { oldeofill } bind def
    /stroke { oldstroke } bind def
    /show   { oldshow } bind def
    /ashow  { oldashow } bind def
    /widthshow { oldwidthshow } bind def
    /awidthshow { oldawidthshow } bind def
    /kshow  { oldkshow } bind def
    } ifelse
  end
} bind def
false PATredef
% Conditionally define setcmykcolor if not available
/setcmykcolor where { pop } {
  /setcmykcolor {
    1 sub 4 1 roll
    3 {
	3 index add neg dup 0 lt { pop 0 } if 3 1 roll
    } repeat
    setrgbcolor - pop
  } bind def
} ifelse
/PATsc {		% colorarray
  aload length		% c1 ... cn length
    dup 1 eq { pop setgray } { 3 eq { setrgbcolor } { setcmykcolor
  } ifelse } ifelse
} bind def
/PATsg {		% dict
  begin
    lw setlinewidth
    lc setlinecap
    lj setlinejoin
    ml setmiterlimit
    ds aload pop setdash
    cc aload pop setrgbcolor
    cm setmatrix
  end
} bind def

/PATDict 3 dict def
/PATsp {
  true PATredef
  PATDict begin
    /CurrentPattern exch def
    % If it's an uncolored pattern, save the color
    CurrentPattern /PaintType get 2 eq {
      /PColor exch def
    } if
    /CColor [ currentrgbcolor ] def
  end
} bind def
% PATstroke - stroke with the current pattern
/PATstroke {
  countdictstack
  save
  mark
  {
    currentpoint strokepath moveto
    PATpcalc				% proc nw nh px py
    clip newpath PATfill
    } stopped {
	(*** PATstroke Warning: Path is too complex, stroking
	  with gray) =
    cleartomark
    restore
    countdictstack exch sub dup 0 gt
	{ { end } repeat } { pop } ifelse
    gsave 0.5 setgray oldstroke grestore
  } { pop restore pop } ifelse
  newpath
} bind def
/PATtcalc {		% modmtx tilingtype PATtcalc tilematrix
  % Note: tiling types 2 and 3 are not supported
  gsave
    exch concat					% tilingtype
    matrix currentmatrix exch			% cmtx tilingtype
    % Tiling type 1 and 3: constant spacing
    2 ne {
	% Distort the pattern so that it occupies
	% an integral number of device pixels
	dup 4 get exch dup 5 get exch		% tx ty cmtx
	XStep 0 dtransform
	round exch round exch			% tx ty cmtx dx.x dx.y
	XStep div exch XStep div exch		% tx ty cmtx a b
	0 YStep dtransform
	round exch round exch			% tx ty cmtx a b dy.x dy.y
	YStep div exch YStep div exch		% tx ty cmtx a b c d
	7 -3 roll astore			% { a b c d tx ty }
    } if
  grestore
} bind def
/PATusp {
  false PATredef
  PATDict begin
    CColor PATsc
  end
} bind def

% this is the pattern fill program from the Second edition Reference Manual
% with changes to call the above pattern fill
% left30
11 dict begin
/PaintType 1 def
/PatternType 1 def
/TilingType 1 def
/BBox [0 0 1 1] def
/XStep 1 def
/YStep 1 def
/PatWidth 1 def
/PatHeight 1 def
/Multi 2 def
/PaintData [
  { clippath } bind
  { 32 16 true [ 32 0 0 -16 0 16 ]
	{<c000c000300030000c000c000300030000c000c000300030
	000c000c00030003c000c000300030000c000c0003000300
	00c000c000300030000c000c00030003>}
     imagemask } bind
] def
/PaintProc {
	pop
	exec fill
} def
currentdict
end
/P1 exch def
1.1111 1.1111 scale %restore scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
n 0 792 m 0 0 l 612 0 l 612 792 l cp clip
 0.06000 0.06000 sc
7.500 slw
% Polyline
 [15 50.0] 50.0 sd
n 2100 900 m 3300 900 l gs col-1 s gr  [] 0 sd
% Polyline
n 750 1200 m 1200 1200 l 1200 900 l gs col-1 s gr 
% Polyline
n 2100 900 m 2100 1200 l 2475 1200 l gs col-1 s gr 
% Polyline
n 750 225 m 1050 225 l 1050 450 l 750 450 l cp gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P1 [16 0 0 -8 50.00 15.00] PATmp PATsp ef gr PATusp gs col-1 s gr 
% Polyline
n 2175 225 m 2475 225 l 2475 450 l 2175 450 l cp gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P1 [16 0 0 -8 145.00 15.00] PATmp PATsp ef gr PATusp gs col-1 s gr 
% Polyline
n 2175 600 m 2475 600 l 2475 825 l 2175 825 l cp gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P1 [16 0 0 -8 145.00 40.00] PATmp PATsp ef gr PATusp gs col-1 s gr 
% Polyline
 [66.7] 0 sd
n 2100 525 m 3300 525 l gs col-1 s gr  [] 0 sd
% Polyline
 [66.7] 0 sd
n 75 525 m 1200 525 l gs col-1 s gr  [] 0 sd
60.000 slw
% Polyline
n 975 1200 m 975 1650 l gs col-1 s gr 
% Polyline
n 75 1650 m 3300 1650 l 3375 1650 l gs col-1 s gr 
% Polyline
n 2250 1650 m 2250 1200 l gs col-1 s gr 
7.500 slw
% Polyline
n 75 0 m 1200 0 l 1200 900 l 75 900 l cp gs col-1 s gr 
% Polyline
 [15 50.0] 50.0 sd
n 75 900 m 1200 900 l gs col-1 s gr  [] 0 sd
% Polyline
n 3300 0 m 2100 0 l 2100 900 l 3300 900 l cp gs col-1 s gr 
/Times-Roman ff 150.00 scf sf
150 150 m
gs 1 -1 sc (User Application) col-1 sh gr
% Polyline
n 750 1200 m 1200 1200 l 1200 900 l 750 900 l cp gs col-1 s gr 
% Polyline
n 2475 1200 m 2100 1200 l 2100 900 l 2475 900 l cp gs col-1 s gr 
% Interp Spline
gs  clippath
2402 975 m 2405 851 l 2461 962 l 2426 804 l 2367 817 l  cp clip
n 900 450 m
	790.0 947.0 790.0 1172.0 900 1350 curveto
	954.7 1438.4 1120.8 1481.3 1200 1500 curveto
	1412.4 1550.2 1887.6 1550.2 2100 1500 curveto
	2179.2 1481.3 2345.3 1438.4 2400 1350 curveto
	2464.2 1246.2 2464.2 1114.9 2400 825 curveto
 gs col-1 s gr
 gr

% arrowhead
n 2402 975 m 2405 851 l 2461 962 l 2432 969 l 2402 975 l  cp gs 0.00 setgray ef gr  col-1 s
% Interp Spline
gs  clippath
2597 463 m 2499 386 l 2621 408 l 2474 341 l 2449 396 l  cp clip
n 2475 675 m
	2587.5 624.4 2625.0 586.9 2625 525 curveto
	2625.0 463.1 2587.5 425.6 2475 375 curveto
 gs col-1 s gr
 gr

% arrowhead
n 2597 463 m 2499 386 l 2621 408 l 2609 435 l 2597 463 l  cp gs 0.00 setgray ef gr  col-1 s
/Times-Roman ff 150.00 scf sf
900 1125 m
gs 1 -1 sc (NIC) col-1 sh gr
/Times-Roman ff 150.00 scf sf
2175 1125 m
gs 1 -1 sc (NIC) col-1 sh gr
/Times-Italic ff 150.00 scf sf
225 375 m
gs 1 -1 sc (send\(\)) col-1 sh gr
/Times-Roman ff 150.00 scf sf
75 825 m
gs 1 -1 sc (Fast Sockets) col-1 sh gr
/Times-Roman ff 150.00 scf sf
2550 825 m
gs 1 -1 sc (Fast Sockets) col-1 sh gr
/Times-Italic ff 150.00 scf sf
2700 375 m
gs 1 -1 sc (recv\(\)) col-1 sh gr
/Times-Roman ff 150.00 scf sf
2175 150 m
gs 1 -1 sc (User Application) col-1 sh gr
$F2psEnd
rs
end
%%EndDocument
 @endspecial 2137 1049 a(Figure)i(1:)36 b(Data)25 b(transfer)f(in)h
(Fast)g(Sockets.)41 b(A)25 b Ft(send\(\))2137 1149 y
Fz(call)31 b(transmits)e(the)h(data)g(directly)f(from)f(the)i(user)g
(buf)o(fer)2137 1249 y(into)25 b(the)f(network.)37 b(When)25
b(it)g(arrives)e(at)i(the)f(remote)g(des-)2137 1348 y(tination,)19
b(the)h(message)f(handler)f(places)h(it)h(into)f(the)h(socket)2137
1448 y(buf)o(fer)m(,)25 b(and)g(a)h(subsequent)f Ft(recv\(\))g
Fz(call)h(copies)f(it)i(into)2137 1547 y(the)21 b(user)f(buf)o(fer)-5
b(.)2137 1925 y(delivery)16 b(and)g(make)g(data)h(transfer)f(to)h(a)g
(user)g(buf)o(fer)d(a)j(sim-)2137 2024 y(ple)29 b(memory)e(copy)-5
b(.)49 b(The)28 b(ar)o(gument)e(words)i(of)g(the)h(data)2137
2124 y(transfer)19 b(messages)h(carry)f(packet)f(metadata;)i(because)f
(the)2137 2223 y(ar)o(gument)h(words)h(are)h(passed)f(separately)g(to)h
(the)g(handler)m(,)2137 2323 y(there)f(is)h(no)e(need)g(for)h(the)g
(memory)e(management)f(system)2137 2423 y(to)j(strip)f(of)o(f)f(packet)
h(headers.)2221 2544 y(Fast)31 b(Sockets)g(eliminates)f(send)h(buf)o
(fering.)55 b(Because)2137 2644 y(many)30 b(user)g(applications)g(rely)
g(heavily)f(on)i(small)g(pack-)2137 2744 y(ets)17 b(and)e(on)h
(request-response)d(behavior)m(,)h(delaying)g(packet)2137
2843 y(transmission)29 b(only)f(serves)h(to)g(increase)g(user)n
(-visible)f(la-)2137 2943 y(tency)-5 b(.)25 b(Eliminating)16
b(send-side)h(buf)o(fering)d(reduces)i(proto-)2137 3042
y(col)22 b(overhead)d(because)h(there)h(are)g(no)f(copies)h(on)g(the)g
(send)2137 3142 y(side)g(of)f(the)g(protocol)f(path)h(\320)h(Active)f
(Messages)h(already)2137 3242 y(provides)e(reliability)-5
b(.)2221 3363 y(Figure)18 b(1)i(shows)f(Fast)h(Sockets')f(send)g
(mechanism)f(and)2137 3463 y(buf)o(fering)g(techniques.)2221
3585 y(A)j(possible)f(problem)g(with)h(this)g(approach)e(is)j(that)e
(hav-)2137 3684 y(ing)25 b(many)f(Fast)i(Sockets)f(consumes)f
(considerably)e(more)2137 3784 y(memory)14 b(than)h(the)h(global)f
Ft(mbuf)g Fz(pool)g(used)g(in)h(traditional)2137 3884
y(kernel)k(implementations.)27 b(This)21 b(is)h(not)e(a)h(major)f
(concern,)2137 3983 y(for)15 b(two)h(reasons.)25 b(First,)17
b(the)e(memory)f(capacity)h(of)g(current)2137 4083 y(workstations)23
b(is)h(very)e(lar)o(ge;)i(the)g(scarce)f(physical)f(mem-)2137
4182 y(ory)e(situations)h(that)g(the)f(traditional)g(mechanisms)f(are)i
(de-)2137 4282 y(signed)30 b(for)g(is)h(generally)e(not)h(a)h(problem.)
56 b(Second,)32 b(the)2137 4382 y(socket)d(buf)o(fers)e(are)i(located)f
(in)h(pageable)e(virtual)h(mem-)2137 4481 y(ory)17 b(\320)g(if)g
(memory)e(and)i(scheduling)e(pressures)h(are)h(severe)2137
4581 y(enough,)24 b(the)g(buf)o(fer)e(can)i(be)g(paged)f(out.)39
b(Although)22 b(pag-)2137 4681 y(ing)e(out)f(the)g(buf)o(fer)e(will)k
(lead)e(to)h(worse)f(performance,)d(we)2137 4780 y(expect)k(that)g
(this)h(is)g(an)f(extremely)f(rare)h(occurrence.)2221
4902 y(A)14 b(more)e(serious)i(problem)e(with)h(placing)g(socket)g(buf)
o(fers)2137 5001 y(in)27 b(user)g(virtual)f(memory)f(is)i(that)g(it)g
(becomes)f(extremely)2137 5101 y(dif)o(\256cult)18 b(to)g(share)g(the)g
(socket)g(buf)o(fer)e(between)h(processes.)2137 5201
y(Such)23 b(sharing)e(can)h(arise)h(due)f(to)g(a)h Ft(fork\(\))f
Fz(call,)h(for)f(in-)2137 5300 y(stance.)37 b(Currently)-5
b(,)22 b(Fast)j(Sockets)e(cannot)f(be)h(shared)g(be-)2137
5400 y(tween)e(processes)e(\(see)i(section)f(3.7\).)p
eop
%%Page: 6 6
6 5 bop 27 867 a @beginspecial 0 @llx 0 @lly 205 @urx
104 @ury 2050 @rwi @setspecial
%%BeginDocument: fs-xfer-post-2.eps
%Magnification: 1.00
/MyAppDict 100 dict dup begin def
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-1.0 103.0 translate
1 -1 scale
.9 .9 scale % to make patterns same scale as in xfig

% This junk string is used by the show operators
/PATsstr 1 string def
/PATawidthshow { 	% cx cy cchar rx ry string
  % Loop over each character in the string
  {  % cx cy cchar rx ry char
    % Show the character
    dup				% cx cy cchar rx ry char char
    PATsstr dup 0 4 -1 roll put	% cx cy cchar rx ry char (char)
    false charpath		% cx cy cchar rx ry char
    /clip load PATdraw
    % Move past the character (charpath modified the
    % current point)
    currentpoint			% cx cy cchar rx ry char x y
    newpath
    moveto			% cx cy cchar rx ry char
    % Reposition by cx,cy if the character in the string is cchar
    3 index eq {			% cx cy cchar rx ry
      4 index 4 index rmoveto
    } if
    % Reposition all characters by rx ry
    2 copy rmoveto		% cx cy cchar rx ry
  } forall
  pop pop pop pop pop		% -
  currentpoint
  newpath
  moveto
} bind def
/PATcg {
  7 dict dup begin
    /lw currentlinewidth def
    /lc currentlinecap def
    /lj currentlinejoin def
    /ml currentmiterlimit def
    /ds [ currentdash ] def
    /cc [ currentrgbcolor ] def
    /cm matrix currentmatrix def
  end
} bind def
% PATdraw - calculates the boundaries of the object and
% fills it with the current pattern
/PATdraw {			% proc
  save exch
    PATpcalc			% proc nw nh px py
    5 -1 roll exec		% nw nh px py
    newpath
    PATfill			% -
  restore
} bind def
% PATfill - performs the tiling for the shape
/PATfill { % nw nh px py PATfill -
  PATDict /CurrentPattern get dup begin
    setfont
    % Set the coordinate system to Pattern Space
    PatternGState PATsg
    % Set the color for uncolored pattezns
    PaintType 2 eq { PATDict /PColor get PATsc } if
    % Create the string for showing
    3 index string		% nw nh px py str
    % Loop for each of the pattern sources
    0 1 Multi 1 sub {		% nw nh px py str source
	% Move to the starting location
	3 index 3 index		% nw nh px py str source px py
	moveto			% nw nh px py str source
	% For multiple sources, set the appropriate color
	Multi 1 ne { dup PC exch get PATsc } if
	% Set the appropriate string for the source
	0 1 7 index 1 sub { 2 index exch 2 index put } for pop
	% Loop over the number of vertical cells
	3 index 		% nw nh px py str nh
	{			% nw nh px py str
	  currentpoint		% nw nh px py str cx cy
	  2 index show		% nw nh px py str cx cy
	  YStep add moveto	% nw nh px py str
	} repeat		% nw nh px py str
    } for
    5 { pop } repeat
  end
} bind def

% PATkshow - kshow with the current pattezn
/PATkshow {			% proc string
  exch bind			% string proc
  1 index 0 get			% string proc char
  % Loop over all but the last character in the string
  0 1 4 index length 2 sub {
				% string proc char idx
    % Find the n+1th character in the string
    3 index exch 1 add get	% string proe char char+1
    exch 2 copy			% strinq proc char+1 char char+1 char
    % Now show the nth character
    PATsstr dup 0 4 -1 roll put	% string proc chr+1 chr chr+1 (chr)
    false charpath		% string proc char+1 char char+1
    /clip load PATdraw
    % Move past the character (charpath modified the current point)
    currentpoint newpath moveto
    % Execute the user proc (should consume char and char+1)
    mark 3 1 roll		% string proc char+1 mark char char+1
    4 index exec		% string proc char+1 mark...
    cleartomark			% string proc char+1
  } for
  % Now display the last character
  PATsstr dup 0 4 -1 roll put	% string proc (char+1)
  false charpath		% string proc
  /clip load PATdraw
  neewath
  pop pop			% -
} bind def
% PATmp - the makepattern equivalent
/PATmp {			% patdict patmtx PATmp patinstance
  exch dup length 7 add		% We will add 6 new entries plus 1 FID
  dict copy			% Create a new dictionary
  begin
    % Matrix to install when painting the pattern
    TilingType PATtcalc
    /PatternGState PATcg def
    PatternGState /cm 3 -1 roll put
    % Check for multi pattern sources (Level 1 fast color patterns)
    currentdict /Multi known not { /Multi 1 def } if
    % Font dictionary definitions
    /FontType 3 def
    % Create a dummy encoding vector
    /Encoding 256 array def
    3 string 0 1 255 {
      Encoding exch dup 3 index cvs cvn put } for pop
    /FontMatrix matrix def
    /FontBBox BBox def
    /BuildChar {
	mark 3 1 roll		% mark dict char
	exch begin
	Multi 1 ne {PaintData exch get}{pop} ifelse  % mark [paintdata]
	  PaintType 2 eq Multi 1 ne or
	  { XStep 0 FontBBox aload pop setcachedevice }
	  { XStep 0 setcharwidth } ifelse
	  currentdict		% mark [paintdata] dict
	  /PaintProc load	% mark [paintdata] dict paintproc
	end
	gsave
	  false PATredef exec true PATredef
	grestore
	cleartomark		% -
    } bind def
    currentdict
  end				% newdict
  /foo exch			% /foo newlict
  definefont			% newfont
} bind def
% PATpcalc - calculates the starting point and width/height
% of the tile fill for the shape
/PATpcalc {	% - PATpcalc nw nh px py
  PATDict /CurrentPattern get begin
    gsave
	% Set up the coordinate system to Pattern Space
	% and lock down pattern
	PatternGState /cm get setmatrix
	BBox aload pop pop pop translate
	% Determine the bounding box of the shape
	pathbbox			% llx lly urx ury
    grestore
    % Determine (nw, nh) the # of cells to paint width and height
    PatHeight div ceiling		% llx lly urx qh
    4 1 roll				% qh llx lly urx
    PatWidth div ceiling		% qh llx lly qw
    4 1 roll				% qw qh llx lly
    PatHeight div floor			% qw qh llx ph
    4 1 roll				% ph qw qh llx
    PatWidth div floor			% ph qw qh pw
    4 1 roll				% pw ph qw qh
    2 index sub cvi abs			% pw ph qs qh-ph
    exch 3 index sub cvi abs exch	% pw ph nw=qw-pw nh=qh-ph
    % Determine the starting point of the pattern fill
    %(px, py)
    4 2 roll				% nw nh pw ph
    PatHeight mul			% nw nh pw py
    exch				% nw nh py pw
    PatWidth mul exch			% nw nh px py
  end
} bind def

% Save the original routines so that we can use them later on
/oldfill	/fill load def
/oldeofill	/eofill load def
/oldstroke	/stroke load def
/oldshow	/show load def
/oldashow	/ashow load def
/oldwidthshow	/widthshow load def
/oldawidthshow	/awidthshow load def
/oldkshow	/kshow load def

% These defs are necessary so that subsequent procs don't bind in
% the originals
/fill	   { oldfill } bind def
/eofill	   { oldeofill } bind def
/stroke	   { oldstroke } bind def
/show	   { oldshow } bind def
/ashow	   { oldashow } bind def
/widthshow { oldwidthshow } bind def
/awidthshow { oldawidthshow } bind def
/kshow 	   { oldkshow } bind def
/PATredef {
  MyAppDict begin
    {
    /fill { /clip load PATdraw newpath } bind def
    /eofill { /eoclip load PATdraw newpath } bind def
    /stroke { PATstroke } bind def
    /show { 0 0 null 0 0 6 -1 roll PATawidthshow } bind def
    /ashow { 0 0 null 6 3 roll PATawidthshow }
    bind def
    /widthshow { 0 0 3 -1 roll PATawidthshow }
    bind def
    /awidthshow { PATawidthshow } bind def
    /kshow { PATkshow } bind def
  } {
    /fill   { oldfill } bind def
    /eofill { oldeofill } bind def
    /stroke { oldstroke } bind def
    /show   { oldshow } bind def
    /ashow  { oldashow } bind def
    /widthshow { oldwidthshow } bind def
    /awidthshow { oldawidthshow } bind def
    /kshow  { oldkshow } bind def
    } ifelse
  end
} bind def
false PATredef
% Conditionally define setcmykcolor if not available
/setcmykcolor where { pop } {
  /setcmykcolor {
    1 sub 4 1 roll
    3 {
	3 index add neg dup 0 lt { pop 0 } if 3 1 roll
    } repeat
    setrgbcolor - pop
  } bind def
} ifelse
/PATsc {		% colorarray
  aload length		% c1 ... cn length
    dup 1 eq { pop setgray } { 3 eq { setrgbcolor } { setcmykcolor
  } ifelse } ifelse
} bind def
/PATsg {		% dict
  begin
    lw setlinewidth
    lc setlinecap
    lj setlinejoin
    ml setmiterlimit
    ds aload pop setdash
    cc aload pop setrgbcolor
    cm setmatrix
  end
} bind def

/PATDict 3 dict def
/PATsp {
  true PATredef
  PATDict begin
    /CurrentPattern exch def
    % If it's an uncolored pattern, save the color
    CurrentPattern /PaintType get 2 eq {
      /PColor exch def
    } if
    /CColor [ currentrgbcolor ] def
  end
} bind def
% PATstroke - stroke with the current pattern
/PATstroke {
  countdictstack
  save
  mark
  {
    currentpoint strokepath moveto
    PATpcalc				% proc nw nh px py
    clip newpath PATfill
    } stopped {
	(*** PATstroke Warning: Path is too complex, stroking
	  with gray) =
    cleartomark
    restore
    countdictstack exch sub dup 0 gt
	{ { end } repeat } { pop } ifelse
    gsave 0.5 setgray oldstroke grestore
  } { pop restore pop } ifelse
  newpath
} bind def
/PATtcalc {		% modmtx tilingtype PATtcalc tilematrix
  % Note: tiling types 2 and 3 are not supported
  gsave
    exch concat					% tilingtype
    matrix currentmatrix exch			% cmtx tilingtype
    % Tiling type 1 and 3: constant spacing
    2 ne {
	% Distort the pattern so that it occupies
	% an integral number of device pixels
	dup 4 get exch dup 5 get exch		% tx ty cmtx
	XStep 0 dtransform
	round exch round exch			% tx ty cmtx dx.x dx.y
	XStep div exch XStep div exch		% tx ty cmtx a b
	0 YStep dtransform
	round exch round exch			% tx ty cmtx a b dy.x dy.y
	YStep div exch YStep div exch		% tx ty cmtx a b c d
	7 -3 roll astore			% { a b c d tx ty }
    } if
  grestore
} bind def
/PATusp {
  false PATredef
  PATDict begin
    CColor PATsc
  end
} bind def

% this is the pattern fill program from the Second edition Reference Manual
% with changes to call the above pattern fill
% left30
11 dict begin
/PaintType 1 def
/PatternType 1 def
/TilingType 1 def
/BBox [0 0 1 1] def
/XStep 1 def
/YStep 1 def
/PatWidth 1 def
/PatHeight 1 def
/Multi 2 def
/PaintData [
  { clippath } bind
  { 32 16 true [ 32 0 0 -16 0 16 ]
	{<c000c000300030000c000c000300030000c000c000300030
	000c000c00030003c000c000300030000c000c0003000300
	00c000c000300030000c000c00030003>}
     imagemask } bind
] def
/PaintProc {
	pop
	exec fill
} def
currentdict
end
/P1 exch def
1.1111 1.1111 scale %restore scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
n 0 792 m 0 0 l 612 0 l 612 792 l cp clip
 0.06000 0.06000 sc
7.500 slw
% Polyline
n 2175 225 m 2475 225 l 2475 450 l 2175 450 l cp gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P1 [16 0 0 -8 145.00 15.00] PATmp PATsp ef gr PATusp gs col-1 s gr 
60.000 slw
% Polyline
n 975 1200 m 975 1650 l gs col-1 s gr 
% Polyline
n 75 1650 m 3300 1650 l 3375 1650 l gs col-1 s gr 
% Polyline
n 2250 1650 m 2250 1200 l gs col-1 s gr 
7.500 slw
% Polyline
n 2175 600 m 2475 600 l 2475 825 l 2175 825 l cp gs col-1 s gr 
% Polyline
 [15 50.0] 50.0 sd
n 75 525 m 1200 525 l gs col-1 s gr  [] 0 sd
% Polyline
 [15 50.0] 50.0 sd
n 2100 525 m 3300 525 l gs col-1 s gr  [] 0 sd
% Polyline
n 75 0 m 1200 0 l 1200 900 l 75 900 l cp gs col-1 s gr 
% Polyline
n 3300 0 m 2100 0 l 2100 900 l 3300 900 l cp gs col-1 s gr 
% Polyline
n 1200 900 m 750 900 l 750 1200 l 1200 1200 l cp gs col-1 s gr 
% Polyline
n 750 225 m 1050 225 l 1050 450 l 750 450 l cp gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P1 [16 0 0 -8 50.00 15.00] PATmp PATsp ef gr PATusp gs col-1 s gr 
% Polyline
n 2100 900 m 2100 900 l 2100 900 l 2100 900 l cp gs col-1 s gr 
/Times-Roman ff 150.00 scf sf
150 150 m
gs 1 -1 sc (User Application) col-1 sh gr
% Polyline
n 2100 900 m 2550 900 l 2550 1200 l 2100 1200 l cp gs col-1 s gr 
% Interp Spline
gs  clippath
2402 600 m 2405 476 l 2461 587 l 2426 429 l 2367 442 l  cp clip
n 900 450 m
	790.0 947.0 790.0 1172.0 900 1350 curveto
	954.7 1438.4 1120.8 1481.3 1200 1500 curveto
	1412.4 1550.2 1887.6 1550.2 2100 1500 curveto
	2179.2 1481.3 2345.3 1438.4 2400 1350 curveto
	2510.0 1172.0 2510.0 947.0 2400 450 curveto
 gs col-1 s gr
 gr

% arrowhead
n 2402 600 m 2405 476 l 2461 587 l 2432 594 l 2402 600 l  cp gs 0.00 setgray ef gr  col-1 s
/Times-Roman ff 150.00 scf sf
900 1125 m
gs 1 -1 sc (NIC) col-1 sh gr
/Times-Roman ff 150.00 scf sf
2175 1125 m
gs 1 -1 sc (NIC) col-1 sh gr
/Times-Italic ff 150.00 scf sf
225 375 m
gs 1 -1 sc (send\(\)) col-1 sh gr
/Times-Roman ff 150.00 scf sf
75 825 m
gs 1 -1 sc (Fast Sockets) col-1 sh gr
/Times-Roman ff 150.00 scf sf
2550 825 m
gs 1 -1 sc (Fast Sockets) col-1 sh gr
/Times-Italic ff 150.00 scf sf
2700 375 m
gs 1 -1 sc (recv\(\)) col-1 sh gr
/Times-Roman ff 150.00 scf sf
2175 150 m
gs 1 -1 sc (User Application) col-1 sh gr
$F2psEnd
rs
end
%%EndDocument
 @endspecial 0 1049 a Fz(Figure)37 b(2:)62 b(Data)38
b(transfer)f(via)h(receive)f(posting.)78 b(If)38 b(a)0
1149 y Ft(recv\(\))25 b Fz(call)h(is)g(issued)g(prior)e(to)i(the)f
(arrival)g(of)g(the)g(de-)0 1249 y(sired)c(data,)f(the)h(message)f
(handler)f(can)h(directly)g(route)g(the)0 1348 y(data)g(into)g(the)g
(user)g(buf)o(fer)m(,)e(bypassing)h(the)h(socket)g(buf)o(fer)-5
b(.)0 1708 y Fu(3.4)99 b(Copy)25 b(A)-7 b(voidance)0
1873 y Fz(The)30 b(standard)f(Fast)i(Sockets)g(data)f(transfer)f
(mechanism)0 1972 y(involves)22 b(two)i(copies)f(along)f(the)i(receive)
e(path,)i(from)e(the)0 2072 y(network)e(interface)h(to)h(the)g(socket)f
(buf)o(fer)m(,)f(and)h(then)g(from)0 2172 y(the)38 b(socket)f(buf)o
(fer)f(to)i(the)g(user)f(buf)o(fer)f(speci\256ed)i(in)g(a)0
2271 y Ft(recv\(\))25 b Fz(call.)45 b(While)26 b(the)g(copy)f(from)g
(the)h(network)e(in-)0 2371 y(terface)d(cannot)g(be)g(avoided,)f(the)i
(second)f(copy)f(increases)0 2471 y(the)31 b(processing)e(overhead)g
(of)h(a)h(data)g(packet,)h(and)e(con-)0 2570 y(sequently)-5
b(,)26 b(round-trip)d(latencies.)44 b(A)27 b(high-performance)0
2670 y(communications)12 b(layer)h(should)g(bypass)h(this)h(second)e
(copy)0 2769 y(whenever)18 b(possible.)83 2874 y(It)f(is)i(possible,)e
(under)f(certain)g(circumstances,)h(to)g(avoid)0 2974
y(the)22 b(copy)f(through)e(the)j(socket)g(buf)o(fer)-5
b(.)30 b(If)22 b(the)g(data')-5 b(s)22 b(\256nal)0 3073
y(memory)15 b(destination)h(is)i(already)e(known)f(upon)h(packet)g(ar)n
(-)0 3173 y(rival)e(\(through)d(a)k Ft(recv\(\))f Fz(call\),)h(the)f
(data)g(can)g(be)g(directly)0 3273 y(copied)22 b(there.)36
b(W)-7 b(e)25 b(call)f(this)g(technique)e Fy(r)m(eceive)h(posting)p
Fz(.)0 3372 y(Figure)g(2)g(shows)g(how)g(receive)f(posting)g(operates)h
(in)g(Fast)0 3472 y(Sockets.)52 b(If)29 b(the)g(message)f(handler)g
(determines)f(that)i(an)0 3571 y(incoming)18 b(packet)h(will)h(satisfy)
g(an)g(outstanding)e Ft(recv\(\))0 3671 y Fz(call,)31
b(the)e(packet')-5 b(s)28 b(contents)g(are)g(received)g(directly)f
(into)0 3771 y(the)20 b(user)g(buf)o(fer)-5 b(.)25 b(The)20
b(socket)g(buf)o(fer)e(is)j(never)f(touched.)83 3875
y(Receive)c(posting)f(in)h(Fast)h(Sockets)f(is)h(possible)f(because)0
3975 y(of)i(the)g(integration)f(of)g(the)i(API)f(and)g(the)g(protocol,)
e(and)i(the)0 4074 y(handler)k(facilities)j(of)f(Active)f(Messages.)39
b(Protocol\261API)0 4174 y(integration)30 b(allows)h(knowledge)f(of)h
(the)g(user)s(')-5 b(s)32 b(destina-)0 4274 y(tion)24
b(buf)o(fer)e(to)j(be)f(passed)g(down)g(to)g(the)g(packet)g(process-)0
4373 y(ing)c(code.)26 b(Using)20 b(Active)f(Message)h(handlers)f(means)
h(that)0 4473 y(the)25 b(Fast)h(Sockets)f(code)g(can)g(decide)f(where)h
(to)g(place)g(the)0 4573 y(incoming)18 b(data)i(when)g(it)h(arrives.)0
4837 y Fu(3.5)99 b(Design)25 b(Issues)f(In)h(Receive)h(Posting)0
5001 y Fz(Many)14 b(high-performance)c(communications)i(systems)j(are)0
5101 y(now)g(using)h Fy(sender)n(-based)e(memory)i(management)q
Fz(,)e(where)0 5201 y(the)34 b(sending)e(node)h(determines)g(the)h
(data')-5 b(s)34 b(\256nal)g(mem-)0 5300 y(ory)d(destination.)61
b(Examples)31 b(of)g(communications)e(lay-)0 5400 y(ers)24
b(with)g(this)h(memory)d(management)g(style)i(are)g(Hamlyn)1988
83 y([Buzzard)g(et)i(al.)45 b(1996])24 b(and)h(the)h(SHRIMP)g(network)f
(in-)1988 183 y(terface)f([Blumrich)f(et)i(al.)41 b(1994].)e(Also,)26
b(the)f(initial)g(ver)n(-)1988 282 y(sion)20 b(of)h(Generic)f(Active)g
(Messages)i([Culler)e(et)h(al.)29 b(1994])1988 382 y(of)o(fered)d(only)
i(sender)n(-based)f(memory)h(management)e(for)1988 482
y(data)20 b(transfer)-5 b(.)2071 593 y(Sender)n(-based)35
b(memory)i(management)e(has)j(a)g(major)1988 693 y(drawback)14
b(for)h(use)h(in)g(byte-stream)e(and)h(message-passing)1988
793 y(APIs)31 b(such)f(as)i(Sockets.)58 b(W)m(ith)31
b(sender)n(-based)e(manage-)1988 892 y(ment,)22 b(the)g(sending)f(and)g
(receiving)g(endpoints)g(must)h(syn-)1988 992 y(chronize)d(and)h(agree)
g(on)g(the)g(destination)g(of)g(each)h(packet.)1988 1092
y(This)c(synchronization)d(usually)j(takes)h(the)f(form)g(of)g(a)h
(mes-)1988 1191 y(sage)40 b(exchange,)j(which)c(imposes)h(a)h(time)f
(cost)h(and)e(a)1988 1291 y(resource)32 b(cost)j(\(the)f(message)g
(exchange)e(uses)j(network)1988 1390 y(bandwidth\).)45
b(T)-6 b(o)27 b(minimize)f(this)i(synchronization)23
b(cost,)1988 1490 y(the)k(original)g(version)g(of)g(Fast)i(Sockets)f
(used)f(the)h(socket)1988 1590 y(buf)o(fer)19 b(as)j(a)g(default)e
(destination.)29 b(This)22 b(meant)f(that)g(when)1988
1689 y(a)k Ft(recv\(\))g Fz(call)h(was)g(made,)g(data)f(already)f(in)i
(\257ight)f(had)1988 1789 y(to)d(be)h(directed)f(through)f(the)h
(socket)h(buf)o(fer)m(,)e(as)i(shown)f(in)1988 1889 y(Figure)j(1.)47
b(These)26 b(synchronization)e(costs)j(lowered)f(Fast)1988
1988 y(Sockets')c(throughput)f(relative)i(to)g(Active)h(Messages')f(on)
1988 2088 y(systems)f(where)f(the)g(network)f(was)j(not)e(a)h(limiting)
f(factor)m(,)1988 2187 y(such)e(as)i(the)g(Myrinet)e(network.)2071
2299 y(Generic)13 b(Active)g(Messages)h(1.5)f(introduced)f(a)i(new)g
(data)1988 2399 y(transfer)37 b(message)h(type)f(that)h(did)g(not)g
(require)e(sender)n(-)1988 2499 y(based)22 b(memory)g(management.)34
b(This)24 b(message)f(type,)h(the)1988 2598 y Fy(medium)16
b(message)p Fz(,)i(transferred)e(data)h(into)h(an)f(anonymous)1988
2698 y(region)k(of)h(user)h(memory)e(and)h(then)g(invoked)e(the)j
(handler)1988 2797 y(with)29 b(a)h(pointer)e(to)h(the)h(packet)e(data.)
54 b(The)29 b(handler)f(was)1988 2897 y(responsible)c(for)i(long-term)e
(data)j(storage,)f(as)h(the)g(buf)o(fer)1988 2997 y(was)h(deallocated)f
(upon)f(handler)h(completion.)48 b(Keeping)1988 3096
y(memory)24 b(management)h(on)h(the)g(receiver)g(improves)f(Fast)1988
3196 y(Sockets)h(performance)d(considerably)-5 b(.)44
b(Synchronization)1988 3296 y(is)30 b(now)e(only)h(required)e(between)i
(the)g(API)h(and)e(the)i(pro-)1988 3395 y(tocol)21 b(layers,)h(which)f
(is)i(simple)f(due)g(to)g(their)g(integration.)1988 3495
y(The)16 b(receive)g(handler)f(now)h(determines)g(the)h(memory)e(des-)
1988 3594 y(tination)26 b(of)g(incoming)f(data)i(at)g(packet)f(arrival)
g(time,)i(en-)1988 3694 y(abling)20 b(a)i Ft(recv\(\))f
Fz(of)h(in-\257ight)f(data)g(to)h(bene\256t)f(from)g(re-)1988
3794 y(ceive)26 b(posting)f(and)h(bypass)g(the)g(socket)h(buf)o(fer)-5
b(.)43 b(The)27 b(net)1988 3893 y(result)17 b(is)i(that)e(receiver)n
(-based)f(memory)g(management)f(did)1988 3993 y(not)i(signi\256cantly)f
(af)o(fect)h(Fast)h(Sockets')f(round-trip)e(laten-)1988
4093 y(cies)29 b(and)f(improved)e(lar)o(ge-packet)g(throughput)f
(substan-)1988 4192 y(tially)-5 b(,)21 b(to)g(within)g(10\045)g(of)h
(the)f(throughput)d(of)j(raw)h(Active)1988 4292 y(Messages.)2071
4404 y(The)36 b(use)h(of)g(receiver)n(-based)e(memory)g(management)1988
4503 y(has)20 b(some)h(trade-of)o(fs)d(relative)i(to)h(sender)n(-based)
d(systems.)1988 4603 y(In)h(a)g(true)g(zero-copy)e(transport)h(layer)m
(,)g(where)h(packet)g(data)1988 4703 y(is)30 b(transferred)d(via)i(DMA)
g(to)g(user)g(memory)-5 b(,)29 b(transfer)f(to)1988 4802
y(an)17 b(anonymous)e(region)h(can)h(place)g(an)h(extra)f(copy)f(into)i
(the)1988 4902 y(receive)24 b(path.)40 b(This)25 b(is)h(not)f(a)g
(problem)e(for)h(two)h(reasons.)1988 5001 y(First,)d(many)f(current)g
(I/O)h(architectures,)f(like)h(that)g(on)g(the)1988 5101
y(SP)-8 b(ARC,)25 b(are)f(limited)f(in)h(the)g(memory)e(regions)h(that)
h(they)1988 5201 y(can)15 b(perform)e(DMA)j(operations)d(to.)26
b(Second,)15 b(DMA)g(oper)n(-)1988 5300 y(ations)23 b(usually)f
(require)g(memory)f(pages)i(to)h(be)f(pinned)e(in)1988
5400 y(physical)j(memory)-5 b(,)25 b(and)g(pinning)f(an)h(arbitrary)f
(page)h(can)p eop
%%Page: 7 7
7 6 bop 150 83 a Fz(be)31 b(an)g(expensive)e(operation.)58
b(For)30 b(these)i(reasons,)g(cur)n(-)150 183 y(rent)19
b(versions)f(of)h(Active)g(Messages)h(move)e(data)h(from)f(the)150
282 y(network)e(interface)g(into)h(an)h(anonymous)d(staging)h(area)h
(be-)150 382 y(fore)e(either)h(invoking)e(the)i(message)g(handler)e
(\(for)h(medium)150 482 y(messages\))26 b(or)g(placing)f(the)h(data)g
(in)g(its)h(\256nal)f(destination)150 581 y(\(for)c(standard)g(data)h
(transfer)f(messages\).)36 b(Consequently)-5 b(,)150
681 y(receiver)n(-based)14 b(memory)f(management)h(does)h(not)h(impose)
150 780 y(a)e(lar)o(ge)f(cost)g(in)h(our)f(current)f(system.)25
b(For)13 b(a)h(true)g(zero-copy)150 880 y(system,)28
b(it)g(should)e(be)g(possible)h(for)f(a)h(handler)f(to)h(be)f(re-)150
980 y(sponsible)18 b(for)g(moving)f(data)h(from)g(the)h(network)e
(interface)150 1079 y(card)j(to)g(user)g(memory)-5 b(.)233
1183 y(Based)16 b(on)g(our)e(experiences)h(implementing)e(Fast)k(Sock-)
150 1283 y(ets)42 b(with)g(both)f(sender)n(-)g(and)g(receiver)n(-based)
f(memory)150 1382 y(management)15 b(schemes,)i(we)h(believe)e(that,)i
(for)e(messaging)150 1482 y(layers)23 b(such)f(as)i(Sockets,)f(the)g
(performance)d(increase)i(de-)150 1582 y(livered)i(by)g(receiver)n
(-based)f(management)g(schemes)i(out-)150 1681 y(weigh)20
b(the)g(implementation)e(costs.)150 1941 y Fu(3.6)99
b(Other)26 b(Fast)e(Socket)i(Operations)150 2104 y Fz(Fast)34
b(Sockets)e(supports)g(the)h(full)g(sockets)f(API,)h(includ-)150
2204 y(ing)24 b(socket)f(creation,)h(name)f(management,)f(and)i
(connec-)150 2303 y(tion)g(establishment.)37 b(The)24
b Ft(socket)g Fz(call)g(for)g(the)g(for)f(the)150 2403
y Ft(AF)p 255 2403 25 4 v 30 w(INET)j Fz(address)h(family)f(and)h(the)g
(\252default)f(protocol\272)150 2503 y(creates)20 b(a)g(Fast)h(Socket;)
e(this)h(allows)g(programs)e(to)i(explic-)150 2602 y(itly)27
b(request)f(TCP)h(or)f(UDP)h(sockets)g(in)g(a)f(standard)g(way)-5
b(.)150 2702 y(Fast)28 b(Sockets)f(utilizes)h(existing)f(name)f
(management)f(fa-)150 2801 y(cilities.)51 b(Every)27
b(Fast)i(Socket)f(has)g(a)g Fy(shadow)g(socket)h Fz(as-)150
2901 y(sociated)i(with)g(it;)38 b(this)31 b(shadow)g(socket)g(is)h(of)f
(the)g(same)150 3001 y(type)e(and)h(shares)f(the)h(same)g(\256le)g
(descriptor)f(as)h(the)g(Fast)150 3100 y(Socket.)c(Whenever)16
b(a)j(Fast)g(Socket)e(requests)h(to)g Ft(bind\(\))150
3200 y Fz(to)35 b(an)g Ft(AF)p 469 3200 V 30 w(INET)g
Fz(address,)j(the)d(operation)f(is)i(\256rst)f(per)n(-)150
3300 y(formed)14 b(on)i(the)g(shadow)g(socket)f(to)i(determine)d(if)j
(the)f(oper)n(-)150 3399 y(ation)h(is)i(legal)f(and)f(the)h(name)f(is)i
(available.)25 b(If)18 b(the)g(shadow)150 3499 y(socket)k
Ft(bind)h Fz(succeeds,)f(the)h Ft(AF)p 1177 3499 V 29
w(INET)g Fz(name)e(is)j(bound)150 3598 y(to)j(the)h(Fast)g(Socket')-5
b(s)27 b(Active)g(Message)g(endpoint)f(name)150 3698
y(via)c(an)h(external)e(name)h(service.)32 b(Other)22
b(operations,)f(such)150 3798 y(as)j Ft(setsockopt\(\))e
Fz(and)h Ft(getsockopt\(\))p Fz(,)g(work)g(in)150 3897
y(a)e(similar)f(fashion.)233 4001 y(Shadow)30 b(sockets)h(are)h(also)f
(used)g(for)g(connection)e(es-)150 4101 y(tablishment.)53
b(When)29 b(a)g Ft(connect\(\))f Fz(call)i(is)g(made)e(by)150
4200 y(the)i(user)h(application,)g(Fast)h(Sockets)e(determines)f(if)i
(the)150 4300 y(name)37 b(is)h(in)g(the)g(local)f(subnet.)79
b(For)37 b(local)h(addresses,)150 4400 y(the)44 b(shadow)e(socket)i
(performs)d(a)j Ft(connect\(\))f Fz(to)h(a)150 4499 y(port)24
b(number)e(that)j(is)g(determined)d(through)g(a)j(hash)f(func-)150
4599 y(tion.)i(If)19 b(this)g Ft(connect\(\))e Fz(succeeds,)i(then)f(a)
h(handshake)150 4698 y(is)38 b(performed)c(to)j(bootstrap)f(the)h
(connection.)75 b(Should)150 4798 y(the)28 b Ft(connect\(\))e
Fz(to)i(the)g(hashed)f(port)g(number)f(fail,)j(or)150
4898 y(the)e(connection)d(bootstrap)h(process)i(fail,)h(then)e(a)h
(normal)150 4997 y Ft(connect\(\))c Fz(call)h(is)g(performed.)35
b(This)24 b(mechanism)e(al-)150 5097 y(lows)d(a)h(Fast)g(Sockets)f
(program)d(to)k(connect)d(to)j(a)f(non-Fast)150 5197
y(Sockets)h(program)e(without)i(dif)o(\256culties.)233
5300 y(An)g Ft(accept\(\))f Fz(call)i(becomes)e(more)g(complicated)f
(as)150 5400 y(a)25 b(result)g(of)f(this)h(scheme,)g(however)-5
b(.)39 b(Because)24 b(both)g(Fast)2137 83 y(Sockets)h(and)e(non-Fast)g
(Sockets)i(programs)d(can)i(connect)2137 183 y(to)37
b(a)f(socket)g(that)g(has)g(performed)d(a)j Ft(listen\(\))f
Fz(call,)2137 282 y(there)d(two)f(distinct)h(port)f(numbers)f(for)h(a)h
(given)e(socket.)2137 382 y(The)24 b(port)f(supplied)g(by)g(the)h(user)
g(accepts)f(connection)f(re-)2137 482 y(quests)30 b(from)f(programs)e
(using)i(normal)g(protocols.)53 b(The)2137 581 y(second)23
b(port)g(is)i(derived)d(from)g(hashing)h(on)g(the)h(user)f(port)2137
681 y(number)m(,)37 b(and)d(is)h(used)g(to)g(accept)f(connection)f
(requests)2137 780 y(from)i(Fast)h(Sockets)e(programs.)70
b(An)35 b Ft(accept\(\))f Fz(call)2137 880 y(multiplexes)20
b(connection)e(requests)i(from)f(both)g(ports.)2221 984
y(The)59 b(connection)e(establishment)i(mechanism)f(has)2137
1084 y(some)53 b(trade-of)o(fs.)122 b(It)54 b(utilizes)f(existing)f
(name)g(and)2137 1183 y(connection)42 b(management)g(facilities,)49
b(minimizing)43 b(the)2137 1283 y(amount)31 b(of)h(code)g(in)g(Fast)h
(Sockets.)63 b(Using)32 b(TCP/IP)h(to)2137 1383 y(bootstrap)17
b(the)g(connection)f(can)i(impose)f(a)h(high)f(time)g(cost,)2137
1482 y(which)25 b(limits)h(the)f(realizable)f(throughput)e(of)i
(short-lived)2137 1582 y(connections.)h(Using)18 b(two)h(port)f
(numbers)f(also)i(introduces)2137 1682 y(the)26 b(potential)f(problem)e
(of)j(con\257icts:)37 b(the)26 b(Fast)g(Sockets-)2137
1781 y(generated)16 b(port)g(number)g(could)g(con\257ict)h(with)g(a)g
(user)g(port.)2137 1881 y(W)-7 b(e)22 b(do)e(not)f(expect)h(this)h(to)f
(realistically)g(be)g(a)h(problem.)2137 2143 y Fu(3.7)100
b(Fast)24 b(Sockets)i(Limitations)2137 2307 y Fz(Fast)20
b(Sockets)f(is)g(a)g(user)n(-level)f(library)-5 b(.)25
b(This)19 b(limits)g(its)h(full)2137 2407 y(compatibility)h(with)i(the)
f(Sockets)g(abstraction.)32 b(First,)23 b(ap-)2137 2506
y(plications)30 b(must)g(be)g(relinked)f(to)h(use)g(Fast)h(Sockets,)h
(al-)2137 2606 y(though)16 b(no)g(code)g(changes)g(are)h(required.)24
b(More)16 b(seriously)-5 b(,)2137 2706 y(Fast)22 b(Sockets)f(cannot)e
(currently)g(be)i(shared)f(between)f(two)2137 2805 y(processes)26
b(\(for)e(example,)h(via)g(a)h Ft(fork\(\))f Fz(call\),)h(and)f(all)
2137 2905 y(Fast)15 b(Sockets)e(state)i(is)f(lost)g(upon)e(an)i
Ft(exec\(\))f Fz(or)g Ft(exit\(\))2137 3004 y Fz(call.)85
b(This)40 b(poses)f(problems)f(for)h(traditional)f(Internet)2137
3104 y(server)19 b(daemons)e(and)h(for)g(\252super)n(-server)s(\272)e
(daemons)i(such)2137 3204 y(as)39 b Ft(inetd)p Fz(,)j(which)c(depend)e
(on)i(a)g Ft(fork\(\))g Fz(for)f(each)2137 3303 y(incoming)29
b(request.)56 b(User)n(-level)30 b(operation)e(also)i(causes)2137
3403 y(problems)38 b(for)h(socket)g(termination;)47 b(standard)38
b(TCP/IP)2137 3503 y(sockets)20 b(are)g(gracefully)f(shut)h(down)f(on)g
(process)h(termina-)2137 3602 y(tion.)40 b(These)25 b(problems)e(are)h
(not)h(insurmountable.)37 b(Shar)n(-)2137 3702 y(ing)29
b(Fast)g(Sockets)g(requires)e(an)i(Active)f(Messages)h(layer)2137
3801 y(that)g(allows)f(endpoint)f(sharing)g(and)h(either)f(the)i(use)f
(of)g(a)2137 3901 y(dedicated)e(server)h(process)g([Maeda)f(&)i
(Bershad)f(1993b])2137 4001 y(or)d(the)f(use)h(of)g(shared)f(memory)e
(for)i(every)g(Fast)i(Socket')-5 b(s)2137 4100 y(state.)58
b(Recovering)29 b(Fast)i(Sockets)f(state)h(lost)g(during)e(an)2137
4200 y Ft(exec\(\))21 b Fz(call)g(can)f(be)h(done)e(via)i(a)g
(dedicated)f(server)g(pro-)2137 4300 y(cess,)i(where)e(the)h(Fast)h
(Socket')-5 b(s)20 b(state)i(is)g(migrated)d(to)i(and)2137
4399 y(from)e(the)h(server)f(before)f(and)h(after)g(the)h
Ft(exec\(\))f Fz(\320)h(sim-)2137 4499 y(ilar)32 b(to)f(the)h(method)e
(used)h(by)f(the)i(user)n(-level)e(T)m(ransport)2137
4598 y(Layer)20 b(Interface)f([Stevens)g(1990].)2221
4703 y(The)57 b(Fast)i(Sockets)f(library)f(is)i(currently)d(single-)
2137 4802 y(threaded.)35 b(This)23 b(is)h(problematic)d(for)i(current)e
(versions)i(of)2137 4902 y(Active)c(Messages)g(because)g(an)f
(application)g(must)g(explic-)2137 5001 y(itly)27 b(touch)e(the)i
(network)e(to)h(receive)g(messages.)45 b(Since)26 b(a)2137
5101 y(user)k(application)f(could)g(engage)f(in)i(an)g(arbitrarily)e
(long)2137 5201 y(computation,)33 b(it)f(is)h(dif)o(\256cult)e(to)h
(implement)f(operations)2137 5300 y(such)46 b(as)h(asynchronous)d(I/O.)
i(While)g(multi-threading)2137 5400 y(of)o(fers)19 b(one)g(solution,)g
(it)i(makes)e(the)h(library)f(less)i(portable,)p eop
%%Page: 8 8
8 7 bop 0 83 a Fz(and)20 b(imposes)g(synchronization)d(costs.)0
368 y FA(4)119 b(Performance)0 555 y Fz(This)20 b(section)g(presents)f
(our)h(performance)d(measurements)0 655 y(of)i(Fast)g(Sockets,)g(both)f
(for)g(microbenchmarks)e(and)i(a)h(few)0 755 y(applications.)53
b(The)29 b(microbenchmarks)c(assess)31 b(the)e(suc-)0
854 y(cess)d(of)f(our)f(ef)o(forts)g(to)h(minimize)g(overhead)e(and)h
(round-)0 954 y(trip)18 b(latency)-5 b(.)25 b(W)-7 b(e)20
b(report)d(round-trip)e(times)k(and)e(sustained)0 1053
y(bandwidth)31 b(available)i(from)f(Fast)i(Sockets,)i(using)d(both)0
1153 y(our)15 b(own)g(microbenchmarks)d(and)k(two)f(publicly)g
(available)0 1253 y(benchmark)22 b(programs.)38 b(The)25
b(true)f(test)i(of)e(Fast)i(Sockets')0 1352 y(usefulness,)17
b(however)m(,)f(is)j(how)e(well)i(its)f(raw)g(performance)0
1452 y(is)f(exposed)e(to)h(applications.)25 b(W)-7 b(e)17
b(present)e(results)i(from)e(an)0 1552 y(FTP)j(application)e(to)h
(demonstrate)f(the)h(usefulness)g(of)g(Fast)0 1651 y(Sockets)j(in)g(a)h
(real-world)e(environment.)0 1894 y Fu(4.1)99 b(Experimental)26
b(Setup)0 2051 y Fz(Fast)14 b(Sockets)g(has)f(been)g(implemented)e
(using)i(Generic)g(Ac-)0 2151 y(tive)30 b(Messages)f(\(GAM\))g([Culler)
h(et)g(al.)55 b(1994])28 b(on)h(both)0 2250 y(HP/UX)e(9)p
Fq(:)p Fz(0)p Fq(:)p Fy(x)f Fz(and)f(Solaris)i(2)p Fq(:)p
Fz(5.)44 b(The)26 b(HP/UX)h(platform)0 2350 y(consists)19
b(of)g(two)f(99Mhz)g(HP735')-5 b(s)18 b(interconnected)e(by)i(an)0
2450 y(FDDI)e(network)f(and)g(using)h(the)g(Medusa)f(network)g(adapter)
0 2549 y([Banks)23 b(&)g(Prudence)f(1993].)33 b(The)23
b(Solaris)g(platform)f(is)i(a)0 2649 y(collection)f(of)h(UltraSP)-8
b(ARC)26 b(1')-5 b(s)25 b(connected)e(via)h(a)h(Myri-)0
2749 y(net)f(network)f([Seitz)h(1994].)36 b(For)24 b(all)h(tests,)g
(there)f(was)g(no)0 2848 y(other)19 b(load)h(on)g(the)g(network)f
(links)h(or)g(switches.)83 2949 y(Our)15 b(microbenchmarks)d(were)j
(run)g(against)g(a)h(variety)e(of)0 3048 y(TCP/IP)21
b(setups.)26 b(The)20 b(standard)f(HP/UX)h(TCP/IP)h(stack)f(is)0
3148 y(well-tuned,)27 b(but)g(there)g(is)h(also)g(a)g(single-copy)d
(stack)i(de-)0 3248 y(signed)22 b(for)g(use)h(on)g(the)g(Medusa)f
(network)f(interface.)34 b(W)-7 b(e)0 3347 y(ran)16 b(our)f(tests)i(on)
f(both)f(stacks.)26 b(While)17 b(the)f(Solaris)g(TCP/IP)0
3447 y(stack)24 b(has)g(reasonably)e(good)g(performance,)f(the)j
(Myrinet)0 3547 y(TCP/IP)18 b(drivers)f(do)g(not.)26
b(Consequently)-5 b(,)15 b(we)j(also)g(ran)f(our)0 3646
y(microbenchmarks)f(on)i(a)i(100-Mbit)d(Ethernet,)h(which)h(has)0
3746 y(an)h(extremely)f(well-tuned)g(driver)-5 b(.)83
3846 y(W)e(e)47 b(used)e(Generic)g(Active)h(Messages)g(1.0)f(on)g(the)0
3946 y(HP/UX)18 b(platform)e(as)i(a)g(base)g(for)f(Fast)h(Sockets)g
(and)f(as)h(our)0 4046 y(Active)c(Messages)h(layer)-5
b(.)24 b(The)14 b(Solaris)h(tests)g(used)f(Generic)0
4145 y(Active)i(Messages)h(1.5,)g(which)f(adds)g(support)f(for)h
(medium)0 4245 y(messages)22 b(\(receiver)n(-based)e(memory)g
(management\))g(and)0 4345 y(client-server)f(program)f(images.)0
4587 y Fu(4.2)99 b(Micr)n(obenchmarks)0 4745 y Fp(4.2.1)81
b(Round-T)-6 b(rip)21 b(Latency)0 4902 y Fz(Our)40 b(round-trip)e
(microbenchmark)e(is)41 b(a)g(simple)f(ping-)0 5001 y(pong)22
b(test)j(between)e(two)h(machines)f(for)g(a)h(given)f(transfer)0
5101 y(size.)57 b(The)29 b(ping-pong)e(is)k(repeated)e(until)h(a)g
(95\045)g(con\256-)0 5201 y(dence)g(interval)h(is)h(obtained.)59
b(TCP/IP)32 b(and)f(Fast)h(Sock-)0 5300 y(ets)23 b(use)e(the)h(same)g
(program,)e(Active)h(Messages)h(uses)h(dif-)0 5400 y(ferent)35
b(code)g(but)g(the)h(same)g(algorithm.)72 b(W)-7 b(e)37
b(used)e(the)p 1991 3 1756 4 v 1991 20 V 1989 111 4 92
v 2041 84 a Fo(Layer)p 2778 111 V 614 w(Per)o(-Byte)p
3142 111 V 3142 111 V 165 w Fm(t)3280 99 y Fx(0)p 3429
111 V 3429 111 V 3489 84 a Fo(Actual)p 3745 111 V 1989
203 V 2778 203 V 2867 175 a(\()p Fn(m)p Fo(sec\))p 3142
203 V 3142 203 V 138 w(\()p Fn(m)p Fo(sec\))p 3429 203
V 3429 203 V 100 w(Startup)p 3745 203 V 1991 206 1756
4 v 1989 297 4 92 v 2041 270 a(Fast)18 b(Sockets)p 2778
297 V 461 w(0.068)p 3142 297 V 149 w(157.)q(8)p 3429
297 V 157 w(57.)q(8)p 3745 297 V 1991 301 1756 4 v 1989
392 4 92 v 2041 364 a(Active)h(Messages)p 2778 392 V
329 w(0.129)p 3142 392 V 186 w(38.)q(9)p 3429 392 V 157
w(45.)q(0)p 3745 392 V 1991 395 1756 4 v 1989 487 4 92
v 2041 459 a(TCP/IP)e(\(Myrinet\))p 2778 487 V 303 w(0.076)p
3142 487 V 149 w(736.)q(4)p 3429 487 V 120 w(533.)q(0)p
3745 487 V 1991 490 1756 4 v 1989 581 4 92 v 2041 554
a(TCP/IP)g(\(Fast)h(Ethernet\))p 2778 581 V 147 w(0.174)p
3142 581 V 149 w(366.)q(2)p 3429 581 V 120 w(326.)q(0)p
3745 581 V 1991 584 1756 4 v 1991 601 V 1989 692 4 92
v 2658 665 a(Small)g(Packets)p 3745 692 V 1991 696 1756
4 v 1989 787 4 92 v 2041 760 a(Fast)g(Sockets)p 2778
787 V 461 w(0.124)p 3142 787 V 186 w(61.)q(4)p 3429 787
V 157 w(57.)q(8)p 3745 787 V 1991 790 1756 4 v 1989 882
4 92 v 2041 854 a(Active)h(Messages)p 2778 882 V 329
w(0.123)p 3142 882 V 186 w(45.)q(4)p 3429 882 V 157 w(45.)q(0)p
3745 882 V 1991 885 1756 4 v 1989 976 4 92 v 2041 949
a(TCP/IP)e(\(Myrinet\))p 2778 976 V 303 w(0.223)p 3142
976 V 149 w(533.)q(0)p 3429 976 V 120 w(533.)q(0)p 3745
976 V 1991 980 1756 4 v 1989 1071 4 92 v 2041 1044 a(TCP/IP)g(\(Fast)h
(Ethernet\))p 2778 1071 V 147 w(0.242)p 3142 1071 V 149
w(325.)q(0)p 3429 1071 V 120 w(326.)q(0)p 3745 1071 V
1991 1074 1756 4 v 1991 1091 V 1988 1322 a Fz(T)-6 b(able)21
b(1:)32 b(Least-squares)21 b(analysis)h(of)g(the)g(Solaris)h(round-)
1988 1421 y(trip)35 b(microbenchmark.)71 b(The)36 b(per)n(-byte)e(and)i
(estimated)1988 1521 y(startup)29 b(\()n Fy(t)2293 1536
y Fj(0)2328 1521 y Fz(\))h(costs)h(are)f(for)f(round-trip)f(latency)-5
b(,)31 b(and)f(are)1988 1621 y(measured)25 b(in)i(microseconds.)44
b(The)26 b(actual)h(startup)f(costs)1988 1720 y(\(for)38
b(a)i(single-byte)e(message\))h(are)h(also)f(shown.)85
b(Ac-)1988 1820 y(tual)22 b(and)h(estimated)f(costs)i(dif)o(fer)d
(because)h(round-trip)e(la-)1988 1919 y(tency)32 b(is)j(not)e(strictly)
g(linear)-5 b(.)66 b(Per)n(-byte)33 b(costs)h(for)f(Fast)1988
2019 y(Sockets)23 b(are)g(lower)g(than)g(for)f(Active)i(Messages)f
(because)1988 2119 y(Fast)d(Sockets)g(bene\256ts)g(from)f(packet)g
(pipelining;)g(the)h(Ac-)1988 2218 y(tive)34 b(Messages)i(test)f(only)g
(sends)f(a)i(single)f(packet)f(at)h(a)1988 2318 y(time.)24
b(\252Small)14 b(Packets\272)f(examines)g(protocol)f(behavior)f(for)
1988 2418 y(packets)23 b(smaller)h(than)f(1K;)h(here,)g(Fast)h(Sockets)
f(and)g(Ac-)1988 2517 y(tive)c(Messages)g(do)g(considerably)e(better)i
(than)g(TCP/IP)-9 b(.)1988 2803 y(TCP/IP)21 b Ft(TCP)p
2413 2803 25 4 v 29 w(NODELAY)e Fz(option)g(to)i(force)e(packets)h(to)h
(be)1988 2903 y(transmitted)33 b(as)j(soon)e(as)h(possible)g(\(instead)
f(of)g(the)h(de-)1988 3003 y(fault)28 b(behavior)m(,)h(which)g
(attempts)f(to)i(batch)e(small)i(pack-)1988 3102 y(ets)20
b(together\);)f(this)h(reduces)f(throughput)e(for)j(small)g(trans-)1988
3202 y(fers,)32 b(but)e(yields)g(better)g(round-trip)d(times.)58
b(The)30 b(socket)1988 3301 y(buf)o(fer)11 b(size)j(was)g(set)g(to)f
(64)g(Kbytes)3006 3271 y Fj(1)3040 3301 y Fz(,)i(as)f(this)g(also)g
(improves)1988 3401 y(TCP/IP)g(round-trip)d(latency)-5
b(.)24 b(W)-7 b(e)15 b(tested)f(TCP/IP)g(and)g(Fast)1988
3501 y(Sockets)28 b(for)h(transfers)f(up)h(to)g(64)f(Kbytes;)34
b(Active)28 b(Mes-)1988 3600 y(sages)20 b(only)f(supports)h(4)g(Kbyte)f
(messages.)2071 3710 y(Figures)29 b(3)i(and)f(4)g(present)f(the)i
(results)f(of)g(the)h(round-)1988 3809 y(trip)24 b(microbenchmark.)37
b(Fast)26 b(Sockets)f(achieves)f(low)h(la-)1988 3909
y(tency)h(round-trip)e(times,)29 b(especially)d(for)h(small)g(packets.)
1988 4008 y(Round-trip)17 b(time)j(scales)g(linearly)f(with)h
(increasing)e(trans-)1988 4108 y(fer)23 b(size,)j(re\257ecting)e(the)g
(time)g(spent)g(in)h(moving)d(the)j(data)1988 4208 y(to)16
b(the)g(network)f(card.)25 b(There)16 b(is)h(a)g(\252hiccup\272)e(at)i
(4096)e(bytes)1988 4307 y(on)f(the)i(Solaris)f(platform,)g(which)f(is)i
(the)g(maximum)d(packet)1988 4407 y(size)26 b(for)g(Active)g(Messages.)
45 b(This)27 b(occurs)e(because)h(Fast)1988 4507 y(Sockets')16
b(fragmentation)f(algorithm)g(attempts)i(to)g(balance)1988
4606 y(packet)f(sizes)i(for)e(better)h(round-trip)d(and)i(bandwidth)f
(char)n(-)1988 4706 y(acteristics.)26 b(Fast)17 b(Sockets')g(overhead)d
(is)k(low)-5 b(,)17 b(staying)f(rel-)1988 4805 y(atively)22
b(constant)h(at)h(25\26130)d(microseconds)g(\(over)h(that)i(of)1988
4905 y(Active)c(Messages\).)2071 5014 y(T)-6 b(able)34
b(1)g(shows)g(the)h(results)f(of)g(a)h(least-squares)f(lin-)1988
5114 y(ear)27 b(regression)g(analysis)h(of)g(the)f(Solaris)i
(round-trip)c(mi-)1988 5214 y(crobenchmark.)36 b(W)-7
b(e)26 b(show)d Fy(t)2880 5229 y Fj(0)2915 5214 y Fz(,)j(the)f
(estimated)f(cost)h(for)f(a)p 1988 5320 705 4 v 2078
5376 a Fi(1)2107 5400 y Fh(TCP/IP)17 b(is)g(limited)i(to)e(a)g(maximum)
g(buf)o(fer)h(size)g(of)f(56)g(Kbytes.)p eop
%%Page: 9 9
9 8 bop 675 2108 a
 currentpoint currentpoint translate 0.9 0.9 scale neg exch neg exch
translate
 675 2108 a @beginspecial 50 @llx 50
@lly 410 @urx 302 @ury 3600 @rwi @setspecial
%%BeginDocument: hpux-rtt.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -60 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Times-Roman findfont 180 scalefont setfont
newpath
LTa
1080 468 M
5841 0 V
1087 451 M
0 4498 V
LTb
LTa
1080 468 M
5841 0 V
LTb
1080 468 M
63 0 V
5778 0 R
-63 0 V
972 468 M
(0) Rshow
LTa
1080 1330 M
5841 0 V
LTb
1080 1330 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(500) Rshow
LTa
1080 2192 M
5841 0 V
LTb
1080 2192 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(1000) Rshow
LTa
1080 3053 M
5841 0 V
LTb
1080 3053 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(1500) Rshow
LTa
1080 3915 M
5841 0 V
LTb
1080 3915 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(2000) Rshow
LTa
1080 4777 M
5841 0 V
LTb
1080 4777 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(2500) Rshow
LTa
1087 451 M
0 4498 V
LTb
1087 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(0) Cshow
LTa
1799 451 M
0 4498 V
LTb
1799 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(1000) Cshow
LTa
2511 451 M
0 4498 V
LTb
2511 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(2000) Cshow
LTa
3224 451 M
0 4498 V
LTb
3224 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(3000) Cshow
LTa
3936 451 M
0 4498 V
LTb
3936 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(4000) Cshow
LTa
4648 451 M
0 4498 V
LTb
4648 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(5000) Cshow
LTa
5360 451 M
0 4498 V
LTb
5360 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(6000) Cshow
LTa
6072 451 M
0 4498 V
LTb
6072 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(7000) Cshow
LTa
6784 451 M
0 4498 V
LTb
6784 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(8000) Cshow
1080 451 M
5841 0 V
0 4498 V
-5841 0 V
0 -4498 V
180 2700 M
currentpoint gsave translate 90 rotate 0 0 M
(Microseconds) Cshow
grestore
4000 91 M
(Transfer Size) Cshow
LT0
6072 2278 M
(Active Messages) Rshow
6180 2278 M
324 0 V
1088 532 M
2 2 V
3 1 V
6 4 V
11 9 V
23 17 V
45 32 V
91 54 V
183 119 V
364 239 V
730 479 V
729 480 V
729 479 V
1459 958 V
1421 934 V
6288 2278 D
1088 532 D
1090 534 D
1093 535 D
1099 539 D
1110 548 D
1133 565 D
1178 597 D
1269 651 D
1452 770 D
1816 1009 D
2546 1488 D
3275 1968 D
4004 2447 D
5463 3405 D
6884 4339 D
LT1
6072 2098 M
(Fast Sockets) Rshow
6180 2098 M
324 0 V
1088 560 M
2 2 V
3 0 V
6 8 V
11 8 V
23 21 V
45 39 V
91 68 V
183 127 V
364 231 V
730 533 V
729 432 V
729 476 V
729 478 V
730 482 V
1421 936 V
37 -739 V
6288 2098 A
1088 560 A
1090 562 A
1093 562 A
1099 570 A
1110 578 A
1133 599 A
1178 638 A
1269 706 A
1452 833 A
1816 1064 A
2546 1597 A
3275 2029 A
4004 2505 A
4733 2983 A
5463 3465 A
6884 4401 A
6921 3662 A
LT2
6072 1918 M
(Standard TCP) Rshow
6180 1918 M
324 0 V
1088 1059 M
2 3 V
3 2 V
6 19 V
11 10 V
23 14 V
45 45 V
91 140 V
183 141 V
364 283 V
730 576 V
729 627 V
729 599 V
1459 662 V
1421 568 V
37 125 V
6288 1918 B
1088 1059 B
1090 1062 B
1093 1064 B
1099 1083 B
1110 1093 B
1133 1107 B
1178 1152 B
1269 1292 B
1452 1433 B
1816 1716 B
2546 2292 B
3275 2919 B
4004 3518 B
5463 4180 B
6884 4748 B
6921 4873 B
LT3
6072 1738 M
(Single-Copy TCP) Rshow
6180 1738 M
324 0 V
1088 1132 M
2 5 V
3 9 V
6 13 V
11 0 V
23 31 V
45 23 V
91 100 V
183 136 V
364 265 V
730 593 V
729 519 V
729 503 V
1459 701 V
1421 514 V
37 152 V
6288 1738 C
1088 1132 C
1090 1137 C
1093 1146 C
1099 1159 C
1110 1159 C
1133 1190 C
1178 1213 C
1269 1313 C
1452 1449 C
1816 1714 C
2546 2307 C
3275 2826 C
4004 3329 C
5463 4030 C
6884 4544 C
6921 4696 C
stroke
grestore
end
showpage
%%EndDocument
 @endspecial 675 2108 a
 currentpoint currentpoint translate 1 0.9 div 1 0.9 div scale neg
exch neg exch translate
 675 2108 a 150 2290 a Fz(Figure)19
b(3:)27 b(Round-trip)18 b(performance)f(for)i(Fast)i(Sockets,)f(Active)
g(Messages,)g(and)f(TCP)i(for)e(the)h(HP/UX/Medusa)f(platform.)150
2390 y(Active)h(Messages)h(for)e(HP/UX)i(cannot)e(transfer)g(more)h
(than)f(8140)g(bytes)h(at)h(a)g(time.)675 4882 y
 currentpoint currentpoint translate 0.9 0.9 scale neg exch neg exch
translate
 675
4882 a @beginspecial 50 @llx 50 @lly 410 @urx 302 @ury
3600 @rwi @setspecial
%%BeginDocument: solaris-rtt.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -60 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Times-Roman findfont 180 scalefont setfont
newpath
LTa
LTb
LTa
1080 808 M
5841 0 V
LTb
1080 808 M
63 0 V
5778 0 R
-63 0 V
972 808 M
(200) Rshow
LTa
1080 1268 M
5841 0 V
LTb
1080 1268 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(400) Rshow
LTa
1080 1728 M
5841 0 V
LTb
1080 1728 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(600) Rshow
LTa
1080 2188 M
5841 0 V
LTb
1080 2188 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(800) Rshow
LTa
1080 2648 M
5841 0 V
LTb
1080 2648 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(1000) Rshow
LTa
1080 3108 M
5841 0 V
LTb
1080 3108 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(1200) Rshow
LTa
1080 3569 M
5841 0 V
LTb
1080 3569 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(1400) Rshow
LTa
1080 4029 M
5841 0 V
LTb
1080 4029 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(1600) Rshow
LTa
1080 4489 M
5841 0 V
LTb
1080 4489 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(1800) Rshow
LTa
1080 4949 M
5841 0 V
LTb
1080 4949 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(2000) Rshow
LTa
1079 451 M
0 4498 V
LTb
1079 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(0) Cshow
LTa
1792 451 M
0 4498 V
LTb
1792 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(1000) Cshow
LTa
2505 451 M
0 4498 V
LTb
2505 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(2000) Cshow
LTa
3219 451 M
0 4498 V
LTb
3219 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(3000) Cshow
LTa
3932 451 M
0 4498 V
LTb
3932 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(4000) Cshow
LTa
4645 451 M
0 4498 V
LTb
4645 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(5000) Cshow
LTa
5358 451 M
0 4498 V
LTb
5358 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(6000) Cshow
LTa
6071 451 M
0 4498 V
LTb
6071 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(7000) Cshow
LTa
6784 451 M
0 4498 V
LTb
6784 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(8000) Cshow
1080 451 M
5841 0 V
0 4498 V
-5841 0 V
0 -4498 V
180 2700 M
currentpoint gsave translate 90 rotate 0 0 M
(Time \(microseconds\)) Cshow
grestore
4000 91 M
(Transfer Size) Cshow
LT0
3575 4374 M
(Fast Sockets) Rshow
3683 4374 M
324 0 V
1080 487 M
5 2 V
6 4 V
11 11 V
23 0 V
46 19 V
91 45 V
182 65 V
366 149 V
730 288 V
730 313 V
730 292 V
730 28 V
731 223 V
1460 465 V
3791 4374 D
1080 487 D
1085 489 D
1091 493 D
1102 504 D
1125 504 D
1171 523 D
1262 568 D
1444 633 D
1810 782 D
2540 1070 D
3270 1383 D
4000 1675 D
4730 1703 D
5461 1926 D
6921 2391 D
LT1
3575 4194 M
(Active Messages) Rshow
3683 4194 M
324 0 V
1080 451 M
5 2 V
6 3 V
11 13 V
23 -4 V
46 21 V
91 43 V
182 67 V
366 147 V
730 285 V
730 279 V
730 285 V
3791 4194 A
1080 451 A
1085 453 A
1091 456 A
1102 469 A
1125 465 A
1171 486 A
1262 529 A
1444 596 A
1810 743 A
2540 1028 A
3270 1307 A
4000 1592 A
LT2
3575 4014 M
(Myrinet TCP/IP) Rshow
3683 4014 M
324 0 V
1080 1574 M
5 -30 V
6 2 V
11 12 V
23 76 V
46 30 V
91 62 V
182 188 V
366 138 V
730 343 V
730 297 V
730 368 V
730 338 V
731 362 V
1460 646 V
3791 4014 B
1080 1574 B
1085 1544 B
1091 1546 B
1102 1558 B
1125 1634 B
1171 1664 B
1262 1726 B
1444 1914 B
1810 2052 B
2540 2395 B
3270 2692 B
4000 3060 B
4730 3398 B
5461 3760 B
6921 4406 B
LT3
3575 3834 M
(100 Mbps Ethernet TCP/IP) Rshow
3683 3834 M
324 0 V
1080 1098 M
5 -19 V
6 19 V
11 -14 V
23 64 V
46 48 V
91 58 V
182 133 V
366 270 V
730 462 V
730 520 V
730 329 V
730 423 V
731 362 V
1460 874 V
3791 3834 C
1080 1098 C
1085 1079 C
1091 1098 C
1102 1084 C
1125 1148 C
1171 1196 C
1262 1254 C
1444 1387 C
1810 1657 C
2540 2119 C
3270 2639 C
4000 2968 C
4730 3391 C
5461 3753 C
6921 4627 C
stroke
grestore
end
showpage
%%EndDocument
 @endspecial 675 4882 a
 currentpoint currentpoint translate 1 0.9 div 1 0.9 div scale neg
exch neg exch translate
 675 4882 a 150 5065 a Fz(Figure)g(4:)30
b(Round-trip)20 b(performance)f(for)i(Fast)i(Sockets,)e(Active)h
(Messages,)g(and)f(TCP)i(on)e(the)h(Solaris/Myrinet)e(platform.)150
5165 y(Active)g(Messages)h(for)e(Myrinet)g(can)h(only)g(transfer)f(up)h
(to)g(4096)f(bytes)h(at)h(a)f(time.)p eop
%%Page: 10 10
10 9 bop 0 83 a Fz(0-byte)28 b(packet,)k(and)d(the)g(mar)o(ginal)f
(cost)i(for)g(each)f(addi-)0 183 y(tional)19 b(data)h(byte.)26
b(Surprisingly)-5 b(,)17 b(Fast)j(Sockets')f(cost-per)n(-)0
282 y(byte)14 b(appears)f(to)h(be)g(lower)g(than)g(that)g(of)g(Active)g
(Messages.)0 382 y(This)27 b(is)g(because)f(the)g(Fast)h(Sockets)f(per)
n(-byte)f(cost)i(is)g(re-)0 482 y(ported)16 b(for)g(a)h(64K)g(range)f
(of)h(transfers)f(while)h(Active)g(Mes-)0 581 y(sages')30
b(per)n(-byte)e(cost)j(is)f(for)g(a)g(4K)g(range.)55
b(The)29 b(Active)0 681 y(Messages)17 b(test)g(minimizes)f(overhead)e
(by)j(not)f(implement-)0 780 y(ing)28 b(in-order)e(delivery)-5
b(,)28 b(which)f(means)h(only)f(one)h(packet)0 880 y(can)c(be)g
(outstanding)e(at)j(a)g(time.)39 b(Both)24 b(Fast)i(Sockets)e(and)0
980 y(TCP/IP)19 b(provide)e(in-order)f(delivery)-5 b(,)17
b(which)h(enables)g(data)0 1079 y(packets)i(to)h(be)g(pipelined)f
(through)e(the)j(network)f(and)g(thus)0 1179 y(achieve)j(a)i(lower)f
(per)n(-byte)f(cost.)40 b(The)24 b(per)n(-byte)e(costs)j(of)0
1279 y(Fast)19 b(Sockets)g(for)f(small)h(packets)f(\(less)h(than)f(1)h
(Kbyte\))e(are)0 1378 y(slightly)26 b(higher)g(than)g(Active)g
(Messages.)47 b(While)27 b(TCP')-5 b(s)0 1478 y(long-term)14
b(per)n(-byte)g(cost)j(is)f(only)f(about)g(15\045)h(higher)f(than)0
1577 y(that)g(of)g(Fast)i(Sockets,)e(its)i(performance)12
b(for)j(small)h(packets)0 1677 y(is)23 b(much)e(worse,)h(with)g(per)n
(-byte)e(costs)j(twice)f(that)g(of)g(Fast)0 1777 y(Sockets)e(and)g
(startup)f(costs)i(5\26110)e(times)i(higher)-5 b(.)83
1876 y(Another)26 b(surprising)g(element)g(of)h(the)h(analysis)f(is)h
(that)0 1976 y(the)e(overall)c Fy(t)405 1991 y Fj(0)466
1976 y Fz(and)h Fy(t)633 1991 y Fj(0)694 1976 y Fz(for)i(small)h
(packets)f(is)i(very)e(dif)o(fer)n(-)0 2076 y(ent,)f(especially)e(for)h
(Fast)h(Sockets)f(and)g(Myrinet)f(TCP/IP)-9 b(.)0 2175
y(Both)18 b(protocols)e(pipeline)g(packets,)i(which)f(lowers)g(round-)0
2275 y(trip)25 b(latencies)g(for)f(multi-packet)f(transfers.)41
b(This)25 b(causes)0 2374 y(a)20 b(non-linear)d(round-trip)f(latency)i
(function,)g(yielding)g(dif-)0 2474 y(ferent)38 b(estimates)g(of)f
Fy(t)710 2489 y Fj(0)783 2474 y Fz(for)h(single-packet)f(and)h(multi-)0
2574 y(packet)19 b(transfers.)0 2792 y Fp(4.2.2)81 b(Bandwidth)0
2948 y Fz(Our)28 b(bandwidth)f(microbenchmark)d(does)k(500)g
Ft(send\(\))0 3047 y Fz(calls)h(of)e(a)i(given)e(size,)j(and)d(then)h
(waits)h(for)e(a)h(response.)0 3147 y(This)17 b(is)h(repeated)e(until)h
(a)g(95\045)g(con\256dence)e(interval)h(is)i(ob-)0 3247
y(tained.)43 b(As)26 b(with)g(the)f(round-trip)e(microbenchmark,)g(the)
0 3346 y(TCP/IP)c(and)e(Fast)i(Sockets)f(measurements)f(were)h(derived)
0 3446 y(from)k(the)i(same)f(program)e(and)i(Active)g(Messages)h
(results)0 3545 y(were)18 b(obtained)e(using)h(the)h(same)g(algorithm,)
f(but)g(dif)o(ferent)0 3645 y(code.)25 b(Again,)15 b(we)h(used)f(the)h
(TCP/IP)g Ft(TCP)p 1263 3645 25 4 v 29 w(NODELAY)f Fz(op-)0
3745 y(tion)j(to)g(force)g(immediate)f(packet)g(transmission,)h(and)g
(a)g(64)0 3844 y(Kbyte)i(socket)g(buf)o(fer)-5 b(.)83
3944 y(Results)45 b(for)e(the)h(bandwidth)e(microbenchmark)e(are)0
4044 y(shown)22 b(in)g(Figures)g(5)g(and)g(6.)33 b(Fast)23
b(Sockets)f(is)h(able)f(to)g(re-)0 4143 y(alize)e(most)f(of)g(the)h
(available)f(bandwidth)e(of)i(the)h(network.)0 4243 y(On)25
b(the)g(UltraSP)-8 b(ARC,)27 b(the)e(SBus)h(is)g(the)f(limiting)f
(factor)m(,)0 4342 y(rather)19 b(than)h(the)h(network,)d(with)j(a)g
(maximum)d(throughput)0 4442 y(of)j(about)g(45)g(MB/s.)31
b(Of)22 b(this,)g(Active)f(Messages)h(exposes)0 4542
y(35)15 b(MB/s)h(to)g(user)f(applications.)24 b(Fast)16
b(Sockets)f(can)g(realize)0 4641 y(about)j(90\045)h(of)f(the)h(Active)g
(Messages)g(bandwidth,)f(losing)0 4741 y(the)13 b(rest)h(to)g(memory)d
(movement.)23 b(Myrinet')-5 b(s)13 b(TCP/IP)h(only)0
4841 y(realizes)25 b(90\045)h(of)f(the)g(Fast)h(Sockets)g(bandwidth,)e
(limited)0 4940 y(by)c(its)h(high)e(processing)g(overhead.)83
5040 y(T)-6 b(able)21 b(2)f(presents)h(the)f(results)h(of)g(a)g
(least-squares)f(\256t)h(of)0 5139 y(the)f(bandwidth)e(curves)i(to)g
(the)g(equation)694 5331 y Fy(y)f Fr(=)892 5275 y Fy(r)924
5287 y Fk(\245)972 5275 y Fy(x)p 843 5312 216 4 v 843
5388 a(n)895 5395 y Fi(1)p 894 5405 25 3 v 894 5442 a(2)945
5388 y Fr(+)12 b Fy(x)p 2163 3 1412 4 v 2163 20 V 2161
131 4 111 v 2213 84 a Fo(Layer)p 2950 131 V 685 w Fm(r)3101
95 y Fl(\245)p 3266 131 V 3380 84 a Fm(n)3427 88 y Fc(1)p
3427 98 21 3 v 3427 131 a(2)p 3573 131 4 111 v 2161 222
4 92 v 2950 222 V 3002 195 a Fo(\(MB/s\))p 3266 222 V
99 w(\(bytes\))p 3573 222 V 2163 225 1412 4 v 2161 317
4 92 v 2213 289 a(Fast)18 b(Sockets)p 2950 317 V 456
w(32.9)p 3266 317 V 191 w(441)p 3573 317 V 2163 320 1412
4 v 2161 411 4 92 v 2213 384 a(Active)h(Messages)p 2950
411 V 324 w(39.2)p 3266 411 V 191 w(372)p 3573 411 V
2163 415 1412 4 v 2161 506 4 92 v 2213 478 a(TCP/IP)e(\(Myrinet\))p
2950 506 V 298 w(29.6)p 3266 506 V 172 w(2098)p 3573
506 V 2163 509 1412 4 v 2161 601 4 92 v 2213 573 a(TCP/IP)g(\(Fast)h
(Ethernet\))p 2950 601 V 144 w(1)m(1.1)p 3266 601 V 192
w(530)p 3573 601 V 2163 604 1412 4 v 2163 620 V 1988
851 a Fz(T)-6 b(able)21 b(2:)30 b(Least-squares)21 b(regression)f
(analysis)i(of)f(the)h(So-)1988 951 y(laris)36 b(bandwidth)d
(microbenchmark.)70 b Fy(r)3243 963 y Fk(\245)3327 951
y Fz(is)37 b(the)e(maxi-)1988 1050 y(mum)28 b(bandwidth)g(of)h(the)h
(network)e(and)h(is)h(measured)e(in)1988 1150 y(megabytes)k(per)h
(second.)67 b(The)34 b(half-power)d(point)i(\()p Fy(n)3684
1157 y Fi(1)p 3683 1167 25 3 v 3683 1203 a(2)3722 1150
y Fz(\))1988 1268 y(is)26 b(the)g(packet)f(size)h(that)g(delivers)f
(half)g(of)h(the)f(maximum)1988 1368 y(throughput,)17
b(and)j(is)h(reported)e(in)h(bytes.)28 b(TCP/IP)21 b(was)g(run)1988
1467 y(with)33 b(the)f Ft(TCP)p 2458 1467 25 4 v 30 w(NODELAY)g
Fz(option,)i(which)f(attempts)f(to)1988 1567 y(transmit)23
b(packets)g(as)i(soon)e(as)h(possible)g(rather)f(than)g(coa-)1988
1666 y(lescing)c(data)i(together)-5 b(.)1988 1948 y(which)32
b(describes)h(an)g(idealized)g(bandwidth)e(curve.)66
b Fy(r)3702 1960 y Fk(\245)1988 2048 y Fz(is)27 b(the)f(theoretical)g
(maximum)f(bandwidth)f(realizable)i(by)1988 2147 y(the)h
(communications)e(layer)m(,)j(and)f Fy(n)3107 2154 y
Fi(1)p 3106 2164 25 3 v 3106 2201 a(2)3173 2147 y Fz(is)h(the)g
Fy(half-power)1988 2265 y(point)21 b Fz(of)g(the)g(curve.)29
b(The)21 b(half-power)e(point)i(is)h(the)f(trans-)1988
2365 y(fer)i(size)h(at)h(which)e(the)h(communications)d(layer)i(can)h
(real-)1988 2464 y(ize)k(half)g(of)g(the)g(maximum)e(bandwidth.)49
b(A)29 b(lower)e(half-)1988 2564 y(power)13 b(point)h(means)g(a)h
(higher)e(percentage)g(of)h(packets)g(that)1988 2664
y(can)20 b(take)g(advantage)f(of)h(the)h(network')-5
b(s)19 b(bandwidth.)26 b(This)1988 2763 y(is)g(especially)g(important)e
(given)h(the)h(frequency)d(of)j(small)1988 2863 y(messages)15
b(in)h(network)e(traf)o(\256c.)24 b(Fast)17 b(Sockets')e(half-power)
1988 2963 y(point)f(is)i(only)f(18\045)g(lar)o(ger)f(than)h(that)g(of)g
(Active)g(Messages,)1988 3062 y(at)30 b(441)f(bytes.)55
b(Myrinet)29 b(TCP/IP)h(realizes)g(a)g(maximum)1988 3162
y(bandwidth)18 b(10\045)h(less)i(than)f(Fast)h(Sockets)f(but)g(has)g(a)
g(half-)1988 3261 y(power)31 b(point)g(four)g(times)h(lar)o(ger)-5
b(.)62 b(Consequently)-5 b(,)32 b(even)1988 3361 y(though)21
b(both)i(protocols)g(can)g(realize)h(much)f(of)g(the)h(avail-)1988
3461 y(able)i(network)g(bandwidth,)g(TCP/IP)i(needs)e(much)g(lar)o(ger)
1988 3560 y(packets)17 b(to)i(do)e(so,)i(reducing)d(its)k(usefulness)d
(for)h(many)f(ap-)1988 3660 y(plications.)1988 3921 y
Fp(4.2.3)81 b Ft(netperf)19 b Fp(and)i Ft(ttcp)1988 4090
y Fz(T)-6 b(wo)29 b(commonly)e(used)i(microbenchmarks)d(for)j(evaluat-)
1988 4190 y(ing)19 b(network)f(software)g(are)i Ft(netperf)e
Fz(and)h Ft(ttcp)p Fz(.)27 b(Both)1988 4289 y(of)32 b(these)i
(benchmarks)d(are)i(primarily)e(designed)h(to)i(test)1988
4389 y(throughput,)27 b(although)f Ft(netperf)i Fz(also)g(includes)g(a)
h(test)1988 4489 y(of)20 b(request-response)d(throughput,)h(measured)h
(in)h(transac-)1988 4588 y(tions/second.)2071 4695 y(W)-7
b(e)24 b(used)f(a)g(version)f(1.2)h(of)g Ft(ttcp)p Fz(,)g(modi\256ed)f
(to)h(work)1988 4795 y(under)28 b(Solaris,)33 b(and)c
Ft(netperf)g Fz(2.1)m(1)g(for)h(testing.)56 b(The)1988
4895 y(throughput)32 b(results)j(are)g(shown)f(in)i(Figure)e(7,)39
b(and)34 b(our)1988 4994 y(analysis)20 b(is)h(in)f(T)-6
b(able)20 b(3.)2071 5101 y(A)30 b(curious)f(result)h(is)h(that)g(the)f
(half-power)e(points)h(for)1988 5201 y Ft(ttcp)47 b Fz(and)g
Ft(netperf)f Fz(are)i(substantially)e(lower)h(for)1988
5300 y(TCP/IP)15 b(than)g(on)g(our)f(bandwidth)f(microbenchmark.)22
b(One)1988 5400 y(reason)29 b(for)h(this)i(is)f(that)g(the)g(maximum)e
(throughput)e(for)p eop
%%Page: 11 11
11 10 bop 675 2078 a
 currentpoint currentpoint translate 0.9 0.9 scale neg exch neg exch
translate
 675 2078 a @beginspecial 50 @llx
50 @lly 410 @urx 302 @ury 3600 @rwi @setspecial
%%BeginDocument: hpux-bw.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -60 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Times-Roman findfont 180 scalefont setfont
newpath
LTa
1080 451 M
5841 0 V
-5834 0 R
0 4498 V
LTb
LTa
1080 451 M
5841 0 V
LTb
1080 451 M
63 0 V
5778 0 R
-63 0 V
972 451 M
(0) Rshow
LTa
1080 1201 M
5841 0 V
LTb
1080 1201 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(2) Rshow
LTa
1080 1950 M
5841 0 V
LTb
1080 1950 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(4) Rshow
LTa
1080 2700 M
5841 0 V
LTb
1080 2700 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(6) Rshow
LTa
1080 3450 M
5841 0 V
LTb
1080 3450 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(8) Rshow
LTa
1080 4199 M
5841 0 V
LTb
1080 4199 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(10) Rshow
LTa
1080 4949 M
5841 0 V
LTb
1080 4949 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(12) Rshow
LTa
1087 451 M
0 4498 V
LTb
1087 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(0) Cshow
LTa
1799 451 M
0 4498 V
LTb
1799 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(1000) Cshow
LTa
2511 451 M
0 4498 V
LTb
2511 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(2000) Cshow
LTa
3224 451 M
0 4498 V
LTb
3224 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(3000) Cshow
LTa
3936 451 M
0 4498 V
LTb
3936 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(4000) Cshow
LTa
4648 451 M
0 4498 V
LTb
4648 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(5000) Cshow
LTa
5360 451 M
0 4498 V
LTb
5360 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(6000) Cshow
LTa
6072 451 M
0 4498 V
LTb
6072 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(7000) Cshow
LTa
6784 451 M
0 4498 V
LTb
6784 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(8000) Cshow
1080 451 M
5841 0 V
0 4498 V
-5841 0 V
0 -4498 V
180 2700 M
currentpoint gsave translate 90 rotate 0 0 M
(Megabytes per Second) Cshow
grestore
4000 91 M
(Transfer Size) Cshow
LT0
6072 2325 M
(Active Messages) Rshow
6180 2325 M
324 0 V
1088 484 M
2 95 V
3 121 V
6 220 V
11 382 V
23 581 V
45 735 V
91 753 V
183 615 V
364 423 V
730 251 V
729 87 V
729 45 V
729 30 V
730 18 V
1421 27 V
6288 2325 D
1088 484 D
1090 579 D
1093 700 D
1099 920 D
1110 1302 D
1133 1883 D
1178 2618 D
1269 3371 D
1452 3986 D
1816 4409 D
2546 4660 D
3275 4747 D
4004 4792 D
4733 4822 D
5463 4840 D
6884 4867 D
LT1
6072 2145 M
(Fast Sockets) Rshow
6180 2145 M
324 0 V
1088 467 M
2 47 V
3 62 V
6 118 V
11 218 V
23 374 V
45 571 V
91 687 V
183 753 V
364 622 V
730 426 V
729 172 V
729 94 V
729 53 V
730 39 V
1421 49 V
37 -138 V
6288 2145 A
1088 467 A
1090 514 A
1093 576 A
1099 694 A
1110 912 A
1133 1286 A
1178 1857 A
1269 2544 A
1452 3297 A
1816 3919 A
2546 4345 A
3275 4517 A
4004 4611 A
4733 4664 A
5463 4703 A
6884 4752 A
6921 4614 A
LT2
6072 1965 M
(Standard TCP) Rshow
6180 1965 M
324 0 V
1088 452 M
2 3 V
3 3 V
6 7 V
11 14 V
23 29 V
45 58 V
91 114 V
183 229 V
364 459 V
730 917 V
729 915 V
729 955 V
1459 559 V
1421 42 V
37 -13 V
6288 1965 B
1088 452 B
1090 455 B
1093 458 B
1099 465 B
1110 479 B
1133 508 B
1178 566 B
1269 680 B
1452 909 B
1816 1368 B
2546 2285 B
3275 3200 B
4004 4155 B
5463 4714 B
6884 4756 B
6921 4743 B
LT3
6072 1785 M
(Single-Copy TCP) Rshow
6180 1785 M
324 0 V
1088 451 M
2 0 V
3 0 V
6 1 V
11 1 V
23 2 V
45 3 V
91 7 V
183 443 V
364 461 V
730 915 V
729 915 V
729 1000 V
1459 506 V
1421 53 V
37 -15 V
6288 1785 C
1088 451 C
1090 451 C
1093 451 C
1099 452 C
1110 453 C
1133 455 C
1178 458 C
1269 465 C
1452 908 C
1816 1369 C
2546 2284 C
3275 3199 C
4004 4199 C
5463 4705 C
6884 4758 C
6921 4743 C
stroke
grestore
end
showpage
%%EndDocument
 @endspecial 675 2078 a
 currentpoint currentpoint translate 1 0.9 div 1 0.9 div scale neg
exch neg exch translate
 675 2078 a 150 2261 a Fz(Figure)24
b(5:)37 b(Observed)24 b(bandwidth)e(for)j(Fast)h(Sockets,)f(TCP)-9
b(,)26 b(and)e(Active)h(Messages)g(on)f(HP/UX)i(with)f(the)g(Medusa)f
(FDDI)150 2361 y(network)f(interface.)36 b(The)24 b(memory)e(copy)h
(bandwidth)f(of)i(the)g(HP735)f(is)i(greater)d(than)i(the)g(FDDI)g
(network)f(bandwidth,)f(so)150 2460 y(Active)e(Messages)h(and)e(Fast)i
(Sockets)f(can)g(both)g(realize)g(close)g(to)h(the)f(full)g(bandwidth)e
(of)i(the)g(network.)675 4812 y
 currentpoint currentpoint translate 0.9 0.9 scale neg exch neg exch
translate
 675 4812 a @beginspecial
50 @llx 50 @lly 410 @urx 302 @ury 3600 @rwi @setspecial
%%BeginDocument: solaris-bw.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -60 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Times-Roman findfont 180 scalefont setfont
newpath
LTa
1080 451 M
5841 0 V
LTb
LTa
1080 451 M
5841 0 V
LTb
1080 451 M
63 0 V
5778 0 R
-63 0 V
972 451 M
(0) Rshow
LTa
1080 1013 M
5841 0 V
LTb
1080 1013 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(5) Rshow
LTa
1080 1576 M
5841 0 V
LTb
1080 1576 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(10) Rshow
LTa
1080 2138 M
5841 0 V
LTb
1080 2138 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(15) Rshow
LTa
1080 2700 M
5841 0 V
LTb
1080 2700 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(20) Rshow
LTa
1080 3262 M
5841 0 V
LTb
1080 3262 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(25) Rshow
LTa
1080 3825 M
5841 0 V
LTb
1080 3825 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(30) Rshow
LTa
1080 4387 M
5841 0 V
LTb
1080 4387 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(35) Rshow
LTa
1080 4949 M
5841 0 V
LTb
1080 4949 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(40) Rshow
LTa
1079 451 M
0 4498 V
LTb
1079 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(0) Cshow
LTa
1792 451 M
0 4498 V
LTb
1792 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(1000) Cshow
LTa
2505 451 M
0 4498 V
LTb
2505 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(2000) Cshow
LTa
3219 451 M
0 4498 V
LTb
3219 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(3000) Cshow
LTa
3932 451 M
0 4498 V
LTb
3932 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(4000) Cshow
LTa
4645 451 M
0 4498 V
LTb
4645 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(5000) Cshow
LTa
5358 451 M
0 4498 V
LTb
5358 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(6000) Cshow
LTa
6071 451 M
0 4498 V
LTb
6071 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(7000) Cshow
LTa
6784 451 M
0 4498 V
LTb
6784 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(8000) Cshow
1080 451 M
5841 0 V
0 4498 V
-5841 0 V
0 -4498 V
180 2700 M
currentpoint gsave translate 90 rotate 0 0 M
(Megabytes per Second) Cshow
grestore
4000 91 M
(Transfer Size) Cshow
LT0
6071 1463 M
(Fast Sockets) Rshow
6179 1463 M
324 0 V
1080 457 M
5 37 V
6 39 V
11 66 V
23 167 V
46 268 V
91 431 V
182 932 V
366 972 V
730 447 V
730 126 V
730 42 V
730 -99 V
731 64 V
1460 55 V
6287 1463 D
1080 457 D
1085 494 D
1091 533 D
1102 599 D
1125 766 D
1171 1034 D
1262 1465 D
1444 2397 D
1810 3369 D
2540 3816 D
3270 3942 D
4000 3984 D
4730 3885 D
5461 3949 D
6921 4004 D
LT1
6071 1283 M
(Active Messages) Rshow
6179 1283 M
324 0 V
1080 461 M
5 70 V
6 77 V
11 163 V
23 306 V
46 496 V
91 699 V
182 565 V
366 1101 V
730 284 V
730 101 V
730 92 V
6287 1283 A
1080 461 A
1085 531 A
1091 608 A
1102 771 A
1125 1077 A
1171 1573 A
1262 2272 A
1444 2837 A
1810 3938 A
2540 4222 A
3270 4323 A
4000 4415 A
LT2
6071 1103 M
(Myrinet TCP/IP) Rshow
6179 1103 M
324 0 V
1080 452 M
5 5 V
6 6 V
11 11 V
23 22 V
46 59 V
91 103 V
182 290 V
366 613 V
730 919 V
730 -120 V
730 529 V
730 -429 V
731 226 V
1460 443 V
6287 1103 B
1080 452 B
1085 457 B
1091 463 B
1102 474 B
1125 496 B
1171 555 B
1262 658 B
1444 948 B
1810 1561 B
2540 2480 B
3270 2360 B
4000 2889 B
4730 2460 B
5461 2686 B
6921 3129 B
LT3
6071 923 M
(100 Mbps Ethernet TCP/IP) Rshow
6179 923 M
324 0 V
1080 452 M
5 8 V
6 8 V
11 18 V
23 29 V
46 67 V
91 122 V
182 301 V
366 370 V
730 233 V
730 4 V
730 27 V
730 -6 V
731 -5 V
1460 7 V
6287 923 C
1080 452 C
1085 460 C
1091 468 C
1102 486 C
1125 515 C
1171 582 C
1262 704 C
1444 1005 C
1810 1375 C
2540 1608 C
3270 1612 C
4000 1639 C
4730 1633 C
5461 1628 C
6921 1635 C
stroke
grestore
end
showpage
%%EndDocument
 @endspecial 675 4812 a
 currentpoint currentpoint translate 1 0.9 div 1 0.9 div scale neg
exch neg exch translate
 675 4812 a 150 4994 a Fz(Figure)15
b(6:)25 b(Observed)14 b(bandwidth)g(for)h(Fast)h(Sockets,)g(TCP)-9
b(,)16 b(and)f(Active)h(Messages)g(on)f(Solaris)g(using)h(the)f
(Myrinet)g(local-area)150 5094 y(network.)24 b(The)17
b(bus)g(limits)h(the)f(maximum)f(throughput)e(to)j(45MB/s.)26
b(Fast)19 b(Sockets)e(is)h(able)f(to)g(realize)g(much)f(of)h(the)g
(available)150 5194 y(bandwidth)h(of)i(the)g(network)f(because)h(of)g
(receive)f(posting.)p eop
%%Page: 12 12
12 11 bop 825 1470 a
 currentpoint currentpoint translate 0.7 0.7 scale neg exch neg exch
translate
 825 1470 a @beginspecial 50 @llx
50 @lly 410 @urx 302 @ury 3600 @rwi @setspecial
%%BeginDocument: ttcp-netperf.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -60 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Times-Roman findfont 180 scalefont setfont
newpath
LTa
1080 451 M
5841 0 V
-5841 0 R
0 4498 V
LTb
LTa
1080 451 M
5841 0 V
LTb
1080 451 M
63 0 V
5778 0 R
-63 0 V
972 451 M
(0) Rshow
LTa
1080 1013 M
5841 0 V
LTb
1080 1013 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(5000) Rshow
LTa
1080 1576 M
5841 0 V
LTb
1080 1576 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(10000) Rshow
LTa
1080 2138 M
5841 0 V
LTb
1080 2138 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(15000) Rshow
LTa
1080 2700 M
5841 0 V
LTb
1080 2700 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(20000) Rshow
LTa
1080 3262 M
5841 0 V
LTb
1080 3262 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(25000) Rshow
LTa
1080 3825 M
5841 0 V
LTb
1080 3825 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(30000) Rshow
LTa
1080 4387 M
5841 0 V
LTb
1080 4387 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(35000) Rshow
LTa
1080 4949 M
5841 0 V
LTb
1080 4949 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(40000) Rshow
LTa
1080 451 M
0 4498 V
LTb
1080 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(0) Cshow
LTa
1793 451 M
0 4498 V
LTb
1793 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(2000) Cshow
LTa
2506 451 M
0 4498 V
LTb
2506 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(4000) Cshow
LTa
3219 451 M
0 4498 V
LTb
3219 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(6000) Cshow
LTa
3932 451 M
0 4498 V
LTb
3932 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(8000) Cshow
LTa
4645 451 M
0 4498 V
LTb
4645 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(10000) Cshow
LTa
5358 451 M
0 4498 V
LTb
5358 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(12000) Cshow
LTa
6071 451 M
0 4498 V
LTb
6071 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(14000) Cshow
LTa
6784 451 M
0 4498 V
LTb
6784 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(16000) Cshow
1080 451 M
5841 0 V
0 4498 V
-5841 0 V
0 -4498 V
180 2700 M
currentpoint gsave translate 90 rotate 0 0 M
(Throughput \(Kilobytes per Second\)) Cshow
grestore
4000 91 M
(Transfer Size) Cshow
LT0
6071 2025 M
(Fast Sockets: ttcp) Rshow
6179 2025 M
324 0 V
1085 568 M
6 134 V
11 195 V
23 397 V
46 660 V
91 644 V
91 315 V
92 244 V
365 800 V
365 325 V
365 259 V
365 -80 V
365 79 V
365 13 V
365 132 V
730 -45 V
731 27 V
730 -18 V
730 14 V
6287 2025 D
1085 568 D
1091 702 D
1102 897 D
1125 1294 D
1171 1954 D
1262 2598 D
1353 2913 D
1445 3157 D
1810 3957 D
2175 4282 D
2540 4541 D
2905 4461 D
3270 4540 D
3635 4553 D
4000 4685 D
4730 4640 D
5461 4667 D
6191 4649 D
6921 4663 D
LT1
6071 1845 M
(Fast Sockets: netperf) Rshow
6179 1845 M
324 0 V
1080 457 M
5 79 V
6 69 V
11 165 V
23 286 V
46 444 V
91 753 V
183 916 V
365 906 V
365 239 V
365 144 V
365 203 V
365 155 V
365 54 V
365 46 V
730 -39 V
731 -23 V
730 -25 V
730 22 V
6287 1845 A
1080 457 A
1085 536 A
1091 605 A
1102 770 A
1125 1056 A
1171 1500 A
1262 2253 A
1445 3169 A
1810 4075 A
2175 4314 A
2540 4458 A
2905 4661 A
3270 4816 A
3635 4870 A
4000 4916 A
4730 4877 A
5461 4854 A
6191 4829 A
6921 4851 A
LT2
6071 1665 M
(Myrinet TCP/IP: ttcp) Rshow
6179 1665 M
324 0 V
1085 511 M
6 56 V
11 104 V
23 156 V
46 226 V
91 294 V
91 283 V
92 168 V
365 489 V
365 -67 V
365 117 V
365 -18 V
365 207 V
365 149 V
365 153 V
730 -503 V
731 175 V
730 14 V
730 170 V
6287 1665 B
1085 511 B
1091 567 B
1102 671 B
1125 827 B
1171 1053 B
1262 1347 B
1353 1630 B
1445 1798 B
1810 2287 B
2175 2220 B
2540 2337 B
2905 2319 B
3270 2526 B
3635 2675 B
4000 2828 B
4730 2325 B
5461 2500 B
6191 2514 B
6921 2684 B
LT3
6071 1485 M
(Myrinet TCP/IP: netperf) Rshow
6179 1485 M
324 0 V
1080 454 M
5 43 V
6 41 V
11 79 V
23 123 V
46 200 V
91 267 V
183 511 V
365 521 V
365 27 V
365 264 V
365 -2 V
365 251 V
365 239 V
365 205 V
730 -261 V
731 67 V
726 -360 V
734 127 V
6287 1485 C
1080 454 C
1085 497 C
1091 538 C
1102 617 C
1125 740 C
1171 940 C
1262 1207 C
1445 1718 C
1810 2239 C
2175 2266 C
2540 2530 C
2905 2528 C
3270 2779 C
3635 3018 C
4000 3223 C
4730 2962 C
5461 3029 C
6187 2669 C
6921 2796 C
stroke
grestore
end
showpage
%%EndDocument
 @endspecial 825 1470 a
 currentpoint currentpoint translate 1 0.7 div 1 0.7 div scale neg
exch neg exch translate
 825 1470 a 87 1653 a Fz(Figure)20
b(7:)55 b Ft(Ttcp)20 b Fz(and)f Ft(netperf)h Fz(bandwidth)e
(measurements)h(on)g(Solaris)i(for)e(Fast)j(Sockets)e(and)f(Myrinet)g
(TCP/IP)-9 b(.)p 278 1923 1206 4 v 278 1940 V 276 2050
4 111 v 328 2003 a Fo(Program/)p 860 2050 V 376 w Fm(r)1011
2014 y Fl(\245)p 1175 2050 V 1290 2003 a Fm(n)1337 2007
y Fc(1)p 1337 2017 21 3 v 1337 2050 a(2)p 1483 2050 4
111 v 276 2142 4 92 v 328 2114 a Fo(Communication)p 860
2142 V 103 w(\(MB/s\))p 1175 2142 V 100 w(\(bytes\))p
1483 2142 V 276 2233 V 328 2206 a(Layer)p 860 2233 V
1175 2233 V 1483 2233 V 278 2236 1206 4 v 276 2328 4
92 v 328 2300 a Fb(ttcp)p 1483 2328 V 278 2331 1206 4
v 276 2422 4 92 v 328 2395 a Fo(Fast)18 b(Sockets)p 860
2422 V 232 w(38.57)p 1175 2422 V 145 w(560.7)p 1483 2422
V 276 2514 V 328 2486 a(Myrinet)i(TCP/IP)p 860 2514 V
121 w(19.59)p 1175 2514 V 145 w(687.5)p 1483 2514 V 278
2517 1206 4 v 276 2608 4 92 v 328 2581 a Fb(netperf)p
1483 2608 V 278 2612 1206 4 v 276 2703 4 92 v 328 2675
a Fo(Fast)e(Sockets)p 860 2703 V 232 w(41.57)p 1175 2703
V 145 w(785.7)p 1483 2703 V 276 2794 V 328 2767 a(Myrinet)i(TCP/IP)p
860 2794 V 121 w(23.72)p 1175 2794 V 155 w(1)m(189)p
1483 2794 V 278 2797 1206 4 v 278 2814 V 0 3045 a Fz(T)-6
b(able)33 b(3:)108 b(Least-squares)33 b(regression)f(analysis)i(of)f
(the)0 3144 y Ft(ttcp)23 b Fz(and)g Ft(netperf)g Fz(microbenchmarks.)33
b(These)23 b(tests)0 3244 y(were)51 b(run)g(on)g(the)h(Solaris)f
(2.5.1/Myrinet)e(platform.)0 3344 y(TCP/IP)25 b(half-power)c(point)j
(measures)f(are)h(lower)f(than)h(in)0 3443 y(T)-6 b(able)29
b(2)h(because)f(both)f Ft(ttcp)i Fz(and)f Ft(netperf)f
Fz(attempt)0 3543 y(to)35 b(improve)f(small-packet)g(bandwidth)f(at)j
(the)f(price)f(of)0 3643 y(small-packet)19 b(latency)-5
b(.)0 3973 y(TCP/IP)30 b(is)g(only)e(about)h(50\26160\045)e(that)i(of)g
(Fast)h(Sockets.)0 4073 y(Another)17 b(reason)g(is)i(that)f(TCP)h
(defaults)e(to)h(batching)f(small)0 4173 y(data)k(writes)g(in)g(order)f
(to)h(maximize)f(throughput)d(\(the)k Fy(Na-)0 4272 y(gle)29
b(algorithm)p Fz(\))f([Nagle)g(1984],)h(and)g(these)g(tests)h(do)e(not)
0 4372 y(disable)22 b(the)f(algorithm)f(\(unlike)h(our)g
(microbenchmarks\);)0 4471 y(however)m(,)h(this)h(behavior)e(trades)i
(of)o(f)f(small-packet)f(band-)0 4571 y(width)16 b(for)f(higher)g
(round-trip)e(latencies,)k(as)g(data)f(is)h(held)f(at)0
4671 y(the)k(sender)g(in)g(an)g(attempt)g(to)g(coalesce)g(data.)83
4802 y(The)71 b Ft(netperf)f Fz(microbenchmark)d(also)k(has)h(a)0
4902 y(\252request-response\272)37 b(test,)45 b(which)39
b(reports)g(the)h(number)0 5001 y(of)33 b(transactions)g(per)g(second)f
(a)i(communications)d(stack)0 5101 y(is)f(capable)e(of)h(for)f(a)i
(given)e(request)g(and)h(response)f(size.)0 5201 y(There)34
b(are)g(two)h(permutations)d(of)j(this)g(test,)k(one)34
b(using)0 5300 y(an)42 b(existing)f(connection)e(and)j(one)f(that)h
(establishes)g(a)0 5400 y(connection)24 b(every)h(time;)k(the)e(latter)
f(closely)g(mimics)g(the)1988 2003 y(behavior)h(of)i(protocols)f(such)h
(as)g(HTTP)-9 b(.)29 b(The)g(results)h(of)1988 2102 y(these)18
b(tests)h(are)f(reported)e(in)i(transactions)f(per)h(second)f(and)1988
2202 y(shown)i(in)h(Figure)g(8.)2071 2310 y(The)48 b(request-response)e
(test)j(shows)g(Fast)g(Sockets')1988 2410 y(Achilles)20
b(heel:)28 b(its)22 b(connection)c(mechanism.)27 b(While)21
b(Fast)1988 2510 y(Sockets)d(does)h(better)f(than)g(TCP/IP)i(for)e
(request-response)1988 2609 y(behavior)d(with)j(a)g(constant)f
(connection)e(\(Figure)i(8\(a\)\),)g(in-)1988 2709 y(troducing)28
b(connection)g(startup)i(costs)h(\(Figure)e(8\(b\)\))g(re-)1988
2808 y(duces)19 b(or)g(eliminates)h(this)g(advantage)e(dramatically)-5
b(.)24 b(This)1988 2908 y(points)h(out)h(the)h(need)e(for)h(an)g(ef)o
(\256cient,)h(high-speed)d(con-)1988 3008 y(nection)19
b(mechanism.)1988 3293 y Fu(4.3)99 b(Applications)1988
3465 y Fz(Microbenchmarks)26 b(are)31 b(useful)f(for)f(evaluating)g
(the)i(raw)1988 3565 y(performance)16 b(characteristics)i(of)h(a)g
(communications)e(im-)1988 3664 y(plementation,)23 b(but)h(raw)g
(performance)e(does)i(not)g(express)1988 3764 y(the)29
b(utility)g(of)f(a)i(communications)c(layer)-5 b(.)54
b(Instead,)30 b(it)g(is)1988 3863 y(important)21 b(to)i(characterize)e
(the)i(dif)o(\256culty)f(of)g(integrating)1988 3963 y(the)g
(communications)d(layer)j(with)g(existing)g(applications,)1988
4063 y(and)d(the)i(performance)c(improvements)h(realized)i(by)g(those)
1988 4162 y(applications.)58 b(This)32 b(section)f(examines)f(how)h
(well)h(Fast)1988 4262 y(Sockets)25 b(supports)g(the)h(real-life)f
(demands)g(of)h(a)g(network)1988 4362 y(application.)1988
4630 y Fp(4.3.1)81 b(File)20 b(T)-6 b(ransfer)1988 4802
y Fz(File)24 b(transfer)e(is)j(traditionally)c(considered)h(a)i
(bandwidth-)1988 4902 y(intensive)14 b(application.)24
b(However)m(,)14 b(the)h(FTP)h(protocol)d(that)1988 5001
y(is)23 b(commonly)c(used)j(for)g(\256le)g(transfer)g(still)h(has)f(a)h
(request-)1988 5101 y(response)e(nature.)33 b(Further)m(,)22
b(we)h(wanted)f(to)h(see)g(what)g(im-)1988 5201 y(provements)16
b(in)j(performance,)d(if)j(any)-5 b(,)18 b(would)g(be)g(realized)1988
5300 y(by)f(using)g(Fast)i(Sockets)f(for)f(an)h(application)f(it)i(was)
f(not)g(in-)1988 5400 y(tended)h(for)-5 b(.)p eop
%%Page: 13 13
13 12 bop 348 1163 a
 currentpoint currentpoint translate 0.7 0.8 scale neg exch neg exch
translate
 348 1163 a @beginspecial 79 @llx
556 @lly 340 @urx 718 @ury 2610 @rwi @setspecial
%%BeginDocument: np-rr.eps
%ADO_PaperArea: -50 -51 3250 2499
%ADO_ImageableArea: 0 0 3200 2448
/md 158 dict def md begin
/currentpacking where {pop /sc_oldpacking currentpacking def true setpacking}if
/bd{bind def}bind def
/xdf{exch def}bd
/xs{exch store}bd
/ld{load def}bd
/Z{0 def}bd
/T/true
/F/false
/:L/lineto
/lw/setlinewidth
/:M/moveto
/rl/rlineto
/rm/rmoveto
/:C/curveto
/:T/translate
/:K/closepath
/:mf/makefont
/gS/gsave
/gR/grestore
/np/newpath
14{ld}repeat
/$m matrix def
/av 81 def
/por true def
/normland false def
/psb-nosave{}bd
/pse-nosave{}bd
/us Z
/psb{/us save store}bd
/pse{us restore}bd
/level2
/languagelevel where
{
pop languagelevel 2 ge
}{
false
}ifelse
def
/featurecleanup
{
stopped
cleartomark
countdictstack exch sub dup 0 gt
{
{end}repeat
}{
pop
}ifelse
}bd
/noload Z
/startnoload
{
{/noload save store}if
}bd
/endnoload
{
{noload restore}if
}bd
level2 startnoload
/setjob
{
statusdict/jobname 3 -1 roll put
}bd
/setcopies
{
userdict/#copies 3 -1 roll put
}bd
level2 endnoload level2 not startnoload
/setjob
{
1 dict begin/JobName xdf currentdict end setuserparams
}bd
/setcopies
{
1 dict begin/NumCopies xdf currentdict end setpagedevice
}bd
level2 not endnoload
/pm Z
/mT Z
/sD Z
/realshowpage Z
/initializepage
{
/pm save store mT concat
}bd
/endp
{
pm restore showpage
}def
/$c/DeviceRGB def
/rectclip where
{
pop/rC/rectclip ld
}{
/rC
{
np 4 2 roll
:M
1 index 0 rl
0 exch rl
neg 0 rl
:K
clip np
}bd
}ifelse
/rectfill where
{
pop/rF/rectfill ld
}{
/rF
{
gS
np
4 2 roll
:M
1 index 0 rl
0 exch rl
neg 0 rl
fill
gR
}bd
}ifelse
/rectstroke where
{
pop/rS/rectstroke ld
}{
/rS
{
gS
np
4 2 roll
:M
1 index 0 rl
0 exch rl
neg 0 rl
:K
stroke
gR
}bd
}ifelse
/G/setgray ld
/:F/setrgbcolor ld
level2 startnoload
/patfreq Z
/patangle Z
/bk Z
/fg Z
/docolorscreen Z
/graystring Z
/pattransf{}def
/initQDpatterns
{
/patfreq 9.375 store
/patangle
1 0 $m defaultmatrix dtransform
exch atan
por not
{90 add}if
normland{180 add}if
store
:a
}def
/docolorscreen
/setcolorscreen where
{
pop/currentcolorscreen where
{
pop/setcmykcolor where
{
pop true
}{
false
}ifelse
}{
false
}ifelse
}{
false
}ifelse
def
/setgraypattern
{
/graystring xs
patfreq
patangle
{
1 add
4 mul
cvi
graystring
exch get
exch
1 add 4 mul
cvi
7 sub
bitshift
1 and
}setscreen
64 div setgray
}bd
/:b
{
/pattransf load settransfer
pop pop pop
setgraypattern
}bd
docolorscreen startnoload
/screensave 5 array def
/:a{currentgray currentscreen currenttransfer screensave astore pop}bd
/:e{screensave aload pop settransfer setscreen setgray}bd
/:d
{
pop pop pop
/pattransf load settransfer
setgraypattern 8{pop}repeat
}bd
/:c
/:d ld
docolorscreen endnoload docolorscreen not startnoload
/screensave 20 array def
/:a{currentcmykcolor currentcolorscreen currentcolortransfer screensave astore pop}bd
/:e{screensave aload pop setcolortransfer setcolorscreen setcmykcolor}bd
/rstring Z
/grstring Z
/blstring Z
/convroll{64 div 4 -1 roll}bd
/setcolorpattern
{
/graystring xs
/blstring xs
/grstring xs
/rstring xs
patfreq
patangle
{
1 add 4 mul cvi rstring
exch get exch 1 add 4 mul
cvi 7 sub bitshift 1 and
}
patfreq
patangle
{
1 add 4 mul cvi grstring
exch get exch 1 add 4 mul
cvi 7 sub bitshift 1 and
}
patfreq
patangle
{
1 add 4 mul cvi blstring
exch get exch 1 add 4 mul
cvi 7 sub bitshift 1 and
}
patfreq
patangle
{
1 add 4 mul cvi graystring
exch get exch 1 add 4 mul
cvi 7 sub bitshift 1 and
}
setcolorscreen
convroll convroll convroll convroll
setcmykcolor
}bd
/:d
{
pop pop pop
/pattransf load settransfer
pop pop setcolorpattern
}bd
/:c
/:d ld
docolorscreen not endnoload
level2  endnoload level2 not startnoload
/pmtx Z
/BGnd Z
/FGnd Z
/PaintData Z
/PatternMtx Z
/PatHeight Z
/PatWidth Z
/$d Z
/savecolor 4 array def
/savecolorspace Z
/:a{
mark 0 0 0 currentcolor savecolor astore pop cleartomark
/savecolorspace currentcolorspace store
}bd
/:e{
savecolorspace setcolorspace
mark savecolor aload pop setcolor cleartomark
}bd
/initQDpatterns
{
gS
initmatrix
mT dup 4 get exch 5 get :T
1 0 dtransform round exch round exch idtransform
dup mul exch dup mul exch add sqrt
0 1 dtransform round exch round exch idtransform
dup mul exch dup mul exch add sqrt
neg
scale
0
por not{90 add}if
normland{180 add}if
rotate
matrix currentmatrix
gR
/pmtx xs
:a
}bd
/:t
{
14 dict begin
/BGnd xdf
/FGnd xdf
/PaintData xdf
/PatternType 1 def
/PaintType 1 def
/BBox[0 0 1 1]def
/TilingType 1 def
/XStep 1 def
/YStep 1 def
/PatternMtx[24 0 0 24 0 0]def
/PaintProc
BGnd null ne
{
{
begin
BGnd aload pop :F
0 0 1 1 rF
FGnd aload pop :F
24 24 true PatternMtx PaintData imagemask
end
}
}{
{
begin
FGnd aload pop :F
24 24 true PatternMtx PaintData imagemask
end
}
}ifelse
def
currentdict
PatternMtx
end
gS $c setcolorspace pmtx setmatrix makepattern gR
}bd
/:u
{
14 dict begin
/$d 8 dict def
/PatternType 1 def
/PaintType 1 def
/BBox[0 0 1 1]def
/TilingType 1 def
/XStep 1 def
/YStep 1 def
/PaintData xdf
/PatHeight xdf
/PatWidth xdf
/PatternMtx[PatWidth 0 0 PatHeight 0 0]def
$d begin
/ImageType 1 def
/MultipleDataSource false def
/Height PatHeight def
/Width PatWidth def
/Decode[0 1 0 1 0 1]def
/ImageMatrix PatternMtx def
/DataSource PaintData def
/BitsPerComponent 8 def
end
/PaintProc
{
begin
$d image
end
}def
currentdict
PatternMtx
end
gS $c setcolorspace pmtx setmatrix makepattern gR
}bd
/bk[1 1 1]def
/fg[0 0 0]def
/:b{
:t
setpattern
pop pop
}bd
/:d{
:t
setpattern
10{pop}repeat
}bd
/:c{
:u
setpattern
10{pop}repeat
}bd
level2 not endnoload
/@a
{
np :M 0 rl :L 0 exch rl 0 rl :L fill
}bd
/@b
{
np :M 0 rl 0 exch rl :L 0 rl 0 exch rl fill
}bd
/arct where
{
pop
}{
/arct
{
arcto pop pop pop pop
}bd
}ifelse
/x1 Z
/x2 Z
/y1 Z
/y2 Z
/rad Z
/@q
{
/rad xs
/y2 xs
/x2 xs
/y1 xs
/x1 xs
np
x2 x1 add 2 div y1 :M
x2 y1 x2 y2 rad arct
x2 y2 x1 y2 rad arct
x1 y2 x1 y1 rad arct
x1 y1 x2 y1 rad arct
fill
}bd
/@s
{
/rad xs
/y2 xs
/x2 xs
/y1 xs
/x1 xs
np
x2 x1 add 2 div y1 :M
x2 y1 x2 y2 rad arct
x2 y2 x1 y2 rad arct
x1 y2 x1 y1 rad arct
x1 y1 x2 y1 rad arct
:K
stroke
}bd
/@i
{
np 0 360 arc fill
}bd
/@j
{
gS
np
:T
scale
0 0 .5 0 360 arc
fill
gR
}bd
/@e
{
np
0 360 arc
:K
stroke
}bd
/@f
{
np
$m currentmatrix
pop
:T
scale
0 0 .5 0 360 arc
:K
$m setmatrix
stroke
}bd
/@k
{
gS
np
:T
0 0 :M
0 0 5 2 roll
arc fill
gR
}bd
/@l
{
gS
np
:T
0 0 :M
scale
0 0 .5 5 -2 roll arc
fill
gR
}bd
/@m
{
np
arc
stroke
}bd
/@n
{
np
$m currentmatrix
pop
:T
scale
0 0 .5 5 -2 roll arc
$m setmatrix
stroke
}bd
/S/show ld
/A{
0.0 exch ashow
}bd
/R{
0.0 exch 32 exch widthshow
}bd
/W{
0.0 3 1 roll widthshow
}bd
/J{
0.0 32 4 2 roll 0.0 exch awidthshow
}bd
/V{
0.0 4 1 roll 0.0 exch awidthshow
}bd
/fcflg true def
/fc{
fcflg{
vmstatus exch sub 50000 lt{
(%%[ Warning: Running out of memory ]%%\r)print flush/fcflg false store
}if pop
}if
}bd
/$f[1 0 0 -1 0 0]def
/:ff{$f :mf}bd
/MacEncoding StandardEncoding 256 array copy def
MacEncoding 39/quotesingle put
MacEncoding 96/grave put
/Adieresis/Aring/Ccedilla/Eacute/Ntilde/Odieresis/Udieresis/aacute
/agrave/acircumflex/adieresis/atilde/aring/ccedilla/eacute/egrave
/ecircumflex/edieresis/iacute/igrave/icircumflex/idieresis/ntilde/oacute
/ograve/ocircumflex/odieresis/otilde/uacute/ugrave/ucircumflex/udieresis
/dagger/degree/cent/sterling/section/bullet/paragraph/germandbls
/registered/copyright/trademark/acute/dieresis/notequal/AE/Oslash
/infinity/plusminus/lessequal/greaterequal/yen/mu/partialdiff/summation
/product/pi/integral/ordfeminine/ordmasculine/Omega/ae/oslash
/questiondown/exclamdown/logicalnot/radical/florin/approxequal/Delta/guillemotleft
/guillemotright/ellipsis/space/Agrave/Atilde/Otilde/OE/oe
/endash/emdash/quotedblleft/quotedblright/quoteleft/quoteright/divide/lozenge
/ydieresis/Ydieresis/fraction/currency/guilsinglleft/guilsinglright/fi/fl
/daggerdbl/periodcentered/quotesinglbase/quotedblbase/perthousand
/Acircumflex/Ecircumflex/Aacute/Edieresis/Egrave/Iacute/Icircumflex/Idieresis/Igrave
/Oacute/Ocircumflex/apple/Ograve/Uacute/Ucircumflex/Ugrave/dotlessi/circumflex/tilde
/macron/breve/dotaccent/ring/cedilla/hungarumlaut/ogonek/caron
MacEncoding 128 128 getinterval astore pop
level2 startnoload
/copyfontdict
{
findfont dup length dict
begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
}bd
level2 endnoload level2 not startnoload
/copyfontdict
{
findfont dup length dict
copy
begin
}bd
level2 not endnoload
md/fontname known not{
/fontname/customfont def
}if
/Encoding Z
/:mre
{
copyfontdict
/Encoding MacEncoding def
fontname currentdict
end
definefont :ff def
}bd
/:bsr
{
copyfontdict
/Encoding Encoding 256 array copy def
Encoding dup
}bd
/pd{put dup}bd
/:esr
{
pop pop
fontname currentdict
end
definefont :ff def
}bd
/scf
{
scalefont def
}bd
/scf-non
{
$m scale :mf setfont
}bd
/ps Z
/fz{/ps xs}bd
/sf/setfont ld
/cF/currentfont ld
/mbf
{
/makeblendedfont where
{
pop
makeblendedfont
/ABlend exch definefont
}{
pop
}ifelse
def
}def
/currentpacking where {pop sc_oldpacking setpacking}if
end		% md
md begin
/pT[1 0 0 -1 12.239 779.968]def/mT[.24 0 0 -.24 12.239 779.968]def
initQDpatterns
/sD 16 dict def
/f0_1/Helvetica :mre
/f0_50 f0_1 50 scf
/f1_1/Times-Roman :mre
/f1_50 f1_1 50 scf
/Courier findfont[10 0 0 -10 0 0]:mf setfont
initializepage
gS 0 0 2448 3200 rC
532 348 671 369 rC
532 623.004 -.004 .004 1203.004 623 .004 532 623 @a
532 533.004 -.004 .004 1203.004 533 .004 532 533 @a
532 442.004 -.004 .004 1203.004 442 .004 532 442 @a
532 352.004 -.004 .004 1203.004 352 .004 532 352 @a
gR
.5 G
3 lw
gS 174 250 1328 744 rC
531.5 351.5 672 362 rS
:a
32 <3399CC663399CC66
><333333999999CCCCCC666666333333999999CCCCCC666666
>fg bk :b
532 344 679 369 rC
559 393 38 321 rF
:e
0 G
559.5 393.5 37 320 rS
:a
32 <3399CC663399CC66
><333333999999CCCCCC666666333333999999CCCCCC666666
>fg bk :b
727 423 38 291 rF
:e
0 G
727.5 423.5 37 290 rS
:a
32 <3399CC663399CC66
><333333999999CCCCCC666666333333999999CCCCCC666666
>fg bk :b
895 484 38 230 rF
:e
0 G
895.5 484.5 37 229 rS
:a
32 <3399CC663399CC66
><333333999999CCCCCC666666333333999999CCCCCC666666
>fg bk :b
1062 668 38 46 rF
:e
0 G
1062.5 668.5 37 45 rS
1 G
596 679 39 35 rF
0 G
596.5 679.5 38 34 rS
1 G
764 680 39 34 rF
0 G
764.5 680.5 38 33 rS
1 G
932 681 38 33 rF
0 G
932.5 681.5 37 32 rS
1 G
1099 695 39 19 rF
0 G
1099.5 695.5 38 18 rS
:a
32 <0000FFFF0000FFFF
><000000000000FFFFFFFFFFFF000000000000FFFFFFFFFFFF
>fg bk :b
634 660 38 54 rF
:e
0 G
634.5 660.5 37 53 rS
:a
32 <0000FFFF0000FFFF
><000000000000FFFFFFFFFFFF000000000000FFFFFFFFFFFF
>fg bk :b
802 664 38 50 rF
:e
0 G
802.5 664.5 37 49 rS
:a
32 <0000FFFF0000FFFF
><000000000000FFFFFFFFFFFF000000000000FFFFFFFFFFFF
>fg bk :b
969 664 38 50 rF
:e
0 G
969.5 664.5 37 49 rS
:a
32 <0000FFFF0000FFFF
><000000000000FFFFFFFFFFFF000000000000FFFFFFFFFFFF
>fg bk :b
1137 695 38 19 rF
:e
0 G
1137.5 695.5 37 18 rS
gR
0 G
gS 174 250 1328 744 rC
-.004 -.004 532.004 713.004 .004 .004 532 352 @b
518 713.004 -.004 .004 532.004 713 .004 518 713 @a
518 623.004 -.004 .004 532.004 623 .004 518 623 @a
518 533.004 -.004 .004 532.004 533 .004 518 533 @a
518 442.004 -.004 .004 532.004 442 .004 518 442 @a
518 352.004 -.004 .004 532.004 352 .004 518 352 @a
532 713.004 -.004 .004 1203.004 713 .004 532 713 @a
-.004 -.004 532.004 727.004 .004 .004 532 699 @b
-.004 -.004 700.004 727.004 .004 .004 700 699 @b
-.004 -.004 868.004 727.004 .004 .004 868 699 @b
-.004 -.004 1035.004 727.004 .004 .004 1035 699 @b
-.004 -.004 1203.004 727.004 .004 .004 1203 699 @b
470 726 :M
f0_50 sf
(0)S
386 636 :M
-.06(5000)A
358 546 :M
(10000)S
358 455 :M
(15000)S
358 365 :M
(20000)S
gR
.004 lw
gS 0 0 2448 3200 rC
gS
627 845 :T
270 rotate
-627 -845 :T
627 845 :M
f0_50 sf
-.066(  1,1)A
gR
gS
763 845 :T
270 rotate
-763 -845 :T
763 845 :M
f0_50 sf
-.066(  64,)A
gR
gS
826 824 :T
270 rotate
-826 -824 :T
826 824 :M
f0_50 sf
-.591(64)A
gR
gS
930 859 :T
270 rotate
-930 -859 :T
930 859 :M
f0_50 sf
-.042( 100,)A
gR
gS
993 845 :T
270 rotate
-993 -845 :T
993 845 :M
f0_50 sf
-.193(200)A
gR
gS
1098 859 :T
270 rotate
-1098 -859 :T
1098 859 :M
f0_50 sf
-.042( 128,)A
gR
gS
1161 859 :T
270 rotate
-1161 -859 :T
1161 859 :M
f0_50 sf
-.06(8192)A
gR
599 866 537 77 rC
606 917 :M
f1_50 sf
-.019(Request-Response Pattern)A
gR
gS 0 0 2448 3200 rC
gS
325 779 :T
270 rotate
-325 -779 :T
325 779 :M
f1_50 sf
-.011(Transactions Per Second)A
gR
1 G
174 250 1328 744 rC
977 316 385 194 rF
0 G
976.5 315.5 386 195 rS
:a
32 <3399CC663399CC66
><333333999999CCCCCC666666333333999999CCCCCC666666
>fg bk :b
977 316 385 193 rC
990 335 26 26 rF
:e
0 G
3 lw
990.5 335.5 25 25 rS
1026 361 :M
1 G
f1_50 sf
0 G
-.031(Fast Sockets)A
1 G
990 400 26 26 rF
0 G
990.5 400.5 25 25 rS
1026 426 :M
-.044(Myrinet TCP/IP)A
:a
32 <0000FFFF0000FFFF
><000000000000FFFFFFFFFFFF000000000000FFFFFFFFFFFF
>fg bk :b
990 465 26 26 rF
:e
0 G
990.5 465.5 25 25 rS
1026 491 :M
-.014(Fast Ethernet)A
endp
end		% md
%%EndDocument
 @endspecial 348 1163 a
 currentpoint currentpoint translate 1 0.7 div 1 0.8 div scale neg
exch neg exch translate
 348 1163 a 632 1337 a Fh(\(a\))17
b(Request-Response)j(Performance)2093 1163 y
 currentpoint currentpoint translate 0.7 0.8 scale neg exch neg exch
translate
 2093 1163
a @beginspecial 79 @llx 555 @lly 358 @urx 714 @ury 2790
@rwi @setspecial
%%BeginDocument: np-crr.eps
%ADO_PaperArea: -50 -51 3250 2499
%ADO_ImageableArea: 0 0 3200 2448
/md 158 dict def md begin
/currentpacking where {pop /sc_oldpacking currentpacking def true setpacking}if
/bd{bind def}bind def
/xdf{exch def}bd
/xs{exch store}bd
/ld{load def}bd
/Z{0 def}bd
/T/true
/F/false
/:L/lineto
/lw/setlinewidth
/:M/moveto
/rl/rlineto
/rm/rmoveto
/:C/curveto
/:T/translate
/:K/closepath
/:mf/makefont
/gS/gsave
/gR/grestore
/np/newpath
14{ld}repeat
/$m matrix def
/av 81 def
/por true def
/normland false def
/psb-nosave{}bd
/pse-nosave{}bd
/us Z
/psb{/us save store}bd
/pse{us restore}bd
/level2
/languagelevel where
{
pop languagelevel 2 ge
}{
false
}ifelse
def
/featurecleanup
{
stopped
cleartomark
countdictstack exch sub dup 0 gt
{
{end}repeat
}{
pop
}ifelse
}bd
/noload Z
/startnoload
{
{/noload save store}if
}bd
/endnoload
{
{noload restore}if
}bd
level2 startnoload
/setjob
{
statusdict/jobname 3 -1 roll put
}bd
/setcopies
{
userdict/#copies 3 -1 roll put
}bd
level2 endnoload level2 not startnoload
/setjob
{
1 dict begin/JobName xdf currentdict end setuserparams
}bd
/setcopies
{
1 dict begin/NumCopies xdf currentdict end setpagedevice
}bd
level2 not endnoload
/pm Z
/mT Z
/sD Z
/realshowpage Z
/initializepage
{
/pm save store mT concat
}bd
/endp
{
pm restore showpage
}def
/$c/DeviceRGB def
/rectclip where
{
pop/rC/rectclip ld
}{
/rC
{
np 4 2 roll
:M
1 index 0 rl
0 exch rl
neg 0 rl
:K
clip np
}bd
}ifelse
/rectfill where
{
pop/rF/rectfill ld
}{
/rF
{
gS
np
4 2 roll
:M
1 index 0 rl
0 exch rl
neg 0 rl
fill
gR
}bd
}ifelse
/rectstroke where
{
pop/rS/rectstroke ld
}{
/rS
{
gS
np
4 2 roll
:M
1 index 0 rl
0 exch rl
neg 0 rl
:K
stroke
gR
}bd
}ifelse
/G/setgray ld
/:F/setrgbcolor ld
level2 startnoload
/patfreq Z
/patangle Z
/bk Z
/fg Z
/docolorscreen Z
/graystring Z
/pattransf{}def
/initQDpatterns
{
/patfreq 9.375 store
/patangle
1 0 $m defaultmatrix dtransform
exch atan
por not
{90 add}if
normland{180 add}if
store
:a
}def
/docolorscreen
/setcolorscreen where
{
pop/currentcolorscreen where
{
pop/setcmykcolor where
{
pop true
}{
false
}ifelse
}{
false
}ifelse
}{
false
}ifelse
def
/setgraypattern
{
/graystring xs
patfreq
patangle
{
1 add
4 mul
cvi
graystring
exch get
exch
1 add 4 mul
cvi
7 sub
bitshift
1 and
}setscreen
64 div setgray
}bd
/:b
{
/pattransf load settransfer
pop pop pop
setgraypattern
}bd
docolorscreen startnoload
/screensave 5 array def
/:a{currentgray currentscreen currenttransfer screensave astore pop}bd
/:e{screensave aload pop settransfer setscreen setgray}bd
/:d
{
pop pop pop
/pattransf load settransfer
setgraypattern 8{pop}repeat
}bd
/:c
/:d ld
docolorscreen endnoload docolorscreen not startnoload
/screensave 20 array def
/:a{currentcmykcolor currentcolorscreen currentcolortransfer screensave astore pop}bd
/:e{screensave aload pop setcolortransfer setcolorscreen setcmykcolor}bd
/rstring Z
/grstring Z
/blstring Z
/convroll{64 div 4 -1 roll}bd
/setcolorpattern
{
/graystring xs
/blstring xs
/grstring xs
/rstring xs
patfreq
patangle
{
1 add 4 mul cvi rstring
exch get exch 1 add 4 mul
cvi 7 sub bitshift 1 and
}
patfreq
patangle
{
1 add 4 mul cvi grstring
exch get exch 1 add 4 mul
cvi 7 sub bitshift 1 and
}
patfreq
patangle
{
1 add 4 mul cvi blstring
exch get exch 1 add 4 mul
cvi 7 sub bitshift 1 and
}
patfreq
patangle
{
1 add 4 mul cvi graystring
exch get exch 1 add 4 mul
cvi 7 sub bitshift 1 and
}
setcolorscreen
convroll convroll convroll convroll
setcmykcolor
}bd
/:d
{
pop pop pop
/pattransf load settransfer
pop pop setcolorpattern
}bd
/:c
/:d ld
docolorscreen not endnoload
level2  endnoload level2 not startnoload
/pmtx Z
/BGnd Z
/FGnd Z
/PaintData Z
/PatternMtx Z
/PatHeight Z
/PatWidth Z
/$d Z
/savecolor 4 array def
/savecolorspace Z
/:a{
mark 0 0 0 currentcolor savecolor astore pop cleartomark
/savecolorspace currentcolorspace store
}bd
/:e{
savecolorspace setcolorspace
mark savecolor aload pop setcolor cleartomark
}bd
/initQDpatterns
{
gS
initmatrix
mT dup 4 get exch 5 get :T
1 0 dtransform round exch round exch idtransform
dup mul exch dup mul exch add sqrt
0 1 dtransform round exch round exch idtransform
dup mul exch dup mul exch add sqrt
neg
scale
0
por not{90 add}if
normland{180 add}if
rotate
matrix currentmatrix
gR
/pmtx xs
:a
}bd
/:t
{
14 dict begin
/BGnd xdf
/FGnd xdf
/PaintData xdf
/PatternType 1 def
/PaintType 1 def
/BBox[0 0 1 1]def
/TilingType 1 def
/XStep 1 def
/YStep 1 def
/PatternMtx[24 0 0 24 0 0]def
/PaintProc
BGnd null ne
{
{
begin
BGnd aload pop :F
0 0 1 1 rF
FGnd aload pop :F
24 24 true PatternMtx PaintData imagemask
end
}
}{
{
begin
FGnd aload pop :F
24 24 true PatternMtx PaintData imagemask
end
}
}ifelse
def
currentdict
PatternMtx
end
gS $c setcolorspace pmtx setmatrix makepattern gR
}bd
/:u
{
14 dict begin
/$d 8 dict def
/PatternType 1 def
/PaintType 1 def
/BBox[0 0 1 1]def
/TilingType 1 def
/XStep 1 def
/YStep 1 def
/PaintData xdf
/PatHeight xdf
/PatWidth xdf
/PatternMtx[PatWidth 0 0 PatHeight 0 0]def
$d begin
/ImageType 1 def
/MultipleDataSource false def
/Height PatHeight def
/Width PatWidth def
/Decode[0 1 0 1 0 1]def
/ImageMatrix PatternMtx def
/DataSource PaintData def
/BitsPerComponent 8 def
end
/PaintProc
{
begin
$d image
end
}def
currentdict
PatternMtx
end
gS $c setcolorspace pmtx setmatrix makepattern gR
}bd
/bk[1 1 1]def
/fg[0 0 0]def
/:b{
:t
setpattern
pop pop
}bd
/:d{
:t
setpattern
10{pop}repeat
}bd
/:c{
:u
setpattern
10{pop}repeat
}bd
level2 not endnoload
/@a
{
np :M 0 rl :L 0 exch rl 0 rl :L fill
}bd
/@b
{
np :M 0 rl 0 exch rl :L 0 rl 0 exch rl fill
}bd
/arct where
{
pop
}{
/arct
{
arcto pop pop pop pop
}bd
}ifelse
/x1 Z
/x2 Z
/y1 Z
/y2 Z
/rad Z
/@q
{
/rad xs
/y2 xs
/x2 xs
/y1 xs
/x1 xs
np
x2 x1 add 2 div y1 :M
x2 y1 x2 y2 rad arct
x2 y2 x1 y2 rad arct
x1 y2 x1 y1 rad arct
x1 y1 x2 y1 rad arct
fill
}bd
/@s
{
/rad xs
/y2 xs
/x2 xs
/y1 xs
/x1 xs
np
x2 x1 add 2 div y1 :M
x2 y1 x2 y2 rad arct
x2 y2 x1 y2 rad arct
x1 y2 x1 y1 rad arct
x1 y1 x2 y1 rad arct
:K
stroke
}bd
/@i
{
np 0 360 arc fill
}bd
/@j
{
gS
np
:T
scale
0 0 .5 0 360 arc
fill
gR
}bd
/@e
{
np
0 360 arc
:K
stroke
}bd
/@f
{
np
$m currentmatrix
pop
:T
scale
0 0 .5 0 360 arc
:K
$m setmatrix
stroke
}bd
/@k
{
gS
np
:T
0 0 :M
0 0 5 2 roll
arc fill
gR
}bd
/@l
{
gS
np
:T
0 0 :M
scale
0 0 .5 5 -2 roll arc
fill
gR
}bd
/@m
{
np
arc
stroke
}bd
/@n
{
np
$m currentmatrix
pop
:T
scale
0 0 .5 5 -2 roll arc
$m setmatrix
stroke
}bd
/S/show ld
/A{
0.0 exch ashow
}bd
/R{
0.0 exch 32 exch widthshow
}bd
/W{
0.0 3 1 roll widthshow
}bd
/J{
0.0 32 4 2 roll 0.0 exch awidthshow
}bd
/V{
0.0 4 1 roll 0.0 exch awidthshow
}bd
/fcflg true def
/fc{
fcflg{
vmstatus exch sub 50000 lt{
(%%[ Warning: Running out of memory ]%%\r)print flush/fcflg false store
}if pop
}if
}bd
/$f[1 0 0 -1 0 0]def
/:ff{$f :mf}bd
/MacEncoding StandardEncoding 256 array copy def
MacEncoding 39/quotesingle put
MacEncoding 96/grave put
/Adieresis/Aring/Ccedilla/Eacute/Ntilde/Odieresis/Udieresis/aacute
/agrave/acircumflex/adieresis/atilde/aring/ccedilla/eacute/egrave
/ecircumflex/edieresis/iacute/igrave/icircumflex/idieresis/ntilde/oacute
/ograve/ocircumflex/odieresis/otilde/uacute/ugrave/ucircumflex/udieresis
/dagger/degree/cent/sterling/section/bullet/paragraph/germandbls
/registered/copyright/trademark/acute/dieresis/notequal/AE/Oslash
/infinity/plusminus/lessequal/greaterequal/yen/mu/partialdiff/summation
/product/pi/integral/ordfeminine/ordmasculine/Omega/ae/oslash
/questiondown/exclamdown/logicalnot/radical/florin/approxequal/Delta/guillemotleft
/guillemotright/ellipsis/space/Agrave/Atilde/Otilde/OE/oe
/endash/emdash/quotedblleft/quotedblright/quoteleft/quoteright/divide/lozenge
/ydieresis/Ydieresis/fraction/currency/guilsinglleft/guilsinglright/fi/fl
/daggerdbl/periodcentered/quotesinglbase/quotedblbase/perthousand
/Acircumflex/Ecircumflex/Aacute/Edieresis/Egrave/Iacute/Icircumflex/Idieresis/Igrave
/Oacute/Ocircumflex/apple/Ograve/Uacute/Ucircumflex/Ugrave/dotlessi/circumflex/tilde
/macron/breve/dotaccent/ring/cedilla/hungarumlaut/ogonek/caron
MacEncoding 128 128 getinterval astore pop
level2 startnoload
/copyfontdict
{
findfont dup length dict
begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
}bd
level2 endnoload level2 not startnoload
/copyfontdict
{
findfont dup length dict
copy
begin
}bd
level2 not endnoload
md/fontname known not{
/fontname/customfont def
}if
/Encoding Z
/:mre
{
copyfontdict
/Encoding MacEncoding def
fontname currentdict
end
definefont :ff def
}bd
/:bsr
{
copyfontdict
/Encoding Encoding 256 array copy def
Encoding dup
}bd
/pd{put dup}bd
/:esr
{
pop pop
fontname currentdict
end
definefont :ff def
}bd
/scf
{
scalefont def
}bd
/scf-non
{
$m scale :mf setfont
}bd
/ps Z
/fz{/ps xs}bd
/sf/setfont ld
/cF/currentfont ld
/mbf
{
/makeblendedfont where
{
pop
makeblendedfont
/ABlend exch definefont
}{
pop
}ifelse
def
}def
/currentpacking where {pop sc_oldpacking setpacking}if
end		% md
md begin
/pT[1 0 0 -1 12.239 779.968]def/mT[.24 0 0 -.24 12.239 779.968]def
initQDpatterns
/sD 16 dict def
/f0_1/Helvetica :mre
/f0_50 f0_1 50 scf
/f1_1/Times-Roman :mre
/f1_50 f1_1 50 scf
/Courier findfont[10 0 0 -10 0 0]:mf setfont
initializepage
gS 0 0 2448 3200 rC
477 348 753 403 rC
477 648.004 -.004 .004 1230.004 648 .004 477 648 @a
477 550.004 -.004 .004 1230.004 550 .004 477 550 @a
477 451.004 -.004 .004 1230.004 451 .004 477 451 @a
477 352.004 -.004 .004 1230.004 352 .004 477 352 @a
gR
.5 G
3 lw
gS 174 250 1322 717 rC
476.5 351.5 754 396 rS
:a
32 <3399CC663399CC66
><333333999999CCCCCC666666333333999999CCCCCC666666
>fg bk :b
477 344 761 403 rC
507 487 43 261 rF
:e
0 G
507.5 487.5 42 260 rS
:a
32 <3399CC663399CC66
><333333999999CCCCCC666666333333999999CCCCCC666666
>fg bk :b
695 485 43 263 rF
:e
0 G
695.5 485.5 42 262 rS
:a
32 <3399CC663399CC66
><333333999999CCCCCC666666333333999999CCCCCC666666
>fg bk :b
884 480 43 268 rF
:e
0 G
884.5 480.5 42 267 rS
:a
32 <3399CC663399CC66
><333333999999CCCCCC666666333333999999CCCCCC666666
>fg bk :b
1072 504 43 244 rF
:e
0 G
1072.5 504.5 42 243 rS
1 G
549 600 42 148 rF
0 G
549.5 600.5 41 147 rS
1 G
737 523 43 225 rF
0 G
737.5 523.5 42 224 rS
1 G
926 530 42 218 rF
0 G
926.5 530.5 41 217 rS
1 G
1114 576 42 172 rF
0 G
1114.5 576.5 41 171 rS
:a
32 <0000FFFF0000FFFF
><000000000000FFFFFFFFFFFF000000000000FFFFFFFFFFFF
>fg bk :b
590 372 43 376 rF
:e
0 G
590.5 372.5 42 375 rS
:a
32 <0000FFFF0000FFFF
><000000000000FFFFFFFFFFFF000000000000FFFFFFFFFFFF
>fg bk :b
779 377 43 371 rF
:e
0 G
779.5 377.5 42 370 rS
:a
32 <0000FFFF0000FFFF
><000000000000FFFFFFFFFFFF000000000000FFFFFFFFFFFF
>fg bk :b
967 380 43 368 rF
:e
0 G
967.5 380.5 42 367 rS
:a
32 <0000FFFF0000FFFF
><000000000000FFFFFFFFFFFF000000000000FFFFFFFFFFFF
>fg bk :b
1155 525 43 223 rF
:e
0 G
1155.5 525.5 42 222 rS
gR
0 G
gS 174 250 1322 717 rC
-.004 -.004 477.004 747.004 .004 .004 477 352 @b
463 747.004 -.004 .004 477.004 747 .004 463 747 @a
463 648.004 -.004 .004 477.004 648 .004 463 648 @a
463 550.004 -.004 .004 477.004 550 .004 463 550 @a
463 451.004 -.004 .004 477.004 451 .004 463 451 @a
463 352.004 -.004 .004 477.004 352 .004 463 352 @a
477 747.004 -.004 .004 1230.004 747 .004 477 747 @a
-.004 -.004 477.004 761.004 .004 .004 477 733 @b
-.004 -.004 665.004 761.004 .004 .004 665 733 @b
-.004 -.004 854.004 761.004 .004 .004 854 733 @b
-.004 -.004 1042.004 761.004 .004 .004 1042 733 @b
-.004 -.004 1230.004 761.004 .004 .004 1230 733 @b
415 760 :M
f0_50 sf
(0)S
359 661 :M
-.193(100)A
359 563 :M
-.193(200)A
359 464 :M
-.193(300)A
359 365 :M
-.193(400)A
gR
.004 lw
gS 0 0 2448 3200 rC
gS
582 865 :T
270 rotate
-582 -865 :T
582 865 :M
f0_50 sf
-.125( 1,1)A
gR
gS
738 865 :T
270 rotate
-738 -865 :T
738 865 :M
f0_50 sf
-.125( 64,)A
gR
gS
801 851 :T
270 rotate
-801 -851 :T
801 851 :M
f0_50 sf
-.591(64)A
gR
gS
927 893 :T
270 rotate
-927 -893 :T
927 893 :M
f0_50 sf
-.042( 100,)A
gR
gS
990 879 :T
270 rotate
-990 -879 :T
990 879 :M
f0_50 sf
-.193(200)A
gR
gS
1115 893 :T
270 rotate
-1115 -893 :T
1115 893 :M
f0_50 sf
-.042( 128,)A
gR
gS
1178 893 :T
270 rotate
-1178 -893 :T
1178 893 :M
f0_50 sf
-.06(8192)A
gR
585 873 537 77 rC
592 924 :M
f1_50 sf
-.019(Request-Response Pattern)A
gR
gS 0 0 2448 3200 rC
gS
326 796 :T
270 rotate
-326 -796 :T
326 796 :M
f1_50 sf
-.011(Transactions Per Second)A
gR
1 G
174 250 1322 717 rC
1054 284 385 194 rF
0 G
1053.5 283.5 386 195 rS
:a
32 <3399CC663399CC66
><333333999999CCCCCC666666333333999999CCCCCC666666
>fg bk :b
1054 284 385 193 rC
1067 303 26 26 rF
:e
0 G
3 lw
1067.5 303.5 25 25 rS
1103 329 :M
1 G
f1_50 sf
0 G
-.031(Fast Sockets)A
1 G
1067 368 26 26 rF
0 G
1067.5 368.5 25 25 rS
1103 394 :M
-.044(Myrinet TCP/IP)A
:a
32 <0000FFFF0000FFFF
><000000000000FFFFFFFFFFFF000000000000FFFFFFFFFFFF
>fg bk :b
1067 433 26 26 rF
:e
0 G
1067.5 433.5 25 25 rS
1103 459 :M
-.014(Fast Ethernet)A
endp
end		% md
%%EndDocument
 @endspecial 2093 1163 a
 currentpoint currentpoint translate 1 0.7 div 1 0.8 div scale neg
exch neg exch translate
 2093 1163 a 2263 1337 a Fh(\(b\))d
(Connection-Request-Respon)q(se)22 b(Performance)150
1582 y Fz(Figure)15 b(8:)25 b Ft(Netperf)14 b Fz(measurements)g(of)i
(request-response)d(transactions-per)n(-second)f(on)j(the)g(Solaris)h
(platform,)e(for)h(a)h(vari-)150 1682 y(ety)k(of)f(packet)g(sizes.)27
b(Connection)18 b(costs)j(signi\256cantly)d(lower)h(Fast)i(Sockets')e
(advantage)f(relative)h(to)h(Myrinet)e(TCP/IP)-9 b(,)20
b(and)150 1782 y(render)j(it)h(slower)g(than)f(Fast)i(Ethernet)e
(TCP/IP)-9 b(.)24 b(This)g(is)h(because)f(the)g(current)e(version)h(of)
h(Fast)h(Sockets)e(uses)i(the)f(TCP/IP)150 1881 y(connection)18
b(establishment)h(mechanism.)233 2214 y(W)-7 b(e)49 b(used)e(the)h
(NcFTP)g(ftp)f(client)g(\()p Ft(ncftp)p Fz(\),)53 b(ver)n(-)150
2314 y(sion)24 b(2.3.0,)g(and)g(the)g(W)-7 b(ashington)24
b(University)f(ftp)i(server)150 2414 y(\()p Ft(wu-ftpd)p
Fz(\),)40 b(version)c(2.4.2.)76 b(Because)37 b(Fast)h(Sockets)150
2513 y(currently)g(does)h(not)f(support)g Ft(fork\(\))p
Fz(,)44 b(we)39 b(modi\256ed)150 2613 y Ft(wu-ftpd)27
b Fz(to)i(wait)f(for)g(and)g(accept)f(incoming)g(connec-)150
2712 y(tions)d(rather)f(than)g(be)h(started)f(from)g(the)h
Ft(inetd)f Fz(Internet)150 2812 y(server)d(daemon.)233
2915 y(Our)j(FTP)i(test)f(involved)e(the)h(transfer)g(of)g(a)i(number)c
(of)150 3015 y(ASCII)14 b(\256les,)i(of)d(various)g(sizes,)i(and)e
(reporting)f(the)i(elapsed)150 3114 y(time)26 b(and)f(realized)f
(bandwidth)g(as)i(reported)e(by)h(the)g(FTP)150 3214
y(client.)38 b(On)24 b(both)f(machines,)h(\256les)h(were)f(stored)f(in)
h(an)g(in-)150 3313 y(memory)31 b(\256lesystem,)37 b(to)c(avoid)g(the)g
(bandwidth)e(limita-)150 3413 y(tions)20 b(imposed)f(by)h(the)g(disk.)
233 3516 y(The)31 b(relative)g(throughput)d(for)i(the)h(Fast)i(Sockets)
e(and)150 3616 y(TCP/IP)18 b(versions)f(of)g(the)g(FTP)i(software)d(is)
j(shown)e(in)g(Fig-)150 3715 y(ure)30 b(9.)57 b(Surprisingly)-5
b(,)31 b(Fast)g(Sockets)f(and)g(TCP/IP)h(have)150 3815
y(roughly)i(comparable)g(performance)f(for)i(small)h(\256les)h(\(1)150
3915 y(byte)21 b(to)h(4K)g(bytes\).)32 b(This)22 b(is)g(due)g(to)g(the)
g(expense)e(of)i(con-)150 4014 y(nection)d(setup)h(\320)h(every)f(FTP)h
(transfer)e(involves)g(the)h(cre-)150 4114 y(ation)j(and)g(destruction)
f(of)h(a)h(data)g(connection.)34 b(For)24 b(mid-)150
4213 y(sized)c(transfers,)f(between)g(4)h(Kbytes)f(and)g(2)h(Mbytes,)f
(Fast)150 4313 y(Sockets)31 b(obtains)f(considerably)f(better)h
(bandwidth)g(than)150 4413 y(normal)h(TCP/IP)-9 b(.)33
b(For)f(extremely)f(lar)o(ge)g(transfers,)k(both)150
4512 y(TCP/IP)15 b(and)f(Fast)i(Sockets)e(can)g(realize)h(a)g
(signi\256cant)f(frac-)150 4612 y(tion)20 b(of)g(the)g(network')-5
b(s)19 b(bandwidth.)150 4910 y FA(5)119 b(Related)31
b(W)-7 b(ork)150 5101 y Fz(Improving)43 b(communications)g(performance)
g(has)j(long)150 5201 y(been)21 b(a)g(popular)f(research)g(topic.)29
b(Previous)21 b(work)f(has)i(fo-)150 5300 y(cused)16
b(on)f(protocols,)g(protocol)g(and)g(infrastructure)f(imple-)150
5400 y(mentations,)25 b(and)g(the)g(underlying)d(network)i(device)g
(soft-)2137 2214 y(ware.)2221 2346 y(The)54 b(VMTP)h(protocol)e
([Cheriton)g(&)i(W)m(illiamson)2137 2446 y(1989])23 b(attempted)g(to)h
(provide)f(a)i(general-purpose)20 b(proto-)2137 2546
y(col)h(optimized)e(for)h(small)g(packets)g(and)g(request-response)2137
2645 y(traf)o(\256c.)87 b(It)40 b(performed)e(quite)i(well)g(for)g(the)
g(hardware)2137 2745 y(it)g(was)f(implemented)e(on,)43
b(but)38 b(never)g(became)g(widely)2137 2844 y(established;)69
b(VMTP')-5 b(s)54 b(design)e(tar)o(get)g(was)i(request-)2137
2944 y(response)18 b(and)g(bulk)g(transfer)f(traf)o(\256c,)h(rather)g
(than)g(the)g(byte)2137 3044 y(stream)i(and)g(datagram)e(models)i
(provided)d(by)j(the)g(TCP/IP)2137 3143 y(protocol)h(suite.)34
b(In)21 b(contrast,)h(Fast)i(Sockets)e(provides)f(the)2137
3243 y(same)37 b(models)f(as)h(TCP/IP)g(and)f(maintains)g(application)
2137 3343 y(compatibility)-5 b(.)2221 3475 y(Other)21
b(work)g([Clark)g(et)h(al.)32 b(1989,)20 b(W)-7 b(atson)22
b(&)g(Mamrak)2137 3574 y(1987])33 b(ar)o(gued)e(that)j(protocol)e
(implementations,)j(rather)2137 3674 y(than)20 b(protocol)f(designs,)g
(were)i(to)f(blame)g(for)f(poor)g(perfor)n(-)2137 3774
y(mance,)f(and)h(that)f(ef)o(\256cient)g(implementations)f(of)h
(general-)2137 3873 y(purpose)25 b(protocols)g(could)g(do)h(as)h(well)f
(as)h(or)f(better)g(than)2137 3973 y(special-purpose)20
b(protocols)h(for)g(most)h(applications.)31 b(The)2137
4072 y(measurements)24 b(made)h(in)g([Kay)g(&)h(Pasquale)f(1993])e
(lend)2137 4172 y(credence)28 b(to)h(these)g(ar)o(guments;)i(they)d
(found)f(that)i(mem-)2137 4272 y(ory)13 b(operations)f(and)h(operating)
e(system)j(overheads)e(played)2137 4371 y(a)37 b(dominant)d(role)h(in)h
(the)g(cost)g(of)f(lar)o(ge)g(packets.)73 b(For)2137
4471 y(small)28 b(packets,)g(however)m(,)f(protocol)f(costs)i(were)f
(signi\256-)2137 4571 y(cant,)20 b(amounting)d(for)j(up)f(to)h(33\045)f
(of)h(processing)e(time)i(for)2137 4670 y(single-byte)f(messages.)2221
4802 y(The)30 b(concept)g(of)h(reducing)e(infrastructure)g(costs)j(was)
2137 4902 y(explored)e(further)f(in)j(the)f Fy(x)p Fz(-kernel)f
([Hutchinson)f(&)i(Pe-)2137 5001 y(terson)20 b(1991,)e(Peterson)i
(1993],)e(an)i(operating)e(system)i(de-)2137 5101 y(signed)31
b(for)f(high-performance)d(communications.)57 b(The)2137
5201 y(original,)51 b(stand-alone)43 b(version)h(of)h(the)h
Fy(x)p Fz(-kernel)e(per)n(-)2137 5300 y(formed)34 b(signi\256cantly)h
(better)g(at)h(communication)d(tasks)2137 5400 y(than)24
b(did)f(BSD)i(Unix)f(on)f(the)h(same)g(hardware)e(\(Sun)i(3')-5
b(s\),)p eop
%%Page: 14 14
14 13 bop 525 1890 a
 currentpoint currentpoint translate 0.9 0.9 scale neg exch neg exch
translate
 525 1890 a @beginspecial 50 @llx
50 @lly 410 @urx 302 @ury 3600 @rwi @setspecial
%%BeginDocument: ftp.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -60 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Times-Roman findfont 180 scalefont setfont
newpath
LTa
1080 451 M
5841 0 V
LTb
LTa
1080 451 M
5841 0 V
LTb
1080 451 M
63 0 V
5778 0 R
-63 0 V
972 451 M
(0) Rshow
LTa
1080 951 M
5841 0 V
LTb
1080 951 M
63 0 V
5778 0 R
-63 0 V
972 951 M
(2000) Rshow
LTa
1080 1451 M
5841 0 V
LTb
1080 1451 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(4000) Rshow
LTa
1080 1950 M
5841 0 V
LTb
1080 1950 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(6000) Rshow
LTa
1080 2450 M
5841 0 V
LTb
1080 2450 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(8000) Rshow
LTa
1080 2950 M
5841 0 V
LTb
1080 2950 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(10000) Rshow
LTa
1080 3450 M
5841 0 V
LTb
1080 3450 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(12000) Rshow
LTa
1080 3949 M
5841 0 V
LTb
1080 3949 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(14000) Rshow
LTa
1080 4449 M
5841 0 V
LTb
1080 4449 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(16000) Rshow
LTa
1080 4949 M
5841 0 V
LTb
1080 4949 M
63 0 V
5778 0 R
-63 0 V
-5886 0 R
(18000) Rshow
LTa
1080 451 M
0 4498 V
LTb
1080 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(1) Cshow
LTa
2082 451 M
0 4498 V
LTb
2082 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(16) Cshow
LTa
3585 451 M
0 4498 V
LTb
3585 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(1K) Cshow
LTa
4085 451 M
0 4498 V
LTb
4085 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(4K) Cshow
LTa
4586 451 M
0 4498 V
LTb
4586 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(16K) Cshow
LTa
5087 451 M
0 4498 V
LTb
5087 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(64K) Cshow
LTa
5588 451 M
0 4498 V
LTb
5588 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(256K) Cshow
LTa
6089 451 M
0 4498 V
LTb
6089 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(1M) Cshow
LTa
6339 451 M
0 4498 V
LTb
6339 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(2M) Cshow
LTa
6590 451 M
0 4498 V
LTb
6590 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(4M) Cshow
LTa
6921 451 M
0 4498 V
LTb
6921 451 M
0 63 V
0 4435 R
0 -63 V
0 -4615 R
(10M) Cshow
1080 451 M
5841 0 V
0 4498 V
-5841 0 V
0 -4498 V
180 2700 M
currentpoint gsave translate 90 rotate 0 0 M
(Throughput \(Kilobytes per Second\)) Cshow
grestore
4000 91 M
(Transfer Size) Cshow
LT0
2994 4324 M
(Fast Sockets) Rshow
3102 4324 M
324 0 V
1080 451 M
2254 82 V
251 81 V
500 452 V
501 1013 V
501 1405 V
501 855 V
251 231 V
250 86 V
250 5 V
251 38 V
331 81 V
3210 4324 D
1080 451 D
3334 533 D
3585 614 D
4085 1066 D
4586 2079 D
5087 3484 D
5588 4339 D
5839 4570 D
6089 4656 D
6339 4661 D
6590 4699 D
6921 4780 D
LT1
2994 4144 M
(TCP/IP) Rshow
3102 4144 M
324 0 V
1080 451 M
2254 79 V
251 78 V
500 467 V
4586 533 L
501 228 V
501 798 V
251 696 V
250 648 V
250 744 V
251 567 V
331 399 V
3210 4144 A
1080 451 A
3334 530 A
3585 608 A
4085 1075 A
4586 533 A
5087 761 A
5588 1559 A
5839 2255 A
6089 2903 A
6339 3647 A
6590 4214 A
6921 4613 A
stroke
grestore
end
showpage
%%EndDocument
 @endspecial 525 1890 a
 currentpoint currentpoint translate 1 0.9 div 1 0.9 div scale neg
exch neg exch translate
 525 1890 a 0 2073 a Fz(Figure)15
b(9:)26 b(Relative)16 b(throughput)d(realized)j(by)f(Fast)j(Sockets)d
(and)h(TCP/IP)h(versions)e(of)h(the)g(FTP)h(\256le)g(transfer)e
(protocol.)24 b(Con-)0 2172 y(nection)19 b(setup)i(costs)g(dominate)e
(the)h(transfer)g(time)h(for)f(small)h(\256les)g(and)f(the)g(network)g
(transport)f(serves)h(as)h(a)g(limiting)f(factor)0 2272
y(for)g(lar)o(ge)f(\256les.)28 b(For)20 b(mid-sized)f(\256les,)i(Fast)g
(Sockets)f(is)h(able)f(to)g(realize)g(much)g(higher)f(bandwidth)f(than)
i(TCP/IP)-9 b(.)0 2622 y(using)15 b(similar)g(implementations)e(of)i
(the)h(communications)0 2722 y(protocols.)41 b(Later)25
b(work)f([Druschel)h(et)g(al.)43 b(1994,)24 b(Pagels)0
2821 y(et)31 b(al.)58 b(1994,)29 b(Druschel)g(et)i(al.)58
b(1993,)29 b(Druschel)g(&)i(Pe-)0 2921 y(terson)e(1993])e(focused)h(on)
h(hardware)f(design)g(issues)i(re-)0 3020 y(lating)20
b(to)g(network)f(communication)f(and)h(the)i(use)f(of)g(soft-)0
3120 y(ware)31 b(techniques)f(to)i(exploit)e(hardware)g(features.)59
b(Key)0 3220 y(contributions)15 b(from)g(this)j(work)e(were)h(the)f
(concepts)g(of)h Fy(ap-)0 3319 y(plication)g(device)h(channels)f
Fz(\(ADC\),)i(which)f(provide)e(pro-)0 3419 y(tected)d(user)n(-level)g
(access)h(to)g(a)f(network)g(device,)g(and)g Fy(fbufs)p
Fz(,)0 3519 y(which)19 b(provide)f(a)i(mechanism)f(for)g(rapid)g
(transfer)g(of)g(data)0 3618 y(from)25 b(the)h(network)f(subsystem)h
(to)g(the)h(user)f(application.)0 3718 y(While)19 b(Active)g(Messages)g
(provides)e(the)i(equivalent)e(of)h(an)0 3817 y(ADC)c(for)f(Fast)i
(Sockets,)g(fbufs)d(are)i(not)f(needed,)g(as)i(receive)0
3917 y(posting)22 b(allows)i(for)e(data)h(transfer)g(directly)f(into)h
(the)g(user)0 4017 y(application.)83 4204 y(Recently)-5
b(,)44 b(the)c(development)e(of)h(a)i(zero-copy)c(TCP)0
4304 y(stack)14 b(in)f(Solaris)h([Chu)f(1996])e(aggressively)h
(utilized)h(hard-)0 4404 y(ware)37 b(and)g(operating)e(system)i
(features)g(such)g(as)g(direct)0 4503 y(memory)20 b(access)j(\(DMA\),)e
(page)g(re-mapping,)e(and)i(copy-)0 4603 y(on-write)33
b(pages)h(to)g(improve)e(communications)g(perfor)n(-)0
4703 y(mance.)25 b(T)-6 b(o)18 b(take)f(full)h(advantage)e(of)h(the)h
(zero-copy)d(stack,)0 4802 y(user)20 b(applications)f(had)h(to)g(use)h
(page-aligned)c(buf)o(fers)i(and)0 4902 y(transfer)30
b(sizes)i(lar)o(ger)e(than)h(a)g(page.)59 b(Because)31
b(of)g(these)0 5001 y(limitations,)i(the)e(designers)f(focused)g(on)h
(improving)d(re-)0 5101 y(alized)d(throughput,)f(instead)h(of)h(small)g
(message)f(latency)-5 b(,)0 5201 y(which)25 b(Fast)h(Sockets)g
(addresses.)42 b(The)25 b(resulting)g(system)0 5300 y(achieved)j(32)i
(MB/s)h(throughput)c(on)i(a)h(similar)g(network)0 5400
y(but)k(with)g(a)g(slower)g(processor)-5 b(.)67 b(This)34
b(throughput)c(was)1988 2622 y(achieved)15 b(for)h(lar)o(ge)g
(transfers)g(\(16K)f(bytes\),)i(not)f(the)h(small)1988
2722 y(packets)22 b(that)g(make)g(up)g(the)h(majority)e(of)h(network)f
(traf)o(\256c.)1988 2821 y(This)26 b(work)g(required)f(a)i(thorough)d
(understanding)f(of)k(the)1988 2921 y(Solaris)16 b(virtual)f(memory)g
(subsystem,)h(and)g(changes)f(to)i(the)1988 3020 y(operating)26
b(system)i(kernel;)j(Fast)e(Sockets)f(is)g(an)g(entirely)1988
3120 y(user)n(-level)19 b(solution.)2071 3264 y(An)28
b(alternative)f(to)h(reducing)e(internal)h(operating)f(sys-)1988
3363 y(tem)15 b(costs)i(is)g(to)e(bypass)h(the)g(operating)e(system)i
(altogether)m(,)1988 3463 y(and)22 b(use)h(either)f(in)h(a)g(user)n
(-level)f(library)g(\(like)h(Fast)g(Sock-)1988 3563 y(ets\))18
b(or)f(a)h(separate)g(user)n(-level)f(server)-5 b(.)26
b(Mach)17 b(3.0)g(used)h(the)1988 3662 y(latter)13 b(approach)f([Forin)
g(et)i(al.)25 b(1991],)13 b(which)g(yielded)g(poor)1988
3762 y(networking)29 b(performance)f([Maeda)j(&)g(Bershad)h(1992].)1988
3862 y(Both)21 b([Maeda)g(&)h(Bershad)f(1993a])f(and)i([Thekkath)d(et)j
(al.)1988 3961 y(1993])17 b(explored)g(building)g(TCP)j(into)e(a)i
(user)n(-level)e(library)1988 4061 y(linked)c(with)i(existing)e
(applications.)24 b(Both)16 b(systems,)g(how-)1988 4160
y(ever)m(,)i(attempted)g(only)h(to)g(match)g(in-kernel)f(performance,)
1988 4260 y(rather)29 b(than)h(better)h(it.)58 b(Further)m(,)32
b(both)e(systems)h(utilized)1988 4360 y(in-kernel)16
b(facilities)j(for)f(message)g(transmission,)g(limiting)1988
4459 y(the)e(possible)h(performance)c(improvement.)23
b(Edwards)16 b(and)1988 4559 y(Muir)25 b([Edwards)g(&)h(Muir)g(1995])e
(attempted)h(to)h(build)g(an)1988 4659 y(entirely)e(user)n(-level)g
(solution,)h(but)g(utilized)f(a)i(TCP)f(stack)1988 4758
y(that)19 b(had)g(been)g(built)g(for)g(the)g(HP/UX)h(kernel.)26
b(Their)19 b(solu-)1988 4858 y(tion)j(replicated)g(the)h(or)o
(ganization)d(of)j(the)g(kernel)f(at)i(user)n(-)1988
4957 y(level)19 b(with)g(worse)g(performance)e(than)i(the)g(in-kernel)f
(TCP)1988 5057 y(stack.)2071 5201 y([Kay)36 b(&)g(Pasquale)g(1993])f
(showed)h(that)g(interfacing)1988 5300 y(to)46 b(the)h(network)e(card)h
(itself)i(was)f(a)g(major)f(cost)h(for)1988 5400 y(small)31
b(packets.)58 b(Recent)31 b(work)f(has)h(focused)f(on)g(reduc-)p
eop
%%Page: 15 15
15 14 bop 150 83 a Fz(ing)31 b(this)i(portion)d(of)h(the)h(protocol)e
(cost,)35 b(and)c(on)g(utiliz-)150 183 y(ing)e(the)g(message)g
(coprocessors)f(that)h(are)g(appearing)e(on)150 282 y(high-performance)
20 b(network)j(controllers)g(such)i(as)g(Myri-)150 382
y(net)c([Seitz)h(1994].)29 b(Active)21 b(Messages)h([von)e(Eicken)h(et)
h(al.)150 482 y(1992])30 b(is)j(the)f(base)f(upon)g(which)g(Fast)i
(Sockets)f(is)g(built)150 581 y(and)17 b(is)i(discussed)e(above.)25
b(Illinois)18 b(Fast)h(Messages)f([Pakin)150 681 y(et)28
b(al.)50 b(1995])26 b(provided)f(an)i(interface)g(similar)h(to)g(that)f
(of)150 780 y(previous)18 b(versions)h(of)g(Active)g(Messages,)h(but)f
(did)g(not)g(al-)150 880 y(low)k(processes)g(to)g(share)g(the)g
(network.)35 b(Remote)23 b(Queues)150 980 y([Brewer)c(et)h(al.)27
b(1995])18 b(provided)f(low-overhead)g(commu-)150 1079
y(nications)i(similar)i(to)f(that)g(of)f(Active)h(Messages,)h(but)e
(sep-)150 1179 y(arated)i(the)g(arrival)g(of)g(messages)h(from)e(the)i
(invocation)d(of)150 1279 y(handlers.)233 1496 y(The)j(SHRIMP)i
(project)d(implemented)g(a)i(stream)g(sock-)150 1596
y(ets)32 b(layer)f(that)g(uses)h(many)f(of)g(the)g(same)g(techniques)f
(as)150 1695 y(Fast)35 b(Sockets)f([Damianakis)f(et)i(al.)69
b(1996].)d(SHRIMP)150 1795 y(supports)23 b(communication)e(via)k
(shared)e(memory)f(and)i(the)150 1895 y(execution)j(of)h(handler)e
(functions)h(on)h(data)g(arrival.)50 b(The)150 1994 y(SHRIMP)38
b(network)f(had)g(hardware)f(latencies)i(\(4\2619)e Fs(m)p
Fz(s)150 2094 y(one-way\))c(much)h(lower)g(than)h(the)f(Fast)i(Sockets)
f(Myri-)150 2194 y(net,)22 b(but)g(its)i(maximum)c(bandwidth)g(\(22)i
(MB/s\))h(was)g(also)150 2293 y(lower)k(than)h(that)g(of)f(the)h
(Myrinet)f([Felten)h(et)g(al.)50 b(1996].)150 2393 y(It)31
b(used)g(a)h(custom-designed)c(network)i(interface)g(for)h(its)150
2492 y(memory-mapped)25 b(communication)h(model.)53 b(The)28
b(inter)n(-)150 2592 y(face)34 b(provided)e(in-order)m(,)k(reliable)e
(delivery)-5 b(,)36 b(which)e(al-)150 2692 y(lowed)f(for)g(extremely)e
(low)j(overheads)d(\(7)j Fs(m)p Fz(s)g(over)e(the)150
2791 y(hardware)38 b(latency\);)47 b(Fast)41 b(Sockets)e(incurs)f
(substantial)150 2891 y(overhead)19 b(to)j(ensure)f(in-order)f
(delivery)-5 b(.)29 b(Realized)21 b(band-)150 2991 y(width)e(of)g
(SHRIMP)i(sockets)e(was)h(about)f(half)g(the)h(raw)f(ca-)150
3090 y(pacity)k(of)g(the)g(network)f(because)h(the)g(SHRIMP)h(commu-)
150 3190 y(nication)j(model)f(used)i(sender)n(-based)e(memory)g
(manage-)150 3289 y(ment,)35 b(forcing)c(data)h(transfers)g(to)g
(indirect)g(through)e(the)150 3389 y(socket)e(buf)o(fer)-5
b(.)51 b(The)29 b(SHRIMP)g(communication)d(model)150
3489 y(also)c(deals)h(poorly)d(with)j(non-word-aligned)17
b(data,)23 b(which)150 3588 y(required)32 b(programming)e(complexity)i
(to)i(work)f(around;)150 3688 y(Fast)41 b(Sockets)f(transparently)e
(handles)i(this)g(un-aligned)150 3788 y(data)21 b(without)f(extra)g
(data)h(structures)f(or)h(other)f(dif)o(\256culties)150
3887 y(in)g(the)h(data)f(path.)233 4105 y(U-Net)i([von)e(Eicken)g(et)i
(al.)32 b(1995])19 b(is)k(a)f(user)n(-level)e(net-)150
4204 y(work)31 b(interface)g(developed)e(at)k(Cornell.)61
b(It)32 b(virtualized)150 4304 y(the)37 b(network)f(interface,)k
(allowing)c(multiple)g(processes)150 4404 y(to)25 b(share)f(the)g
(interface.)38 b(U-Net)25 b(emphasized)e(improving)150
4503 y(the)h(implementation)d(of)i(existing)g(communications)e(pro-)150
4603 y(tocols)h(whereas)f(Fast)i(Sockets)f(uses)h(a)f(new)g(protocol)f
(just)150 4703 y(for)29 b(local-area)f(use.)55 b(A)30
b(version)f(of)g(TCP)h(\(U-Net)g(TCP\))150 4802 y(was)24
b(implemented)d(for)h(U-Net;)j(this)f(protocol)d(stack)i(pro-)150
4902 y(vided)16 b(the)h(full)g(functionality)e(of)i(the)g(standard)f
(TCP)i(stack.)150 5001 y(U-Net)28 b(TCP)h(was)g(modi\256ed)d(for)i
(better)f(performance;)i(it)150 5101 y(succeeded)20 b(in)h(delivering)e
(the)i(full)f(bandwidth)f(of)i(the)g(un-)150 5201 y(derlying)16
b(network)h(but)g(still)j(imposed)c(more)i(than)f(100)g(mi-)150
5300 y(croseconds)j(of)i(packet)f(processing)g(overhead)e(relative)j
(to)150 5400 y(the)e(raw)g(U-Net)h(interface.)2137 83
y FA(6)120 b(Conclusions)2137 327 y Fz(In)21 b(this)g(paper)f(we)h
(have)f(presented)g(Fast)i(Sockets,)e(a)h(com-)2137 427
y(munications)i(interface)h(which)g(provides)f(low-overhead,)2137
527 y(low-latency)30 b(and)g(high-bandwidth)d(communication)h(on)2137
626 y(local-area)14 b(networks)g(using)h(the)g(familiar)f(Berkeley)g
(Sock-)2137 726 y(ets)22 b(interface.)27 b(W)-7 b(e)22
b(discussed)e(how)g(current)f(implementa-)2137 826 y(tions)j(of)f(the)h
(TCP/IP)g(suite)g(have)f(a)h(number)e(of)h(problems)2137
925 y(that)k(contribute)e(to)i(poor)e(latencies)i(and)f(mediocre)f
(band-)2137 1025 y(width)d(on)g(modern)f(high-speed)f(networks,)h(and)h
(how)g(Fast)2137 1124 y(Sockets)h(was)g(designed)f(to)g(directly)g
(address)g(these)h(short-)2137 1224 y(comings)14 b(of)g(TCP/IP)i
(implementations.)23 b(W)-7 b(e)16 b(showed)d(that)2137
1324 y(this)26 b(design)e(delivers)h(performance)d(that)j(is)g
(signi\256cantly)2137 1423 y(better)35 b(than)g(TCP/IP)h(for)f(small)h
(transfers)e(and)h(at)h(least)2137 1523 y(equivalent)13
b(to)i(TCP/IP)g(for)e(lar)o(ge)h(transfers,)g(and)g(that)g(these)2137
1623 y(bene\256ts)19 b(can)f(carry)g(over)g(to)h(real-life)e(programs)g
(in)i(every-)2137 1722 y(day)h(usage.)2221 1853 y(An)28
b(important)f(contributor)e(to)k(Fast)g(Socket')-5 b(s)28
b(perfor)n(-)2137 1953 y(mance)22 b(is)h(receive)f(posting,)f(which)h
(utilizes)g(socket-layer)2137 2052 y(information)15 b(to)j(in\257uence)
e(the)i(delivery)e(actions)h(of)g(layers)2137 2152 y(farther)22
b(down)g(the)g(protocol)f(stack.)34 b(By)23 b(moving)e(destina-)2137
2251 y(tion)g(information)c(down)j(into)g(lower)g(layers)g(of)g(the)g
(proto-)2137 2351 y(col)e(stack,)g(Fast)h(Sockets)e(bypasses)h(copies)f
(that)h(were)f(pre-)2137 2451 y(viously)j(unavoidable.)2221
2582 y(Receive)j(posting)g(is)i(an)f(ef)o(fective)f(and)g(useful)g
(tool)h(for)2137 2681 y(avoiding)c(copies,)g(but)h(its)h(bene\256ts)e
(vary)h(greatly)f(depend-)2137 2781 y(ing)h(on)g(the)f(data)h(transfer)
f(mechanism)g(of)g(the)h(underlying)2137 2880 y(transport)28
b(layer)-5 b(.)51 b(Sender)n(-based)26 b(memory)h(management)2137
2980 y(schemes)e(impose)g(high)f(synchronization)e(costs)j(on)g(mes-)
2137 3080 y(saging)e(layers)g(such)f(as)i(Sockets,)g(which)e(can)h(af)o
(fect)f(real-)2137 3179 y(ized)17 b(throughput.)22 b(A)17
b(receiver)n(-based)d(system)j(reduces)f(the)2137 3279
y(synchronization)21 b(costs)j(of)f(receive)g(posting)f(and)h(enables)
2137 3379 y(high)17 b(throughput)c(communication)h(without)i
(signi\256cantly)2137 3478 y(af)o(fecting)j(round-trip)e(latency)-5
b(.)2221 3609 y(In)32 b(addition)g(to)h(receive)f(posting,)j(Fast)f
(Sockets)f(also)2137 3709 y(collapses)k(multiple)f(protocol)f(layers)h
(together)f(and)h(re-)2137 3808 y(duces)18 b(the)g(complexity)e(of)i
(network)e(buf)o(fer)g(management.)2137 3908 y(The)h(end)e(result)i(of)
f(combining)e(these)j(techniques)e(is)i(a)g(sys-)2137
4008 y(tem)35 b(which)e(provides)g(high-performance,)f(low-latency)2137
4107 y(communication)18 b(for)h(existing)h(applications.)2137
4558 y FA(A)-9 b(vailability)2137 4802 y Fz(Implementations)65
b(of)i(Fast)h(Sockets)e(are)h(currently)2137 4902 y(available)55
b(for)g(Generic)f(Active)i(Messages)f(1.0)g(and)2137
5001 y(1.5,)63 b(and)54 b(for)g(Active)h(Messages)g(2.0.)129
b(The)55 b(soft-)2137 5101 y(ware)63 b(and)f(current)f(information)g
(about)g(the)i(status)2137 5201 y(of)57 b(Fast)g(Sockets)g(can)f(be)h
(found)e(on)h(the)h(W)-7 b(eb)57 b(at)2137 5300 y Ft
(http://now.cs.berkeley.edu/Fast-)2137 5400 y(comm/fastcomm.html)p
Fz(.)p eop
%%Page: 16 16
16 15 bop 0 83 a FA(Acknowledgements)0 268 y Fz(W)-7
b(e)16 b(would)f(like)g(to)g(thank)g(John)f(Schimmel,)i(our)e
(shepherd,)0 368 y(Douglas)28 b(Ghormley)-5 b(,)29 b(Neal)g(Cardwell,)i
(Kevin)d(Skadron,)0 467 y(Drew)19 b(Roselli,)h(and)e(Eric)h(Anderson)e
(for)h(their)h(advice)f(and)0 567 y(comments)28 b(in)h(improving)e(the)
i(presentation)f(of)h(this)g(pa-)0 667 y(per)-5 b(.)28
b(W)-7 b(e)21 b(would)f(also)g(like)h(to)g(thank)e(Rich)i(Martin,)f
(Remzi)0 766 y(Arpaci,)c(Amin)g(V)-9 b(ahdat,)16 b(Brent)g(Chun,)g
(Alan)g(Mainwaring,)0 866 y(and)24 b(the)h(other)f(members)g(of)h(the)g
(Berkeley)f(NOW)i(group)0 966 y(for)h(their)h(suggestions,)g(ideas,)i
(and)d(help)h(in)g(putting)f(this)0 1065 y(work)19 b(together)-5
b(.)0 1328 y FA(Refer)n(ences)0 1496 y Fo([Abbott)19
b(&)g(Peterson)g(1993])43 b(M.)28 b(B.)f(Abbott)i(and)g(L.)e(L.)h
(Peter)o(-)391 1587 y(son.)38 b(\252Increasing)22 b(network)f
(throughput)i(by)f(inte-)391 1679 y(grating)c(protocol)g(layers.\272)24
b Fm(IEEE/ACM)15 b(T)l(ransac-)391 1770 y(tions)29 b(on)g(Networking)p
Fo(,)i(1\(5\):600\261610,)i(October)391 1861 y(1993.)0
1975 y([Amer)19 b(et)f(al.)h(1987])42 b(P)-8 b(.)23 b(D.)f(Amer)m(,)i
(R.)f(N.)g(Kumar)m(,)h(R.)f(bin)g(Kao,)391 2067 y(J.)i(T)-6
b(.)24 b(Phillips,)i(and)f(L.)f(N.)g(Cassel.)57 b(\252Local)25
b(area)391 2158 y(broadcast)17 b(network)f(measurement:)25
b(T)m(raf)o(\256c)15 b(char)o(-)391 2249 y(acterization.\272)38
b(In)21 b Fm(Spring)h(COMPCON)p Fo(,)d(pp.)i(64\261)391
2341 y(70,)e(San)g(Francisco,)g(California,)f(February)i(1987.)0
2455 y([Banks)f(&)g(Prudence)h(1993])43 b(D.)19 b(Banks)h(and)g(M.)f
(Prudence.)30 b(\252A)391 2546 y(high-performance)i(network)e
(architecture)h(for)e(a)391 2637 y(P)-7 b(A-RISC)20 b(workstation.\272)
39 b Fm(IEEE)20 b(Journal)i(on)g(Se-)391 2729 y(lected)27
b(Ar)m(eas)h(in)e(Communications)p Fo(,)k(1)m(1\(2\):191\261)391
2820 y(202,)20 b(February)f(1993.)0 2934 y([Birrell)f(&)g(Nelson)i
(1984])43 b(A.)34 b(D.)g(Birrell)f(and)i(B.)f(J.)g(Nelson.)391
3026 y(\252Implementing)17 b(remote)f(procedure)g(calls.\272)21
b Fm(ACM)391 3117 y(T)l(ransactions)26 b(on)f(Computer)g(Systems)p
Fo(,)h(2\(1\):39\261)391 3208 y(59,)19 b(February)h(1984.)0
3322 y([Blumrich)f(et)f(al.)h(1994])43 b(M.)k(A.)g(Blumrich,)55
b(K.)47 b(Li,)54 b(R.)47 b(D.)391 3414 y(Alpert,)d(C.)39
b(Dubnicki,)44 b(E.)39 b(W)-7 b(.)38 b(Felten,)44 b(and)c(J.)391
3505 y(Sandber)o(g.)f(\252V)l(irtual)20 b(memory)i(mapped)h(network)391
3596 y(interface)d(for)e(the)i(SHRIMP)e(multicomputer)l(.\272)28
b(In)391 3688 y Fm(Pr)m(oceedings)d(of)f(the)f(21st)h(Annual)g
(International)391 3779 y(Symposium)44 b(on)g(Computer)g(Ar)m
(chitectur)m(e)p Fo(,)49 b(pp.)391 3870 y(142\261153,)21
b(Chicago,)f(IL,)d(April)i(1994.)0 3984 y([Brewer)f(et)h(al.)f(1995])43
b(E.)21 b(A.)f(Brewer)m(,)i(F)-6 b(.)20 b(T)-6 b(.)21
b(Chong,)i(L.)d(T)-6 b(.)21 b(Liu,)391 4076 y(S.)26 b(D.)f(Sharma,)j
(and)f(J.)f(D.)f(Kubiatowicz.)64 b(\252Re-)391 4167 y(mote)27
b(Queues:)42 b(Exposing)28 b(message)f(queues)h(for)391
4258 y(optimization)d(and)f(atomicity)-5 b(.\272)53 b(In)24
b Fm(Pr)m(oceedings)391 4350 y(of)19 b(SP)-10 b(AA)18
b('95)p Fo(,)h(Santa)g(Barbara,)g(CA,)f(June)i(1995.)0
4464 y([Buzzard)g(et)e(al.)g(1996])43 b(G.)69 b(Buzzard,)81
b(D.)69 b(Jacobson,)82 b(M.)391 4555 y(Mackey)-5 b(,)20
b(S.)e(Marovich,)h(and)g(J.)f(W)m(ilkes.)26 b(\252An)19
b(im-)391 4647 y(plementation)26 b(of)f(the)g(Hamlyn)g(sender)o
(-managed)391 4738 y(interface)36 b(architecture.\272)109
b(In)35 b Fm(Pr)m(oceedings)i(of)391 4829 y(the)22 b(Second)h
(Symposium)f(on)g(Operating)g(Systems)391 4921 y(Design)46
b(and)g(Implementation)p Fo(,)52 b(pp.)45 b(245\261259,)391
5012 y(Seattle,)18 b(W)-8 b(A,)18 b(October)h(1996.)0
5126 y([Caceres)g(et)g(al.)f(1991])43 b(R.)26 b(Caceres,)k(P)-8
b(.)26 b(B.)g(Danzig,)k(S.)c(Jamin,)391 5217 y(and)k(D.)e(J.)g(Mitzel.)
77 b(\252Characteristics)28 b(of)h(wide-)391 5309 y(area)c(TCP/IP)d
(conversations.\272)56 b(In)25 b Fm(Pr)m(oceedings)391
5400 y(of)19 b(ACM)f(SIGCOMM)i('91)p Fo(,)f(September)g(1991.)1988
83 y([Cheriton)g(&)f(W)m(illiamson)h(1987])43 b(D.)31
b(R.)g(Cheriton)g(and)i(C.)e(L.)2379 174 y(W)m(illiamson.)74
b(\252Network)29 b(measurement)h(of)f(the)2379 266 y(VMTP)16
b(request-response)i(protocol)f(in)f(the)h(V)f(dis-)2379
357 y(tributed)35 b(system.\272)108 b(In)35 b Fm(Pr)m(oceedings)i(of)e
(SIG-)2379 448 y(METRICS)26 b('87)p Fo(,)k(pp.)d(216\261225,)32
b(Banf)o(f,)c(Alberta,)2379 540 y(Canada,)19 b(May)h(1987.)1988
674 y([Cheriton)f(&)f(W)m(illiamson)h(1989])43 b(D.)96
b(Cheriton)h(and)g(C.)2379 766 y(W)m(illiamson.)75 b(\252VMTP:)28
b(A)g(transport)h(layer)g(for)2379 857 y(high-performance)74
b(distributed)f(computing.\272)2379 948 y Fm(IEEE)14
b(Communications)p Fo(,)k(pp.)e(37\26144,)i(June)f(1989.)1988
1083 y([Chu)i(1996])50 b(H.-K.)27 b(J.)g(Chu.)73 b(\252Zero-copy)29
b(TCP)e(in)h(Solaris.\272)2379 1174 y(In)h Fm(Pr)m(oceedings)h(of)f
(the)f(1996)k Fo(U)t Fa(S)t(E)t(N)t(I)t(X)d Fm(Annual)2379
1266 y(T)-7 b(echnical)32 b(Confer)m(ence)p Fo(,)k(San)31
b(Diego,)k(CA,)c(Jan-)2379 1357 y(uary)19 b(1996.)1988
1492 y([Claf)o(fy)f(et)g(al.)h(1992])42 b(K.)28 b(C.)g(Claf)o(fy)-5
b(,)30 b(G.)e(C.)g(Polyzos,)j(and)e(H.-)2379 1583 y(W)-7
b(.)25 b(Braun.)62 b(\252T)m(raf)o(\256c)26 b(characteristics)g(of)g
(the)g(T1)2379 1674 y(NSFNET)11 b(backbone.\272)18 b(T)-5
b(echnical)13 b(Report)h(CS92\261)2379 1766 y(270,)k(University)f(of)h
(California,)f(San)g(Diego,)g(July)2379 1857 y(1992.)1988
1992 y([Clark)h(&)h(T)-5 b(ennenhouse)21 b(1990])43 b(D.)25
b(D.)h(Clark)g(and)h(D.)f(L.)f(T)-5 b(en-)2379 2083 y(nenhouse.)34
b(\252Architectural)20 b(considerations)h(for)f(a)2379
2174 y(new)f(generation)i(of)e(protocols.\272)31 b(In)19
b Fm(Pr)m(oceedings)2379 2266 y(of)e(SIGCOMM)g('90)p
Fo(,)g(pp.)g(200\261208,)j(Philadelphia,)2379 2357 y(Pennsylvania,)g
(September)f(1990.)1988 2492 y([Clark)f(1982])43 b(D.)24
b(D.)g(Clark.)56 b(\252Modularity)26 b(and)f(ef)o(\256ciency)g(in)2379
2583 y(protocol)20 b(implementation.\272)30 b(Request)20
b(For)f(Com-)2379 2674 y(ments)g(817,)g(IETF,)e(July)j(1982.)1988
2809 y([Clark)e(et)h(al.)f(1989])43 b(D.)28 b(D.)f(Clark,)j(V)-10
b(.)28 b(Jacobson,)k(J.)c(Romkey)-5 b(,)2379 2900 y(and)19
b(H.)g(Salwen.)26 b(\252An)19 b(analysis)h(of)e(TCP)g(process-)2379
2991 y(ing)29 b(overhead.\272)82 b Fm(IEEE)28 b(Communications)p
Fo(,)33 b(pp.)2379 3083 y(23\26129,)20 b(June)g(1989.)1988
3217 y([Crowcroft)e(et)h(al.)f(1992])43 b(J.)54 b(Crowcroft,)63
b(I.)54 b(W)-6 b(akeman,)64 b(Z.)2379 3309 y(W)-6 b(ang,)31
b(and)e(D.)g(Sirovica.)75 b(\252Is)29 b(layering)h(harm-)2379
3400 y(ful?\272)110 b Fm(IEEE)29 b(Network)p Fo(,)j(6\(1\):20\26124,)j
(January)2379 3491 y(1992.)1988 3626 y([Culler)18 b(et)g(al.)h(1994])43
b(D.)22 b(E.)h(Culler)m(,)g(K.)g(Keeton,)i(L.)d(T)-6
b(.)23 b(Liu,)g(A.)2379 3717 y(Mainwaring,)34 b(R.)29
b(P)-8 b(.)29 b(Martin,)k(S.)c(H.)h(Rodrigues,)2379 3809
y(and)24 b(K.)e(W)m(right.)47 b Fm(The)23 b(Generic)h(Active)f(Message)
2379 3900 y(Interface)c(Speci\256cation)p Fo(,)i(February)e(1994.)1988
4035 y([Dahlin)f(et)h(al.)f(1994])43 b(M.)21 b(D.)g(Dahlin,)g(R.)f(Y)
-10 b(.)21 b(W)-6 b(ang,)22 b(D.)e(A.)h(Pat-)2379 4126
y(terson,)36 b(and)e(T)-6 b(.)32 b(E.)h(Anderson.)98
b(\252Cooperative)2379 4217 y(caching:)36 b(Using)25
b(remote)f(client)g(memory)h(to)f(im-)2379 4309 y(prove)f(\256le)f
(system)h(performance.\272)47 b(In)23 b Fm(Pr)m(oceed-)2379
4400 y(ings)15 b(of)g(the)g(First)f(Confer)m(ence)j(on)f(Operating)g
(Sys-)2379 4491 y(tems)22 b(Design)g(and)h(Implementation)g(\(OSDI\))p
Fo(,)f(pp.)2379 4583 y(267\261280,)f(October)e(1994.)1988
4717 y([Damianakis)g(et)g(al.)f(1996])43 b(S.)26 b(N.)g(Damianakis,)j
(C.)d(Dubnicki,)2379 4809 y(and)45 b(E.)e(W)-7 b(.)43
b(Felten.)152 b(\252Stream)43 b(sockets)i(on)2379 4900
y(SHRIMP.\272)121 b(T)-5 b(echnical)38 b(Report)g(TR-513-96,)2379
4991 y(Princeton)26 b(University)-5 b(,)29 b(Princeton,)f(NJ,)d
(October)2379 5083 y(1996.)1988 5217 y([de)19 b(Prycker)g(1993])42
b(M.)22 b(de)g(Prycker)l(.)41 b Fm(Asynchr)m(onous)24
b(T)l(ransfer)2379 5309 y(Mode:)41 b(Solution)28 b(for)e(Br)m(oadband)j
(ISDN)p Fo(.)65 b(Ellis)2379 5400 y(Horwood)20 b(Publishers,)e(second)j
(edition,)d(1993.)p eop
%%Page: 17 17
17 16 bop 150 83 a Fo([Druschel)19 b(&)g(Peterson)g(1993])43
b(P)-8 b(.)28 b(Druschel)i(and)g(L.)e(L.)h(Peter)o(-)541
174 y(son.)52 b(\252Fbufs:)34 b(A)24 b(high-bandwith)h(cross-domain)541
266 y(data)g(transfer)g(facility)-5 b(.\272)55 b(In)24
b Fm(Pr)m(oceedings)j(of)d(the)541 357 y(Fourteenth)j(Annual)f
(Symposium)g(on)g(Operating)541 448 y(Systems)32 b(Principles)p
Fo(,)i(pp.)d(189\261202,)36 b(Asheville,)541 540 y(NC,)18
b(December)i(1993.)150 660 y([Druschel)f(et)g(al.)f(1993])43
b(P)-8 b(.)30 b(Druschel,)k(M.)d(B.)g(Abbott,)j(M.)d(A.)541
752 y(Pagels,)g(and)f(L.)e(L.)f(Peterson.)77 b(\252Network)29
b(sub-)541 843 y(system)c(design:)38 b(A)25 b(case)g(for)f(an)i
(integrated)f(data)541 934 y(path.\272)46 b Fm(IEEE)21
b(Network)i(\(Special)g(Issue)g(on)g(End-)541 1026 y(System)38
b(Support)h(for)e(High)h(Speed)h(Networks\))p Fo(,)541
1117 y(7\(4\):8\26117,)20 b(July)g(1993.)150 1238 y([Druschel)f(et)g
(al.)f(1994])43 b(P)-8 b(.)40 b(Druschel,)47 b(L.)41
b(L.)f(Peterson,)47 b(and)541 1329 y(B.)22 b(S.)f(Davie.)43
b(\252Experiences)24 b(with)d(a)i(high-speed)541 1420
y(network)e(adapter:)28 b(A)20 b(software)g(perspective.\272)34
b(In)541 1512 y Fm(Pr)m(oceedings)23 b(of)e(ACM)g(SIGCOMM)h('94)p
Fo(,)g(August)541 1603 y(1994.)150 1724 y([Edwards)d(&)g(Muir)g(1995])
43 b(A.)28 b(Edwards)h(and)g(S.)f(Muir)l(.)75 b(\252Ex-)541
1815 y(periences)16 b(in)e(implementing)i(a)f(high)g(performance)541
1906 y(TCP)k(in)g(user)o(-space.\272)32 b(In)19 b Fm(ACM)g(SIGCOMM)h
('95)p Fo(,)541 1998 y(Cambridge,)g(MA,)e(August)i(1995.)150
2118 y([Feldmeier)f(1986])42 b(D.)22 b(C.)g(Feldmeier)l(.)43
b(\252T)m(raf)o(\256c)22 b(measurement)541 2210 y(on)i(a)f(token-ring)i
(network.\272)49 b(In)24 b Fm(Pr)m(oceedings)g(of)541
2301 y(the)31 b(1986)h(Computer)g(Networking)f(Confer)m(ence)p
Fo(,)541 2392 y(pp.)19 b(236\261243,)i(November)f(1986.)150
2513 y([Felten)e(et)h(al.)f(1996])43 b(E.)28 b(W)-7 b(.)28
b(Felten,)i(R.)e(D.)g(Alpert,)j(A.)d(Bilas,)541 2605
y(M.)j(A.)f(Blumrich,)j(D.)d(W)-7 b(.)30 b(Clark,)j(S.)d(N.)g(Dami-)541
2696 y(anakis,)42 b(C.)36 b(Dubnicki,)42 b(L.)36 b(Iftode,)41
b(and)c(K.)f(Li.)541 2787 y(\252Early)g(experience)h(with)f
(message-passing)i(on)541 2878 y(the)32 b(SHRIMP)e(multicomputer)l
(.\272)88 b(In)31 b Fm(Pr)m(oceed-)541 2970 y(ings)22
b(of)e(the)i(23r)m(d)g(Annual)f(International)h(Sympo-)541
3061 y(sium)33 b(on)g(Computer)h(Ar)m(chitectur)m(e)f(\(ISCA)f('96\))p
Fo(,)541 3152 y(pp.)19 b(296\261307,)i(Philadelphia,)e(P)-7
b(A,)18 b(May)i(1996.)150 3273 y([Forin)e(et)h(al.)f(1991])43
b(A.)19 b(Forin,)g(D.)f(Golub,)i(and)g(B.)e(N.)h(Bershad.)541
3365 y(\252An)c(I/O)f(system)h(for)f(Mach)h(3.0.\272)k(In)c
Fm(Pr)m(oceedings)541 3456 y(of)33 b(the)h Fo(U)t Fa(S)t(E)t(N)t(I)t(X)
f Fm(Mach)g(Symposium)p Fo(,)k(pp.)c(163\261)541 3547
y(176,)20 b(Monterey)-5 b(,)20 b(CA,)e(November)i(1991.)150
3668 y([Gusella)f(1990])43 b(R.)34 b(Gusella.)109 b(\252A)36
b(measurement)g(study)g(of)541 3759 y(diskless)c(workstation)g(traf)o
(\256c)d(on)j(an)f(Ethernet.\272)541 3851 y Fm(IEEE)74
b(T)l(ransactions)h(on)g(Communications)p Fo(,)541 3942
y(38\(9\):1557\2611568,)22 b(September)e(1990.)150 4063
y([Hutchinson)g(&)f(Peterson)g(1991])43 b(N.)37 b(Hutchinson)j(and)f
(L.)e(L.)541 4154 y(Peterson.)159 b(\252The)46 b Fm(x)p
Fo(-kernel:)79 b(An)45 b(architec-)541 4245 y(ture)g(for)g
(implementing)g(network)h(protocols.\272)541 4337 y Fm(IEEE)23
b(T)l(ransactions)j(on)f(Softwar)m(e)g(Engineering)p
Fo(,)541 4428 y(17\(1\):64\26176,)c(January)f(1991.)150
4549 y([Kay)f(&)g(Pasquale)g(1993])43 b(J.)22 b(Kay)g(and)h(J.)e
(Pasquale.)43 b(\252The)23 b(im-)541 4640 y(portance)37
b(of)f(non-data-touching)j(overheads)e(in)541 4731 y(TCP/IP.\272)76
b(In)29 b Fm(Pr)m(oceedings)i(of)e(the)g(1993)h(SIG-)541
4823 y(COMM)p Fo(,)40 b(pp.)f(259\261268,)47 b(San)39
b(Francisco,)45 b(CA,)541 4914 y(September)20 b(1993.)150
5035 y([Keeton)f(et)g(al.)f(1995])43 b(K.)20 b(Keeton,)h(D.)f(A.)g
(Patterson,)h(and)g(T)-6 b(.)20 b(E.)541 5126 y(Anderson.)82
b(\252LogP)30 b(quanti\256ed:)47 b(The)29 b(case)h(for)541
5217 y(low-overhead)18 b(local)f(area)f(networks.\272)24
b(In)16 b Fm(Hot)g(In-)541 5309 y(ter)m(connects)k(III)p
Fo(,)e(Stanford)h(University)-5 b(,)18 b(Stanford,)541
5400 y(CA,)g(August)i(1995.)2137 83 y([Kleinrock)g(&)f(Naylor)g(1974])
43 b(L.)26 b(Kleinrock)i(and)f(W)-7 b(.)26 b(E.)h(Nay-)2529
174 y(lor)l(.)f(\252On)20 b(measured)g(behavior)g(of)f(the)g(ARP)-7
b(A)18 b(net-)2529 266 y(work.\272)k(In)17 b Fm(AFIPS)e(Pr)m(oceedings)
p Fo(,)j(volume)g(43,)f(pp.)2529 357 y(767\261780,)k(1974.)2137
471 y([Liu)e(&)g(Culler)f(1995])43 b(L.)25 b(T)-6 b(.)25
b(Liu)g(and)h(D.)f(E.)f(Culler)l(.)60 b(\252Evalu-)2529
562 y(ation)22 b(of)g(the)g(Intel)f(Paragon)h(on)h(Active)f(Message)
2529 654 y(communication.\272)40 b(In)21 b Fm(Pr)m(oceedings)i(of)e
(the)h(1995)2529 745 y(Intel)13 b(Super)m(computer)j(Users)e(Gr)m(oup)h
(Confer)m(ence)p Fo(,)2529 836 y(June)k(1995.)2137 950
y([Maeda)h(&)f(Bershad)h(1992])43 b(C.)34 b(Maeda)i(and)g(B.)f(N.)f
(Bershad.)2529 1042 y(\252Networking)26 b(performance)g(for)f
(microkernels.\272)2529 1133 y(In)42 b Fm(Pr)m(oceedings)j(of)d(the)h
(Thir)m(d)g(W)-7 b(orkshop)44 b(on)2529 1224 y(W)-7 b(orkstation)20
b(Operating)h(Systems)p Fo(,)e(pp.)h(154\261159,)2529
1315 y(1992.)2137 1429 y([Maeda)g(&)f(Bershad)h(1993a])43
b(C.)53 b(Maeda)i(and)f(B.)f(Bershad.)2529 1521 y(\252Protocol)47
b(service)h(decomposition)h(for)e(high-)2529 1612 y(performance)35
b(networking.\272)102 b(In)34 b Fm(Pr)m(oceedings)2529
1703 y(of)f(the)h(Fourteenth)h(Symposium)g(on)f(Operating)2529
1795 y(Systems)d(Principles)p Fo(,)j(pp.)e(244\261255,)k(Asheville,)
2529 1886 y(NC,)18 b(December)i(1993.)2137 2000 y([Maeda)g(&)f(Bershad)
h(1993b])43 b(C.)52 b(Maeda)i(and)f(B.)f(Bershad.)2529
2091 y(\252Service)28 b(without)h(servers.\272)76 b(In)29
b Fm(W)-7 b(orkshop)30 b(on)2529 2183 y(W)-7 b(orkstation)36
b(Operating)g(Systems)f(IV)p Fo(,)f(October)2529 2274
y(1993.)2137 2388 y([Mainwaring)20 b(&)f(Culler)g(1995])42
b(A.)79 b(Mainwaring)h(and)g(D.)2529 2479 y(Culler)l(.)152
b Fm(Active)43 b(Messages:)77 b(Or)m(ganization)2529
2571 y(and)60 b(Applications)f(Pr)m(ogramming)i(Interface)p
Fo(,)2529 2662 y(September)19 b(1995.)2137 2776 y([Martin)g(1994])43
b(R.)21 b(P)-8 b(.)20 b(Martin.)37 b(\252HP)-7 b(AM:)21
b(An)g(Active)h(Message)2529 2867 y(layer)j(for)f(a)h(network)g(of)g
(HP)f(workstations.\272)57 b(In)2529 2959 y Fm(Hot)15
b(Inter)m(connects)j(II)p Fo(,)d(pp.)h(40\26158,)h(Stanford)f(Uni-)2529
3050 y(versity)-5 b(,)19 b(Stanford,)f(CA,)g(August)i(1994.)2137
3164 y([Nagle)f(1984])43 b(J.)20 b(Nagle.)31 b(\252Congestion)21
b(control)f(in)g(IP/TCP)e(in-)2529 3255 y(ternetworks.\272)80
b(Request)30 b(For)f(Comments)h(896,)2529 3346 y(Network)19
b(W)-6 b(orking)19 b(Group,)g(January)i(1984.)2137 3460
y([Pagels)e(et)g(al.)f(1994])43 b(M.)27 b(A.)g(Pagels,)j(P)-8
b(.)26 b(Druschel,)k(and)e(L.)f(L.)2529 3552 y(Peterson.)70
b(\252Cache)28 b(and)g(TLB)f(ef)o(fectiveness)h(in)2529
3643 y(processing)i(network)g(I/O.\272)76 b(T)-5 b(echnical)29
b(Report)2529 3734 y(94-08,)19 b(University)h(of)f(Arizona,)g(March)g
(1994.)2137 3848 y([Pakin)g(et)g(al.)f(1995])43 b(S.)38
b(Pakin,)44 b(M.)39 b(Lauria,)44 b(and)39 b(A.)g(Chien.)2529
3940 y(\252High-performance)47 b(messaging)f(on)g(worksta-)2529
4031 y(tions:)f(Illinois)28 b(Fast)g(Messages\(FM\))i(for)f(Myri-)2529
4122 y(net.\272)g(In)19 b Fm(Super)m(computing)j('95)p
Fo(,)e(San)f(Diego,)h(CA,)2529 4214 y(1995.)2137 4328
y([Peterson)f(1993])43 b(L.)22 b(L.)f(Peterson.)45 b(\252Life)22
b(on)h(the)g(OS/network)2529 4419 y(boundary)-5 b(.\272)171
b Fm(Operating)49 b(Systems)f(Review)p Fo(,)2529 4510
y(27\(2\):94\26198,)21 b(April)d(1993.)2137 4624 y([Postel)h(1981a])43
b(J.)30 b(Postel.)84 b(\252Internet)31 b(protocol.\272)86
b(Request)2529 4715 y(For)26 b(Comments)h(791,)i(IETF)c(Network)i(W)-6
b(orking)2529 4807 y(Group,)19 b(September)g(1981.)2137
4921 y([Postel)g(1981b])43 b(J.)19 b(Postel.)28 b(\252Transmission)19
b(control)h(protocol.\272)2529 5012 y(Request)h(For)f(CommentsC)i(793,)
f(IETF)f(Network)2529 5103 y(W)-6 b(orking)19 b(Group,)g(September)h
(1981.)2137 5217 y([Postel)f(1981c])43 b(J.)h(Postel.)152
b(\252User)44 b(datagram)h(protocol.\272)2529 5309 y(Request)31
b(For)e(Comments)i(768,)j(IETF)29 b(Network)2529 5400
y(W)-6 b(orking)19 b(Group,)g(August)h(1981.)p eop
%%Page: 18 18
18 17 bop 0 83 a Fo([Schoch)20 b(&)e(Hupp)i(1980])43
b(J.)17 b(F)-6 b(.)17 b(Schoch)i(and)f(J.)f(A.)h(Hupp.)25
b(\252Per)o(-)391 174 y(formance)16 b(of)g(an)f(Ethernet)g(local)h
(network.\272)k Fm(Com-)391 266 y(munications)c(of)e(the)g(ACM)p
Fo(,)f(23\(12\):71)m(1\261720,)18 b(De-)391 357 y(cember)i(1980.)0
482 y([Seitz)e(1994])43 b(C.)31 b(Seitz.)93 b(\252Myrinet:)53
b(A)32 b(gigabit-per)o(-second)391 573 y(local)h(area)g(network.\272)97
b(In)33 b Fm(Hot)g(Inter)m(connects)391 664 y(II)p Fo(,)20
b(Stanford)g(University)-5 b(,)21 b(Stanford,)g(CA,)f(August)391
756 y(1994.)0 880 y([Stevens)f(1990])43 b(W)-7 b(.)23
b(R.)h(Stevens.)53 b Fm(UNIX)23 b(Network)i(Pr)m(ogram-)391
971 y(ming)p Fo(.)69 b(Prentice)27 b(Hall,)i(Englewood)f(Clif)o(fs,)g
(NJ,)391 1063 y(1990.)0 1187 y([Thekkath)20 b(et)e(al.)h(1993])43
b(C.)12 b(A.)h(Thekkath,)i(T)-6 b(.)13 b(Nguyen,)j(E.)d(Moy)-5
b(,)391 1279 y(and)21 b(E.)d(D.)h(Lazowska.)31 b(\252Implementing)21
b(network)391 1370 y(protocols)30 b(at)e(user)o(-level.\272)74
b Fm(IEEE/ACM)26 b(T)l(rans-)391 1461 y(actions)21 b(on)f(Networking)p
Fo(,)h(pp.)f(554\261565,)i(October)391 1553 y(1993.)0
1677 y([von)e(Eicken)f(et)f(al.)h(1992])43 b(T)-6 b(.)19
b(von)h(Eicken,)g(D.)f(E.)f(Culler)m(,)h(S.)g(C.)391
1768 y(Goldstein,)j(and)h(K.)e(E.)f(Schauser)l(.)40 b(\252Active)22
b(Mes-)391 1860 y(sages:)k(A)19 b(mechanism)i(for)e(integrated)g
(communi-)391 1951 y(cation)27 b(and)f(computation.\272)63
b(In)26 b Fm(Pr)m(oceedings)h(of)391 2042 y(the)j(Nineteenth)g(ISCA)p
Fo(,)e(Gold)i(Coast,)i(Australia,)391 2134 y(May)20 b(1992.)0
2258 y([von)g(Eicken)f(et)f(al.)h(1995])43 b(T)-6 b(.)20
b(von)h(Eicken,)g(A.)g(Basu,)g(V)-10 b(.)20 b(Buch,)391
2350 y(and)g(W)-7 b(.)18 b(V)-10 b(ogels.)28 b(\252U-Net:)d(A)19
b(user)o(-level)g(network)391 2441 y(interface)25 b(for)g(parallel)f
(and)h(distributed)g(comput-)391 2532 y(ing.\272)57 b(In)24
b Fm(Pr)m(oceedings)j(of)d(the)h(Fifteenth)f(SOSP)p Fo(,)391
2623 y(pp.)f(40\26153,)i(Copper)e(Mountain,)i(CO,)c(December)391
2715 y(1995.)0 2839 y([W)-6 b(atson)19 b(&)g(Mamrak)g(1987])43
b(R.)22 b(M.)g(W)-6 b(atson)23 b(and)g(S.)e(A.)h(Mam-)391
2931 y(rak.)113 b(\252Gaining)36 b(ef)o(\256ciency)h(in)f(transport)g
(ser)o(-)391 3022 y(vices)25 b(by)g(appropriate)h(design)g(and)f
(implementa-)391 3113 y(tion)30 b(choices.\272)79 b Fm(ACM)29
b(T)l(ransactions)h(on)f(Com-)391 3205 y(puter)20 b(Systems)p
Fo(,)f(5\(2\):97\261120,)h(May)g(1987.)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
